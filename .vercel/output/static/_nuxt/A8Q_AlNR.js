import{a as H,b as R,c as $,d as j,e as G}from"./2b3pExPR.js";import{v as L,e as I,d as J,r as Q,i as z,l as p}from"./B8LMokGs.js";import{q as K,aa as U,u as W,B as C,v as X,$ as l,D as n,P as d,O as F,J as D,N as c}from"./BLv-qrLK.js";import"./CzxjUVWS.js";import"./Dv9E2zKD.js";import"./DKMn0Wwy.js";import"./DT59Ktqr.js";import"./eh08efi3.js";import"./BZpiv6Tl.js";const Y={key:0,class:"container flex items-start gap-16 px-2"},Z={class:"w-full"},ee={class:"flex items-center justify-between w-full gap-4 mt-8 md:gap-8"},de=K({__name:"[slug]",async setup(te){var y,g,h,f,w,P,x,k,q,v;let r,m;const{loadProductsForPage:M,updateProductList:i,products:B,getCurrentPageFromRoute:N}=L(),{isQueryEmpty:T}=I(),{storeSettings:u}=J(),e=Q(),_=e.params.slug;let t=null,s="Products",a="Products in this category";try{const{data:o}=([r,m]=U(()=>z("getProductCategories",{first:1,slug:[_]})),r=await r,m(),r);t=((h=(g=(y=o.value)==null?void 0:y.productCategories)==null?void 0:g.nodes)==null?void 0:h[0])||null,t&&(s=((f=t.seo)==null?void 0:f.title)||t.name||"Products",a=((w=t.seo)==null?void 0:w.metaDesc)||t.description||"Products in this category",p({title:s,meta:[{name:"description",content:a},{property:"og:title",content:((P=t.seo)==null?void 0:P.opengraphTitle)||s},{property:"og:description",content:((x=t.seo)==null?void 0:x.opengraphDescription)||a}],link:[{rel:"canonical",href:((k=t.seo)==null?void 0:k.canonical)||""}]}),(v=(q=t.seo)==null?void 0:q.schema)!=null&&v.raw&&p({script:[{type:"application/ld+json",innerHTML:t.seo.schema.raw}]}))}catch(o){console.error("Грешка при зареждане на SEO данни за категорията:",o),p({title:s,meta:[{name:"description",content:a}]})}const b={categoryIn:[_],search:e.query.search,priceMin:e.query.priceMin?parseFloat(e.query.priceMin):void 0,priceMax:e.query.priceMax?parseFloat(e.query.priceMax):void 0,onSale:e.query.sale==="true"?!0:void 0,orderby:e.query.orderby||"DATE"};return W(async()=>{const o=N();await M(o,b),T.value||i()}),C(()=>e.query,()=>{e.name==="produkt-kategoriya-slug"&&i()}),C(()=>e.params,()=>{e.name==="produkt-kategoriya-slug"&&i()}),(o,oe)=>{const A=$,E=H,O=j,S=G,V=R;return n(B).length,c(),X("div",Y,[n(u).showFilters?(c(),d(A,{key:0,"hide-categories":!0})):l("",!0),F("div",Z,[F("div",ee,[D(E),n(u).showOrderByDropdown?(c(),d(O,{key:0,class:"hidden md:inline-flex"})):l("",!0),n(u).showFilters?(c(),d(S,{key:1,class:"md:hidden"})):l("",!0)]),D(V)])])}}});export{de as default};
