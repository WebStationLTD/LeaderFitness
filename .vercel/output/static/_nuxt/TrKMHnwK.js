import{_ as M,a as N,b as B,c as S,d as T,e as A}from"./C_oc3ba4.js";import{d as R,a8 as E,X as V,m as H,n as I,K as m,A as L,y as O,C as j,z as G,I as x,c as v,h as u,a as n,i as _,e as c,b,w as $,o as a,g as z}from"./CyBGr-YO.js";import"./CO4MXo0O.js";import"./DDYUcn6y.js";import"./DXb2HN8e.js";import"./CIAHthuC.js";const K={key:0,class:"container flex items-start gap-16 px-2"},X={class:"w-full"},J={class:"flex items-center justify-between w-full gap-4 mt-8 md:gap-8"},Q={key:1,class:"py-16 text-center"},re=R({__name:"products",async setup(U){let y,g;const{loadProductsForPage:q,updateProductList:f,products:k,getCurrentPageFromRoute:P,isLoading:h}=E(),t=V(),{storeSettings:d}=H();I(),m({title:"Products",meta:[{name:"description",content:"Discover our products"}]});const C=L(()=>({search:t.query.search,categoryIn:t.query.category?[t.query.category]:void 0,priceMin:t.query.priceMin?parseFloat(t.query.priceMin):void 0,priceMax:t.query.priceMax?parseFloat(t.query.priceMax):void 0,onSale:t.query.sale==="true"?!0:void 0,orderby:t.query.orderby||"DATE",order:t.query.order||"DESC",rating:t.query.rating?[parseInt(t.query.rating,10)]:void 0})),D=P();return[y,g]=O(()=>q(D,C.value)),await y,g(),j(async()=>{var l,r;try{const{data:s}=await G("getShopPage"),o=(l=s.value)==null?void 0:l.page;if(o!=null&&o.seo){const e=o.seo,i=(e==null?void 0:e.title)||o.title||"Products",p=(e==null?void 0:e.metaDesc)||o.content||"Discover our products";m({title:i,meta:[{name:"description",content:p},{property:"og:title",content:(e==null?void 0:e.opengraphTitle)||i},{property:"og:description",content:(e==null?void 0:e.opengraphDescription)||p},{name:"robots",content:e!=null&&e.metaRobotsNoindex?"noindex":"index"},{name:"robots",content:e!=null&&e.metaRobotsNofollow?"nofollow":"follow"}],link:[{rel:"canonical",href:(e==null?void 0:e.canonical)||"/products"}]}),(r=e==null?void 0:e.schema)!=null&&r.raw&&m({script:[{type:"application/ld+json",innerHTML:e.schema.raw}]})}}catch(s){console.warn("Не можахме да заредим SEO данните (очаквано при първо зареждане):",s)}}),x(()=>t.query,()=>{t.name!=="products"&&t.name!=="product-page-pager"||f()}),x(()=>t.params,()=>{t.name!=="products"&&t.name!=="product-page-pager"||f()}),(l,r)=>{var w;const s=S,o=N,e=T,i=A,p=B,F=M;return!n(h)&&((w=n(k))!=null&&w.length)?(a(),v("div",K,[n(d).showFilters?(a(),u(s,{key:0})):_("",!0),c("div",X,[c("div",J,[b(o),n(d).showOrderByDropdown?(a(),u(e,{key:0,class:"hidden md:inline-flex"})):_("",!0),n(d).showFilters?(a(),u(i,{key:1,class:"md:hidden"})):_("",!0)]),b(p)])])):n(h)?(a(),v("div",Q,r[0]||(r[0]=[c("div",{class:"inline-block p-4 text-gray-500"},[c("div",{class:"h-8 w-8 border-t-2 border-primary border-solid rounded-full mx-auto animate-spin mb-4"}),c("p",null,"Зареждане на продукти...")],-1)]))):(a(),u(F,{key:2},{default:$(()=>r[1]||(r[1]=[z("Could not fetch products from your store. Please check your configuration.")])),_:1,__:[1]}))}}});export{re as default};
