import{_ as O,a as R,b as j,c as G,d as I}from"./BYsSpj4a.js";import{d as L,a6 as $,n as z,m as K,X as Q,y as X,z as J,K as p,C as U,I as F,c as W,i as l,a as n,o as c,h as d,e as v,b as M}from"./C9ZPaObW.js";import"./DShf2aAB.js";import"./CGauRj3o.js";import"./CAKx8BxW.js";import"./BbjAHyGP.js";import"./BPEocSHO.js";const Y={key:0,class:"container flex items-start gap-16 px-2"},Z={class:"w-full"},ee={class:"flex items-center justify-between w-full gap-4 mt-8 md:gap-8"},pe=L({__name:"[slug]",async setup(te){var y,g,h,f,w,x,P,k,C,q;let r,m;const{loadProductsForPage:D,updateProductList:i,products:B,getCurrentPageFromRoute:b}=$(),{isQueryEmpty:N}=z(),{storeSettings:u}=K(),e=Q(),_=e.params.slug;let t=null,s="Products",a="Products in this category";try{const{data:o}=([r,m]=X(()=>J("getProductCategories",{first:1,slug:[_]})),r=await r,m(),r);t=((h=(g=(y=o.value)==null?void 0:y.productCategories)==null?void 0:g.nodes)==null?void 0:h[0])||null,t&&(s=((f=t.seo)==null?void 0:f.title)||t.name||"Products",a=((w=t.seo)==null?void 0:w.metaDesc)||t.description||"Products in this category",p({title:s,meta:[{name:"description",content:a},{property:"og:title",content:((x=t.seo)==null?void 0:x.opengraphTitle)||s},{property:"og:description",content:((P=t.seo)==null?void 0:P.opengraphDescription)||a}],link:[{rel:"canonical",href:((k=t.seo)==null?void 0:k.canonical)||""}]}),(q=(C=t.seo)==null?void 0:C.schema)!=null&&q.raw&&p({script:[{type:"application/ld+json",innerHTML:t.seo.schema.raw}]}))}catch(o){console.error("Грешка при зареждане на SEO данни за категорията:",o),p({title:s,meta:[{name:"description",content:a}]})}const T={categoryIn:[_],search:e.query.search,priceMin:e.query.priceMin?parseFloat(e.query.priceMin):void 0,priceMax:e.query.priceMax?parseFloat(e.query.priceMax):void 0,onSale:e.query.sale==="true"?!0:void 0,orderby:e.query.orderby||"DATE"};return U(async()=>{const o=b();await D(o,T),N.value||i()}),F(()=>e.query,()=>{e.name==="produkt-kategoriya-slug"&&i()}),F(()=>e.params,()=>{e.name==="produkt-kategoriya-slug"&&i()}),(o,oe)=>{const A=O,E=R,S=j,V=G,H=I;return n(B).length,c(),W("div",Y,[n(u).showFilters?(c(),d(A,{key:0,"hide-categories":!0})):l("",!0),v("div",Z,[v("div",ee,[M(E),n(u).showOrderByDropdown?(c(),d(S,{key:0,class:"hidden md:inline-flex"})):l("",!0),n(u).showFilters?(c(),d(V,{key:1,class:"md:hidden"})):l("",!0)]),M(H)])])}}});export{pe as default};
