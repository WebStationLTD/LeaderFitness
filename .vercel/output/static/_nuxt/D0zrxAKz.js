import{_ as M,a as S,b as T,c as E,d as O,e as R}from"./9TxeAfjS.js";import{d as V,a8 as A,X as H,m as j,n as G,y as I,z as L,K as s,C as $,I as g,c as z,h as d,a as n,i as l,e as w,b as x,o as c}from"./86dFGjsn.js";import"./CqKe_Vxy.js";import"./MMw8a0Mt.js";import"./TQp3UGqg.js";import"./BOC87lRb.js";const K={key:0,class:"container flex items-start gap-16 px-2"},Q={class:"w-full"},W={class:"flex items-center justify-between w-full gap-4 mt-8 md:gap-8"},ne=V({__name:"products",async setup(X){var y,f;let r,_;const{loadProductsForPage:P,updateProductList:a,products:v,getCurrentPageFromRoute:k}=A(),e=H(),{storeSettings:i}=j(),{isQueryEmpty:D}=G();let p="Products",u="Discover our products",m=!1;try{const{data:t}=([r,_]=I(()=>L("getShopPage")),r=await r,_(),r),o=(y=t.value)==null?void 0:y.page;o?o.seo?(p=o.seo.title||o.title||"Products",u=o.seo.metaDesc||o.content||"Discover our products",s({title:p,meta:[{name:"description",content:u},{property:"og:title",content:o.seo.opengraphTitle||p},{property:"og:description",content:o.seo.opengraphDescription||u},{name:"robots",content:o.seo.metaRobotsNoindex?"noindex":"index"},{name:"robots",content:o.seo.metaRobotsNofollow?"nofollow":"follow"}],link:[{rel:"canonical",href:o.seo.canonical||"/products"}]}),(f=o.seo.schema)!=null&&f.raw&&s({script:[{type:"application/ld+json",innerHTML:o.seo.schema.raw}]}),m=!0):console.error("Страницата няма SEO данни от Yoast"):console.error("Не е намерена страница products в WordPress"),m||(console.warn("Използваме резервни SEO данни за продуктовата страница"),s({title:"Products",meta:[{name:"description",content:"Discover our products"}]}))}catch(t){console.error("Грешка при зареждане на SEO данни:",t),s({title:"Products",meta:[{name:"description",content:"Discover our products"}]})}const q={search:e.query.search,categoryIn:e.query.category?[e.query.category]:void 0,priceMin:e.query.priceMin?parseFloat(e.query.priceMin):void 0,priceMax:e.query.priceMax?parseFloat(e.query.priceMax):void 0,onSale:e.query.sale==="true"?!0:void 0,orderby:e.query.orderby||"DATE"};return $(async()=>{const t=k();await P(t,q),D.value||a()}),g(()=>e.query,()=>{e.name!=="products"&&e.name!=="product-page-pager"||a()}),g(()=>e.params,()=>{e.name!=="products"&&e.name!=="product-page-pager"||a()}),(t,o)=>{var h;const F=E,C=S,N=O,b=R,B=T,Y=M;return(h=n(v))!=null&&h.length,c(),z("div",K,[n(i).showFilters?(c(),d(F,{key:0})):l("",!0),w("div",Q,[w("div",W,[x(C),n(i).showOrderByDropdown?(c(),d(N,{key:0,class:"hidden md:inline-flex"})):l("",!0),n(i).showFilters?(c(),d(b,{key:1,class:"md:hidden"})):l("",!0)]),x(B)])])}}});export{ne as default};
