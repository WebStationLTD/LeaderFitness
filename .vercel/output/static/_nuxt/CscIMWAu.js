import{_ as F}from"./TQp3UGqg.js";import{d as X,u as D,n as N,A as v,B as W,I as z,c as C,o as k,e as y,Q as G,b,_ as U,a as n,R as Y,T as H,v as q,a1 as K,a2 as J,a3 as R,a4 as Z,a5 as E,i as I,S as V,V as ee,a6 as te,a7 as ne,m as oe,h as se,w as O,f as ae,g as re,t as B}from"./86dFGjsn.js";import{_ as ie}from"./BOC87lRb.js";const le={class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},ce=["disabled"],ue=["max"],de=["disabled"],me=X({__name:"QuantityInput",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:c,isUpdatingCart:d,cart:_}=D(),{debounce:p}=N(),t=v(()=>{var f,u;return e.item.variation?(f=e.item.variation)==null?void 0:f.node:(u=e.item.product)==null?void 0:u.node}),s=W(e.item.quantity),o=v(()=>t.value.stockQuantity?t.value.stockQuantity<=s.value:!1),a=()=>s.value++,r=()=>s.value--;z(s,p(()=>{s.value!==""&&c(e.item.key,s.value)},250));const m=()=>{var f,u,h;if(s.value===""){const l=(h=(u=(f=_.value)==null?void 0:f.contents)==null?void 0:u.nodes)==null?void 0:h.find(g=>g.key===e.item.key);l&&(s.value=l.quantity)}};return(f,u)=>{const h=U;return k(),C("div",le,[y("button",{title:"Decrease Quantity","aria-label":"Decrease Quantity",onClick:r,type:"button",class:"focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed",disabled:n(d)||n(s)<=0},[b(h,{name:"ion:remove",size:"14"})],8,ce),G(y("input",{"onUpdate:modelValue":u[0]||(u[0]=l=>H(s)?s.value=l:null),type:"number",min:"0",max:n(t).stockQuantity,"aria-label":"Quantity",onFocusout:m,class:"flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300"},null,40,ue),[[Y,n(s),void 0,{number:!0}]]),y("button",{title:"Increase Quantity","aria-label":"Increase Quantity",onClick:a,type:"button",class:"focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100",disabled:n(d)||n(o)},[b(h,{name:"ion:add",size:"14"})],8,de)])}}}),pe=Object.assign(q(me,[["__scopeId","data-v-7c0d03fb"]]),{__name:"QuantityInput"}),ve={},fe={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 512 512"};function he(e,c){return k(),C("svg",fe,c[0]||(c[0]=[y("path",{d:"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),y("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M80 112h352"},null,-1),y("path",{d:"M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}const ye=Object.assign(q(ve,[["render",he]]),{__name:"TrashIcon"});function _e(e){return K()?(J(e),!0):!1}const ge=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const be=Object.prototype.toString,xe=e=>be.call(e)==="[object Object]";function A(e){return Array.isArray(e)?e:[e]}function ke(e,c,d){return z(e,c,{...d,immediate:!0})}const we=ge?window:void 0;function Se(e){var c;const d=E(e);return(c=d==null?void 0:d.$el)!=null?c:d}function L(...e){const c=[],d=()=>{c.forEach(o=>o()),c.length=0},_=(o,a,r,m)=>(o.addEventListener(a,r,m),()=>o.removeEventListener(a,r,m)),p=v(()=>{const o=A(E(e[0])).filter(a=>a!=null);return o.every(a=>typeof a!="string")?o:void 0}),t=ke(()=>{var o,a;return[(a=(o=p.value)==null?void 0:o.map(r=>Se(r)))!=null?a:[we].filter(r=>r!=null),A(E(p.value?e[1]:e[0])),A(n(p.value?e[2]:e[1])),E(p.value?e[3]:e[2])]},([o,a,r,m])=>{if(d(),!(o!=null&&o.length)||!(a!=null&&a.length)||!(r!=null&&r.length))return;const f=xe(m)?{...m}:m;c.push(...o.flatMap(u=>a.flatMap(h=>r.map(l=>_(u,h,l,f)))))},{flush:"post"}),s=()=>{t(),d()};return _e(d),s}function Ce(e,c={}){const{threshold:d=50,onSwipe:_,onSwipeEnd:p,onSwipeStart:t,passive:s=!0}=c,o=R({x:0,y:0}),a=R({x:0,y:0}),r=v(()=>o.x-a.x),m=v(()=>o.y-a.y),{max:f,abs:u}=Math,h=v(()=>f(u(r.value),u(m.value))>=d),l=Z(!1),g=v(()=>h.value?u(r.value)>u(m.value)?r.value>0?"left":"right":m.value>0?"up":"down":"none"),w=i=>[i.touches[0].clientX,i.touches[0].clientY],Q=(i,x)=>{o.x=i,o.y=x},M=(i,x)=>{a.x=i,a.y=x},S={passive:s,capture:!s},$=i=>{l.value&&(p==null||p(i,g.value)),l.value=!1},P=[L(e,"touchstart",i=>{if(i.touches.length!==1)return;const[x,T]=w(i);Q(x,T),M(x,T),t==null||t(i)},S),L(e,"touchmove",i=>{if(i.touches.length!==1)return;const[x,T]=w(i);M(x,T),S.capture&&!S.passive&&Math.abs(r.value)>Math.abs(m.value)&&i.preventDefault(),!l.value&&h.value&&(l.value=!0),l.value&&(_==null||_(i))},S),L(e,["touchend","touchcancel"],$,S)];return{isSwiping:l,direction:g,coordsStart:o,coordsEnd:a,lengthX:r,lengthY:m,stop:()=>P.forEach(i=>i()),isPassiveEventSupported:!0}}const Ie={key:0,class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},Qe={__name:"SwipeCard",emits:["remove"],setup(e,{emit:c}){const d=c,_=W(!0),p=W(null),{isSwiping:t,lengthX:s}=Ce(p,{passive:!0,onSwipeEnd(){s.value>80&&(_.value=!1,d("remove"))}});return(o,a)=>{const r=ye;return n(_)?(k(),C("div",Ie,[b(r,{class:V(["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":n(s)>40,"delete-ready":n(s)>80}])},null,8,["class"]),y("div",{class:V(["rounded-lg inset-0 absolute",{"transition-all":!n(t)}]),ref_key:"el",ref:p,style:te({transform:n(t)?`translateX(-${n(s)}px)`:"none"})},[ee(o.$slots,"default")],6)])):I("",!0)}}},Me={key:0,class:"flex items-center gap-3 group"},Te={class:"flex-1 min-w-0"},Ee={class:"flex flex-wrap gap-x-2 gap-y-1 items-center"},$e={key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"},Pe={key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"},je={class:"inline-flex gap-2 flex-col items-end shrink-0"},Oe={class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},Re={__name:"CartCard",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:c}=D(),{addToWishlist:d}=ne(),{FALLBACK_IMG:_}=N(),{storeSettings:p}=oe(),t=v(()=>{var l,g;return e.item.variation?(l=e.item.variation)==null?void 0:l.node:(g=e.item.product)==null?void 0:g.node}),s=v(()=>`/produkt/${decodeURIComponent(e.item.product.node.slug)}`),o=v(()=>t.value.stockQuantity?t.value.lowStockAmount>=t.value.stockQuantity:!1),a=v(()=>{var l,g,w;return((l=t.value.image)==null?void 0:l.cartSourceUrl)||((g=t.value.image)==null?void 0:g.sourceUrl)||((w=e.item.product.image)==null?void 0:w.sourceUrl)||_}),r=v(()=>parseFloat(t.value.rawRegularPrice)),m=v(()=>parseFloat(t.value.rawSalePrice)),f=v(()=>Math.round((r.value-m.value)/r.value*100)+"%"),u=()=>{c(e.item.key,0)},h=()=>{d(e.item.product.node),u()};return(l,g)=>{const w=F,Q=ae,M=ie,S=pe,$=U,P=Qe;return k(),se(P,{onRemove:u},{default:O(()=>[n(t)?(k(),C("div",Me,[b(Q,{to:n(s)},{default:O(()=>{var j,i;return[b(w,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:n(a),alt:((j=n(t).image)==null?void 0:j.altText)||n(t).name,title:((i=n(t).image)==null?void 0:i.title)||n(t).name,loading:"lazy"},null,8,["src","alt","title"])]}),_:1},8,["to"]),y("div",Te,[y("div",Ee,[b(Q,{class:"leading-tight truncate max-w-full block",to:n(s)},{default:O(()=>[re(B(n(t).name),1)]),_:1},8,["to"]),n(t).salePrice?(k(),C("span",$e," Save "+B(n(f)),1)):I("",!0),n(o)?(k(),C("span",Pe," Low Stock ")):I("",!0)]),b(M,{class:"mt-1 text-xs","sale-price":n(t).salePrice,"regular-price":n(t).regularPrice},null,8,["sale-price","regular-price"])]),y("div",je,[b(S,{item:e.item},null,8,["item"]),y("div",Oe,[n(p).showMoveToWishlist?(k(),C("button",{key:0,class:"mr-2 pr-2 border-r",onClick:h,type:"button"},"Move to Wishlist")):I("",!0),y("button",{title:"Remove Item","aria-label":"Remove Item",onClick:u,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[b($,{name:"ion:trash",class:"md:inline-block",size:"12"})])])])])):I("",!0)]),_:1})}}};export{ye as _,Re as a};
