import{_ as M,a as S,b as T,c as E,d as O,e as V}from"./2b3pExPR.js";import{v as R,r as A,d as H,e as $,i as j,l as s}from"./B8LMokGs.js";import{q as G,aa as L,u as Q,B as g,v as I,P as d,D as n,$ as l,O as w,J as x,N as c}from"./BLv-qrLK.js";import"./CzxjUVWS.js";import"./Dv9E2zKD.js";import"./DKMn0Wwy.js";import"./DT59Ktqr.js";import"./eh08efi3.js";import"./BZpiv6Tl.js";const J={key:0,class:"container flex items-start gap-16 px-2"},W={class:"w-full"},Y={class:"flex items-center justify-between w-full gap-4 mt-8 md:gap-8"},ie=G({__name:"products",async setup(z){var y,f;let r,m;const{loadProductsForPage:P,updateProductList:a,products:v,getCurrentPageFromRoute:D}=R(),e=A(),{storeSettings:i}=H(),{isQueryEmpty:k}=$();let p="Products",u="Discover our products",_=!1;try{const{data:t}=([r,m]=L(()=>j("getShopPage")),r=await r,m(),r),o=(y=t.value)==null?void 0:y.page;o?o.seo?(p=o.seo.title||o.title||"Products",u=o.seo.metaDesc||o.content||"Discover our products",s({title:p,meta:[{name:"description",content:u},{property:"og:title",content:o.seo.opengraphTitle||p},{property:"og:description",content:o.seo.opengraphDescription||u},{name:"robots",content:o.seo.metaRobotsNoindex?"noindex":"index"},{name:"robots",content:o.seo.metaRobotsNofollow?"nofollow":"follow"}],link:[{rel:"canonical",href:o.seo.canonical||"/products"}]}),(f=o.seo.schema)!=null&&f.raw&&s({script:[{type:"application/ld+json",innerHTML:o.seo.schema.raw}]}),_=!0):console.error("Страницата няма SEO данни от Yoast"):console.error("Не е намерена страница products в WordPress"),_||(console.warn("Използваме резервни SEO данни за продуктовата страница"),s({title:"Products",meta:[{name:"description",content:"Discover our products"}]}))}catch(t){console.error("Грешка при зареждане на SEO данни:",t),s({title:"Products",meta:[{name:"description",content:"Discover our products"}]})}const q={search:e.query.search,categoryIn:e.query.category?[e.query.category]:void 0,priceMin:e.query.priceMin?parseFloat(e.query.priceMin):void 0,priceMax:e.query.priceMax?parseFloat(e.query.priceMax):void 0,onSale:e.query.sale==="true"?!0:void 0,orderby:e.query.orderby||"DATE"};return Q(async()=>{const t=D();await P(t,q),k.value||a()}),g(()=>e.query,()=>{e.name!=="products"&&e.name!=="product-page-pager"||a()}),g(()=>e.params,()=>{e.name!=="products"&&e.name!=="product-page-pager"||a()}),(t,o)=>{var h;const F=E,N=S,B=O,C=V,b=T,K=M;return(h=n(v))!=null&&h.length,c(),I("div",J,[n(i).showFilters?(c(),d(F,{key:0})):l("",!0),w("div",W,[w("div",Y,[x(N),n(i).showOrderByDropdown?(c(),d(B,{key:0,class:"hidden md:inline-flex"})):l("",!0),n(i).showFilters?(c(),d(C,{key:1,class:"md:hidden"})):l("",!0)]),x(b)])])}}});export{ie as default};
