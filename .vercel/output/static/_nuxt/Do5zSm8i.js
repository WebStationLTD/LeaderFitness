import{_ as q}from"./CAKx8BxW.js";import{d as F,u as W,n as z,A as v,B as V,I as X,c as C,o as k,e as _,Q as Y,b as x,_ as D,a as n,R as G,T as H,v as U,a1 as A,a2 as K,a3 as T,i as I,S as B,V as J,a4 as Z,a5 as ee,m as te,h as ne,w as j,f as oe,g as se,t as N}from"./C9ZPaObW.js";import{_ as ae}from"./BbjAHyGP.js";import{t as O,w as le,a as re,i as ie,b as ce}from"./BPEocSHO.js";const ue={class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},de=["disabled"],me=["max"],pe=["disabled"],ve=F({__name:"QuantityInput",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:u,isUpdatingCart:d,cart:g}=W(),{debounce:p}=z(),t=v(()=>{var h,c;return e.item.variation?(h=e.item.variation)==null?void 0:h.node:(c=e.item.product)==null?void 0:c.node}),s=V(e.item.quantity),o=v(()=>t.value.stockQuantity?t.value.stockQuantity<=s.value:!1),a=()=>s.value++,l=()=>s.value--;X(s,p(()=>{s.value!==""&&u(e.item.key,s.value)},250));const m=()=>{var h,c,f;if(s.value===""){const i=(f=(c=(h=g.value)==null?void 0:h.contents)==null?void 0:c.nodes)==null?void 0:f.find(y=>y.key===e.item.key);i&&(s.value=i.quantity)}};return(h,c)=>{const f=D;return k(),C("div",ue,[_("button",{title:"Decrease Quantity","aria-label":"Decrease Quantity",onClick:l,type:"button",class:"focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed",disabled:n(d)||n(s)<=0},[x(f,{name:"ion:remove",size:"14"})],8,de),Y(_("input",{"onUpdate:modelValue":c[0]||(c[0]=i=>H(s)?s.value=i:null),type:"number",min:"0",max:n(t).stockQuantity,"aria-label":"Quantity",onFocusout:m,class:"flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300"},null,40,me),[[G,n(s),void 0,{number:!0}]]),_("button",{title:"Increase Quantity","aria-label":"Increase Quantity",onClick:a,type:"button",class:"focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100",disabled:n(d)||n(o)},[x(f,{name:"ion:add",size:"14"})],8,pe)])}}}),he=Object.assign(U(ve,[["__scopeId","data-v-7c0d03fb"]]),{__name:"QuantityInput"}),fe={},_e={xmlns:"http://www.w3.org/2000/svg",width:"22",height:"22",viewBox:"0 0 512 512"};function ge(e,u){return k(),C("svg",_e,u[0]||(u[0]=[_("path",{d:"M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),_("path",{stroke:"currentColor","stroke-linecap":"round","stroke-miterlimit":"10","stroke-width":"32",d:"M80 112h352"},null,-1),_("path",{d:"M192 112V72h0a23.93 23.93 0 0124-24h80a23.93 23.93 0 0124 24h0v40M256 176v224M184 176l8 224M328 176l-8 224",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1)]))}const ye=Object.assign(U(fe,[["render",ge]]),{__name:"TrashIcon"}),xe=ce?window:void 0;function be(e){var u;const d=T(e);return(u=d==null?void 0:d.$el)!=null?u:d}function R(...e){const u=[],d=()=>{u.forEach(o=>o()),u.length=0},g=(o,a,l,m)=>(o.addEventListener(a,l,m),()=>o.removeEventListener(a,l,m)),p=v(()=>{const o=O(T(e[0])).filter(a=>a!=null);return o.every(a=>typeof a!="string")?o:void 0}),t=le(()=>{var o,a;return[(a=(o=p.value)==null?void 0:o.map(l=>be(l)))!=null?a:[xe].filter(l=>l!=null),O(T(p.value?e[1]:e[0])),O(n(p.value?e[2]:e[1])),T(p.value?e[3]:e[2])]},([o,a,l,m])=>{if(d(),!(o!=null&&o.length)||!(a!=null&&a.length)||!(l!=null&&l.length))return;const h=ie(m)?{...m}:m;u.push(...o.flatMap(c=>a.flatMap(f=>l.map(i=>g(c,f,i,h)))))},{flush:"post"}),s=()=>{t(),d()};return re(d),s}function ke(e,u={}){const{threshold:d=50,onSwipe:g,onSwipeEnd:p,onSwipeStart:t,passive:s=!0}=u,o=A({x:0,y:0}),a=A({x:0,y:0}),l=v(()=>o.x-a.x),m=v(()=>o.y-a.y),{max:h,abs:c}=Math,f=v(()=>h(c(l.value),c(m.value))>=d),i=K(!1),y=v(()=>f.value?c(l.value)>c(m.value)?l.value>0?"left":"right":m.value>0?"up":"down":"none"),w=r=>[r.touches[0].clientX,r.touches[0].clientY],Q=(r,b)=>{o.x=r,o.y=b},M=(r,b)=>{a.x=r,a.y=b},S={passive:s,capture:!s},$=r=>{i.value&&(p==null||p(r,y.value)),i.value=!1},P=[R(e,"touchstart",r=>{if(r.touches.length!==1)return;const[b,E]=w(r);Q(b,E),M(b,E),t==null||t(r)},S),R(e,"touchmove",r=>{if(r.touches.length!==1)return;const[b,E]=w(r);M(b,E),S.capture&&!S.passive&&Math.abs(l.value)>Math.abs(m.value)&&r.preventDefault(),!i.value&&f.value&&(i.value=!0),i.value&&(g==null||g(r))},S),R(e,["touchend","touchcancel"],$,S)];return{isSwiping:i,direction:y,coordsStart:o,coordsEnd:a,lengthX:l,lengthY:m,stop:()=>P.forEach(r=>r()),isPassiveEventSupported:!0}}const we={key:0,class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},Se={__name:"SwipeCard",emits:["remove"],setup(e,{emit:u}){const d=u,g=V(!0),p=V(null),{isSwiping:t,lengthX:s}=ke(p,{passive:!0,onSwipeEnd(){s.value>80&&(g.value=!1,d("remove"))}});return(o,a)=>{const l=ye;return n(g)?(k(),C("div",we,[x(l,{class:B(["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":n(s)>40,"delete-ready":n(s)>80}])},null,8,["class"]),_("div",{class:B(["rounded-lg inset-0 absolute",{"transition-all":!n(t)}]),ref_key:"el",ref:p,style:Z({transform:n(t)?`translateX(-${n(s)}px)`:"none"})},[J(o.$slots,"default")],6)])):I("",!0)}}},Ce={key:0,class:"flex items-center gap-3 group"},Ie={class:"flex-1 min-w-0"},Qe={class:"flex flex-wrap gap-x-2 gap-y-1 items-center"},Me={key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"},Ee={key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"},Te={class:"inline-flex gap-2 flex-col items-end shrink-0"},$e={class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},Re={__name:"CartCard",props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:u}=W(),{addToWishlist:d}=ee(),{FALLBACK_IMG:g}=z(),{storeSettings:p}=te(),t=v(()=>{var i,y;return e.item.variation?(i=e.item.variation)==null?void 0:i.node:(y=e.item.product)==null?void 0:y.node}),s=v(()=>`/produkt/${decodeURIComponent(e.item.product.node.slug)}`),o=v(()=>t.value.stockQuantity?t.value.lowStockAmount>=t.value.stockQuantity:!1),a=v(()=>{var i,y,w;return((i=t.value.image)==null?void 0:i.cartSourceUrl)||((y=t.value.image)==null?void 0:y.sourceUrl)||((w=e.item.product.image)==null?void 0:w.sourceUrl)||g}),l=v(()=>parseFloat(t.value.rawRegularPrice)),m=v(()=>parseFloat(t.value.rawSalePrice)),h=v(()=>Math.round((l.value-m.value)/l.value*100)+"%"),c=()=>{u(e.item.key,0)},f=()=>{d(e.item.product.node),c()};return(i,y)=>{const w=q,Q=oe,M=ae,S=he,$=D,P=Se;return k(),ne(P,{onRemove:c},{default:j(()=>[n(t)?(k(),C("div",Ce,[x(Q,{to:n(s)},{default:j(()=>{var L,r;return[x(w,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:n(a),alt:((L=n(t).image)==null?void 0:L.altText)||n(t).name,title:((r=n(t).image)==null?void 0:r.title)||n(t).name,loading:"lazy"},null,8,["src","alt","title"])]}),_:1},8,["to"]),_("div",Ie,[_("div",Qe,[x(Q,{class:"leading-tight truncate max-w-full block",to:n(s)},{default:j(()=>[se(N(n(t).name),1)]),_:1},8,["to"]),n(t).salePrice?(k(),C("span",Me," Save "+N(n(h)),1)):I("",!0),n(o)?(k(),C("span",Ee," Low Stock ")):I("",!0)]),x(M,{class:"mt-1 text-xs","sale-price":n(t).salePrice,"regular-price":n(t).regularPrice},null,8,["sale-price","regular-price"])]),_("div",Te,[x(S,{item:e.item},null,8,["item"]),_("div",$e,[n(p).showMoveToWishlist?(k(),C("button",{key:0,class:"mr-2 pr-2 border-r",onClick:f,type:"button"},"Move to Wishlist")):I("",!0),_("button",{title:"Remove Item","aria-label":"Remove Item",onClick:c,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[x($,{name:"ion:trash",class:"md:inline-block",size:"12"})])])])])):I("",!0)]),_:1})}}};export{ye as _,Re as a};
