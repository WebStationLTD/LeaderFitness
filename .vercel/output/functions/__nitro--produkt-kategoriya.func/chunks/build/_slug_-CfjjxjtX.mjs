import{_ as e,a as t,b as r,c as o,d as s,e as a}from"./ProductGrid-Bl8WhHln.mjs";import{defineComponent as i,ref as l,computed as n,withAsyncContext as d,watch as u,mergeProps as p,unref as c,withCtx as m,createVNode as g,createBlock as v,toDisplayString as y,openBlock as x,createTextVNode as f,useSSRContext as h}from"vue";import{ssrRenderAttrs as b,ssrRenderComponent as k,ssrInterpolate as P}from"vue/server-renderer";import{z as $,e as q,d as w,w as S,l as j}from"./server.mjs";import"./default-C7s0JCB3.mjs";import"graphql-request";import"./ProductCard-SaerHacm.mjs";import"./NuxtImg-BJG_EbHe.mjs";import"./ProductPrice-BLA-t2Nu.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const _=i({__name:"[slug]",__ssrInlineRender:!0,async setup(i){let h,_;const{loadProductsForPage:N,updateProductList:A,products:C,getCurrentPageFromRoute:F,isLoading:I}=$();q();const{storeSettings:L}=w(),M=S();let R="";if(M.params&&"categorySlug"in M.params&&M.params.categorySlug&&(R="string"==typeof M.params.categorySlug?M.params.categorySlug:String(M.params.categorySlug)),!R&&M.params&&"slug"in M.params&&M.params.slug&&(R="string"==typeof M.params.slug?M.params.slug:String(M.params.slug)),!R&&M.path){const e=M.path.split("/"),t=e.findIndex((e=>"produkt-kategoriya"===e));if(-1!==t&&e[t+1]&&"page"!==e[t+1]){const r=e[t+1];r&&(R=r)}}let B=R;try{R&&(B=decodeURIComponent(R))}catch(e){console.error("Грешка при декодиране на URL:",e)}const D=l(R);l(null);const U=l(B||"All Products"),E=l(`Products in category ${B||"All Products"}`);j({title:U.value,meta:[{name:"description",content:E.value}]});const H=n((()=>({categoryIn:D.value?[D.value]:void 0,search:M.query.search,priceMin:M.query.priceMin?parseFloat(M.query.priceMin):void 0,priceMax:M.query.priceMax?parseFloat(M.query.priceMax):void 0,onSale:"true"===M.query.sale||void 0,orderby:M.query.orderby||"DATE",order:M.query.order||"DESC",rating:M.query.rating?[parseInt(M.query.rating,10)]:void 0}))),G=F();return[h,_]=d((()=>N(G,H.value))),await h,_(),u((()=>M.query),(()=>{"produkt-kategoriya-slug"!==M.name&&"produkt-kategoriya-page-pager"!==M.name||A()})),u((()=>M.params),(()=>{"produkt-kategoriya-slug"!==M.name&&"produkt-kategoriya-page-pager"!==M.name||A()})),(i,l,n,d)=>{const u=e,h=t,$=r,q=o,w=s,S=a;l(`<div${b(p({class:"container px-2"},d))}>`),!c(I)&&c(C)&&c(C).length?(l('<div class="flex items-start gap-16">'),c(L).showFilters?l(k(u,{"hide-categories":!0},null,n)):l("\x3c!----\x3e"),l('<div class="w-full"><div class="flex items-center justify-between w-full gap-4 mt-8 md:gap-8">'),l(k(h,null,null,n)),c(L).showOrderByDropdown?l(k($,{class:"hidden md:inline-flex"},null,n)):l("\x3c!----\x3e"),c(L).showFilters?l(k(q,{class:"md:hidden"},null,n)):l("\x3c!----\x3e"),l("</div>"),l(k(w,null,null,n)),l("</div></div>")):c(I)?l('<div class="py-16 text-center"><div class="inline-block p-4 text-gray-500"><div class="h-8 w-8 border-t-2 border-primary border-solid rounded-full mx-auto animate-spin mb-4"></div><p>Зареждане на продукти...</p></div></div>'):l(k(S,null,{default:m(((e,t,r,o)=>{if(!t)return[g("div",{class:"text-center"},[g("h2",{class:"text-xl font-bold mb-4"},y(D.value?"No products found in this category.":"All Products"),1),D.value?(x(),v("div",{key:0,class:"mt-4 text-sm text-gray-600 border p-4 rounded text-left inline-block"},[g("p",null,[g("strong",null,"URL slug:"),f(" "+y(D.value||"Not provided"),1)]),g("p",null,[g("strong",null,"Decoded slug:"),f(" "+y(c(B)||"Not decoded"),1)])])):(x(),v("div",{key:1,class:"mt-4 text-sm text-gray-600"},[g("p",null,"Please select a category from the menu.")]))])];t(`<div class="text-center"${o}><h2 class="text-xl font-bold mb-4"${o}>${P(D.value?"No products found in this category.":"All Products")}</h2>`),D.value?t(`<div class="mt-4 text-sm text-gray-600 border p-4 rounded text-left inline-block"${o}><p${o}><strong${o}>URL slug:</strong> ${P(D.value||"Not provided")}</p><p${o}><strong${o}>Decoded slug:</strong> ${P(c(B)||"Not decoded")}</p></div>`):t(`<div class="mt-4 text-sm text-gray-600"${o}><p${o}>Please select a category from the menu.</p></div>`),t("</div>")})),_:1},n)),l("</div>")}}}),N=_.setup;_.setup=(e,t)=>{const r=h();return(r.modules||(r.modules=new Set)).add("woonuxt_base/app/pages/produkt-kategoriya/[slug].vue"),N?N(e,t):void 0};export{_ as default};
//# sourceMappingURL=_slug_-CfjjxjtX.mjs.map
