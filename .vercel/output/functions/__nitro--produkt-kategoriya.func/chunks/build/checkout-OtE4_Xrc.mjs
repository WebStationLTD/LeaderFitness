import{v as e,w as t,r as l,u as a,f as s,j as o,k as i,_ as n,h as r,c as d,b as u,q as c,G as p,e as m,s as v,t as g,d as b}from"./server.mjs";import{_ as f,a as h}from"./CountrySelect-pRrLpTQ_.mjs";import{defineComponent as x,ref as y,computed as $,withAsyncContext as w,mergeProps as _,unref as k,withCtx as S,createTextVNode as C,toDisplayString as I,createVNode as j,createBlock as P,createCommentVNode as A,openBlock as M,toRef as O,watch as D,useSSRContext as T}from"vue";import{ssrRenderAttrs as E,ssrRenderComponent as q,ssrInterpolate as R,ssrRenderAttr as N,ssrRenderClass as z,ssrIncludeBooleanAttr as U,ssrLooseContain as V,ssrRenderList as Q,ssrRenderSlot as B,ssrRenderStyle as L}from"vue/server-renderer";import{_ as W}from"./TrashIcon-IaEbaiut.mjs";import{useSwipe as G}from"@vueuse/core";import{_ as Y}from"./NuxtImg-BJG_EbHe.mjs";import{_ as F}from"./ProductPrice-BLA-t2Nu.mjs";import{loadStripe as J}from"@stripe/stripe-js";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"graphql-request";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";function useCheckout(){const e=c("orderInput",(()=>({customerNote:"",paymentMethod:"",shipToDifferentAddress:!1,metaData:[{key:"order_via",value:"WooNuxt"}]}))),t=c("isProcessingOrder",(()=>!1));async function openPayPalWindow(e){return new Promise((t=>{const l=(void 0).innerWidth/2-375,a=(void 0).innerHeight/2-375+80;(void 0).open(e,"",`width=750,height=750,top=${a},left=${l}`),console.error("[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `false`.")}))}return{orderInput:e,isProcessingOrder:t,processCheckout:async(o=!1)=>{var i,n,r,d,u,c,p,g;const{customer:b,loginUser:f}=s(),h=l(),{replaceQueryParam:x}=m(),{cart:y,emptyCart:$,refreshCart:w}=a();t.value=!0;const{username:_,password:k,shipToDifferentAddress:S}=e.value,C=null==(i=b.value)?void 0:i.billing,I=S?null==(n=b.value)?void 0:n.shipping:C,j=null==(r=y.value)?void 0:r.chosenShippingMethods;try{let t={billing:C,shipping:I,shippingMethod:j,metaData:e.value.metaData,paymentMethod:e.value.paymentMethod.id,customerNote:e.value.customerNote,shipToDifferentAddress:S,transactionId:e.value.transactionId,isPaid:o};e.value.createAccount?t.account={username:_,password:k}:t.account=null;const{checkout:l}=await v(t);e.value.createAccount&&await f({username:_,password:k});const a=null==(d=null==l?void 0:l.order)?void 0:d.databaseId,s=null==(u=null==l?void 0:l.order)?void 0:u.orderKey,i=e.value.paymentMethod.id,n="paypal"===i||"ppcp-gateway"===i;if(null==l?void 0:l.order)try{localStorage.setItem("lastOrder",JSON.stringify({id:a,key:s,total:l.order.total,status:l.order.status,date:l.order.date,paymentMethod:l.order.paymentMethod,paymentMethodTitle:l.order.paymentMethodTitle}))}catch(e){console.error("Не може да се запише поръчката в localStorage",e)}if(await(null==l?void 0:l.redirect)&&n){const e=(void 0).location.origin;let t=(null==l?void 0:l.redirect)??"";const o=`${e}/checkout/order-received/${a}/?key=${s}&from_paypal=true`,i=`${e}/checkout/?cancel_order=true&from_paypal=true`;t=x("return",o,t),t=x("cancel_return",i,t),t=x("bn","WooNuxt_Cart",t);await openPayPalWindow(t)&&((null==(c=b.value)?void 0:c.email)&&"guest"!==b.value.email?h.push(`/checkout/order-received/${a}/?key=${s}&fetch_delay=true`):h.push("/thank-you"))}else(null==(p=b.value)?void 0:p.email)&&"guest"!==b.value.email?h.push(`/checkout/order-received/${a}/?key=${s}`):h.push("/thank-you");if("success"!==await(null==l?void 0:l.result))return alert("There was an error processing your order. Please try again."),(void 0).location.reload(),l;await $(),await w()}catch(e){const t=null==(g=null==e?void 0:e.gqlErrors)?void 0:g[0].message;return(null==t?void 0:t.includes("An account is already registered with your email address"))?(alert("An account is already registered with your email address"),null):(alert(t),null)}finally{t.value=!1}},updateShippingLocation:async function(){var t;const{customer:l,viewer:o}=s(),{isUpdatingCart:i,refreshCart:n}=a();i.value=!0;try{if(!(null==(t=null==o?void 0:o.value)?void 0:t.id))throw new Error("Viewer ID is missing.");const{updateCustomer:a}=await p({input:{id:o.value.id,shipping:e.value.shipToDifferentAddress?l.value.shipping:l.value.billing,billing:l.value.billing}});a&&await n()}catch(e){console.error("Error updating shipping location:",e)}finally{i.value=!1}}}}const H=x({__name:"BillingDetails",__ssrInlineRender:!0,props:{modelValue:{type:Object,required:!0}},setup(e){const{updateShippingLocation:t}=useCheckout(),{isBillingAddressEnabled:l}=a(),s=O(e,"modelValue");return(e,a,o,i)=>{const n=f,r=h;a(`<div${E(_({class:"grid w-full gap-4 lg:grid-cols-2"},i))}><div class="w-full"><label for="first-name">${R(e.$t("messages.billing.firstName"))}</label><input id="first-name"${N("value",k(s).firstName)} placeholder="John" autocomplete="given-name" type="text" required></div><div class="w-full"><label for="last-name">${R(e.$t("messages.billing.lastName"))}</label><input id="last-name"${N("value",k(s).lastName)} placeholder="Doe" autocomplete="family-name" type="text" required></div>`),k(l)?a(`<div class="w-full col-span-full"><label for="address1">${R(e.$t("messages.billing.address1"))}</label><input id="address1"${N("value",k(s).address1)} placeholder="O&#39;Connell Street 47" autocomplete="street-address" type="text" required></div>`):a("\x3c!----\x3e"),k(l)?a(`<div class="w-full col-span-full"><label for="address2">${R(e.$t("messages.billing.address2"))} (${R(e.$t("messages.general.optional"))})</label><input id="address2"${N("value",k(s).address2)} placeholder="Apartment, studio, or floor" autocomplete="address-line2" type="text"></div>`):a("\x3c!----\x3e"),k(l)?a(`<div class="w-full"><label for="city">${R(e.$t("messages.billing.city"))}</label><input id="city"${N("value",k(s).city)} placeholder="New York" autocomplete="locality" type="text" required></div>`):a("\x3c!----\x3e"),k(l)?(a(`<div class="w-full"><label for="state">${R(e.$t("messages.billing.state"))} (${R(e.$t("messages.general.optional"))})</label>`),a(q(n,{id:"state",modelValue:k(s).state,"onUpdate:modelValue":e=>k(s).state=e,"default-value":k(s).state,"country-code":k(s).country,onChange:k(t),autocomplete:"address-level1"},null,o)),a("</div>")):a("\x3c!----\x3e"),k(l)?(a(`<div class="w-full"><label for="country">${R(e.$t("messages.billing.country"))}</label>`),a(q(r,{id:"country",modelValue:k(s).country,"onUpdate:modelValue":e=>k(s).country=e,"default-value":k(s).country,onChange:k(t),autocomplete:"country"},null,o)),a("</div>")):a("\x3c!----\x3e"),k(l)?a(`<div class="w-full"><label for="zip">${R(e.$t("messages.billing.zip"))}</label><input id="zip"${N("value",k(s).postcode)} placeholder="10001" autocomplete="postal-code" type="text" required></div>`):a("\x3c!----\x3e"),k(l)?a(`<div class="w-full col-span-full"><label for="phone">${R(e.$t("messages.billing.phone"))} (${R(e.$t("messages.general.optional"))})</label><input id="phone"${N("value",k(s).phone)} placeholder="+1 234 567 8901" autocomplete="tel" type="tel"></div>`):a("\x3c!----\x3e"),a("</div>")}}}),K=H.setup;H.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/forms/BillingDetails.vue"),K?K(e,t):void 0};const X=Object.assign(H,{__name:"BillingDetails"}),Z=x({__name:"ShippingDetails",__ssrInlineRender:!0,props:{modelValue:{type:Object,required:!0}},setup(e){const{updateShippingLocation:t}=useCheckout(),l=O(e,"modelValue");return(e,a,s,o)=>{const i=f,n=h;a(`<div${E(_({class:"grid w-full gap-4 lg:grid-cols-2"},o))}><div class="w-full"><label for="first-name">${R(e.$t("messages.billing.firstName"))}</label><input id="first-name"${N("value",k(l).firstName)} placeholder="John" autocomplete="given-name" type="text" required></div><div class="w-full"><label for="last-name">${R(e.$t("messages.billing.lastName"))}</label><input id="last-name"${N("value",k(l).lastName)} placeholder="Doe" autocomplete="family-name" type="text" required></div><div class="w-full col-span-full"><label for="address1">${R(e.$t("messages.billing.address1"))}</label><input id="address1"${N("value",k(l).address1)} placeholder="O&#39;Connell Street 47" autocomplete="street-address" type="text" required></div><div class="w-full col-span-full"><label for="address2">${R(e.$t("messages.billing.address2"))} (${R(e.$t("messages.general.optional"))})</label><input id="address2"${N("value",k(l).address2)} placeholder="Apartment, studio, or floor" autocomplete="address-line2" type="text"></div><div class="w-full"><label for="city">${R(e.$t("messages.billing.city"))}</label><input id="city"${N("value",k(l).city)} placeholder="New York" autocomplete="locality" type="text" required></div><div class="w-full"><label for="state">${R(e.$t("messages.billing.state"))} (${R(e.$t("messages.general.optional"))})</label>`),a(q(i,{id:"state",modelValue:k(l).state,"onUpdate:modelValue":e=>k(l).state=e,"default-value":k(l).state,"country-code":k(l).country,onChange:k(t)},null,s)),a(`</div><div class="w-full"><label for="country">${R(e.$t("messages.billing.country"))}</label>`),a(q(n,{id:"country",modelValue:k(l).country,"onUpdate:modelValue":e=>k(l).country=e,"default-value":k(l).country,onChange:k(t)},null,s)),a(`</div><div class="w-full"><label for="zip">${R(e.$t("messages.billing.zip"))}</label><input id="zip"${N("value",k(l).postcode)} placeholder="10001" autocomplete="postal-code" type="text" required></div><div class="w-full col-span-full"><label for="phone">${R(e.$t("messages.billing.phone"))} (${R(e.$t("messages.general.optional"))})</label><input id="phone"${N("value",k(l).phone)} placeholder="+1 234 567 8901" autocomplete="tel" type="tel"></div></div>`)}}}),ee=Z.setup;Z.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/forms/ShippingDetails.vue"),ee?ee(e,t):void 0};const te=Object.assign(Z,{__name:"ShippingDetails"}),le={__name:"ShippingOptions",__ssrInlineRender:!0,props:{options:{type:Array,required:!0},activeOption:{type:String,required:!0}},setup(e){var t;a();const l=o(),s=(null==(t=null==l?void 0:l.public)?void 0:t.CURRENCY_SYMBOL)||"$";return(t,l,a,o)=>{const i=n;l(`<div${E(_({class:"grid gap-4 shipping-options"},o))} data-v-f391d757>\x3c!--[--\x3e`),Q(e.options,(t=>{l(`<div class="${z([{"active-option":t.id===e.activeOption},"flex items-center justify-between option"])}" data-v-f391d757><div data-v-f391d757><div class="text-sm leading-tight text-gray-500" data-v-f391d757>${t.label??""}</div><div class="font-semibold text-gray-600" data-v-f391d757>${R(k(s))}${R(t.cost)}</div></div>`),l(q(i,{name:"ion:checkmark-circle",size:"20",class:"ml-auto text-primary checkmark opacity-0"},null,a)),l("</div>")})),l("\x3c!--]--\x3e</div>")}}},ae=le.setup;le.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/ShippingOptions.vue"),ae?ae(e,t):void 0};const se=d(le,[["__scopeId","data-v-f391d757"]]),oe=x({__name:"PaymentOptions",__ssrInlineRender:!0,props:{modelValue:{},paymentGateways:{}},emits:["update:modelValue"],setup(e,{emit:t}){const l=O(e,"modelValue"),a=$((()=>l.value));return(e,t,l,s)=>{var o;const i=n;t(`<div${E(_({class:"flex gap-4 leading-tight flex-wrap"},s))} data-v-baca1106>\x3c!--[--\x3e`),Q(null==(o=e.paymentGateways)?void 0:o.nodes,(e=>{t(`<div class="${z([{"active-option":e.id===k(a).id},"option"])}"${N("title",(null==e?void 0:e.description)||(null==e?void 0:e.title)||"Payment Method")} data-v-baca1106>`),"stripe"===e.id?t(q(i,{name:"ion:card-outline",size:"20"},null,l)):"paypal"===e.id?t(q(i,{name:"ion:logo-paypal",size:"20"},null,l)):t(q(i,{name:"ion:cash-outline",size:"20"},null,l)),t(`<span class="whitespace-nowrap" data-v-baca1106>${e.title??""}</span>`),t(q(i,{name:"ion:checkmark-circle",size:"20",class:"ml-auto text-primary checkmark opacity-0"},null,l)),t("</div>")})),t("\x3c!--]--\x3e"),k(a).description?t(`<div class="prose block w-full" data-v-baca1106><p class="text-sm text-gray-500" data-v-baca1106>${k(a).description??""}</p></div>`):t("\x3c!----\x3e"),t("</div>")}}}),ie=oe.setup;oe.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/PaymentOptions.vue"),ie?ie(e,t):void 0};const ne=Object.assign(d(oe,[["__scopeId","data-v-baca1106"]]),{__name:"PaymentOptions"}),re=x({__name:"StripeElement",__ssrInlineRender:!0,props:["stripe"],emits:["updateElement"],setup(e,{emit:t}){const{cart:l}=a();return $((()=>l.value&&100*parseFloat(l.value.rawTotal))).value,(e,t,l,a)=>{t(`<div${E(_({id:"card-element"},a))}></div>`)}}}),de=re.setup;re.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/StripeElement.vue"),de?de(e,t):void 0};const ue=Object.assign(re,{__name:"StripeElement"}),ce={__name:"SwipeCard",__ssrInlineRender:!0,emits:["remove"],setup(e,{emit:t}){const l=t,a=y(!0),s=y(null),{isSwiping:o,lengthX:i}=G(s,{passive:!0,onSwipeEnd(){i.value>80&&(a.value=!1,l("remove"))}});return(e,t,l,s)=>{const n=W;k(a)?(t(`<div${E(_({class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},s))}>`),t(q(n,{class:["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":k(i)>40,"delete-ready":k(i)>80}]},null,l)),t(`<div class="${z([{"transition-all":!k(o)},"rounded-lg inset-0 absolute"])}" style="${L({transform:k(o)?`translateX(-${k(i)}px)`:"none"})}">`),B(e.$slots,"default",{},null,t,l),t("</div></div>")):t("\x3c!----\x3e")}}},pe=ce.setup;ce.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/cartElements/SwipeCard.vue"),pe?pe(e,t):void 0};const me=x({__name:"QuantityInput",__ssrInlineRender:!0,props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:t,isUpdatingCart:l}=a(),{debounce:s}=m(),o=$((()=>{var t,l;return e.item.variation?null==(t=e.item.variation)?void 0:t.node:null==(l=e.item.product)?void 0:l.node})),i=y(e.item.quantity),r=$((()=>!!o.value.stockQuantity&&o.value.stockQuantity<=i.value));return D(i,s((()=>{""!==i.value&&t(e.item.key,i.value)}),250)),(e,t,a,s)=>{const d=n;t(`<div${E(_({class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},s))} data-v-7c0d03fb><button title="Decrease Quantity" aria-label="Decrease Quantity" type="button" class="focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed"${U(k(l)||k(i)<=0)?" disabled":""} data-v-7c0d03fb>`),t(q(d,{name:"ion:remove",size:"14"},null,a)),t(`</button><input${N("value",k(i))} type="number" min="0"${N("max",k(o).stockQuantity)} aria-label="Quantity" class="flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300" data-v-7c0d03fb><button title="Increase Quantity" aria-label="Increase Quantity" type="button" class="focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100"${U(k(l)||k(r))?" disabled":""} data-v-7c0d03fb>`),t(q(d,{name:"ion:add",size:"14"},null,a)),t("</button></div>")}}}),ve=me.setup;me.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/cartElements/QuantityInput.vue"),ve?ve(e,t):void 0};const ge=Object.assign(d(me,[["__scopeId","data-v-7c0d03fb"]]),{__name:"QuantityInput"}),be={__name:"CartCard",__ssrInlineRender:!0,props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:t}=a(),{addToWishlist:l}=g(),{FALLBACK_IMG:s}=m(),{storeSettings:o}=b(),i=$((()=>{var t,l;return e.item.variation?null==(t=e.item.variation)?void 0:t.node:null==(l=e.item.product)?void 0:l.node})),d=$((()=>`/produkt/${decodeURIComponent(e.item.product.node.slug)}`)),u=$((()=>!!i.value.stockQuantity&&i.value.lowStockAmount>=i.value.stockQuantity)),c=$((()=>{var t,l,a;return(null==(t=i.value.image)?void 0:t.cartSourceUrl)||(null==(l=i.value.image)?void 0:l.sourceUrl)||(null==(a=e.item.product.image)?void 0:a.sourceUrl)||s})),p=$((()=>parseFloat(i.value.rawRegularPrice))),v=$((()=>parseFloat(i.value.rawSalePrice))),f=$((()=>Math.round((p.value-v.value)/p.value*100)+"%")),removeItem=()=>{t(e.item.key,0)},moveToWishList=()=>{l(e.item.product.node),removeItem()};return(t,l,a,s)=>{const p=r,m=Y,v=F,g=ge,b=n;l(q(ce,_({onRemove:removeItem},s),{default:S(((t,l,a,s)=>{if(!l)return[k(i)?(M(),P("div",{key:0,class:"flex items-center gap-3 group"},[j(p,{to:k(d)},{default:S((()=>{var e,t;return[j(m,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:k(c),alt:(null==(e=k(i).image)?void 0:e.altText)||k(i).name,title:(null==(t=k(i).image)?void 0:t.title)||k(i).name,loading:"lazy"},null,8,["src","alt","title"])]})),_:1},8,["to"]),j("div",{class:"flex-1 min-w-0"},[j("div",{class:"flex flex-wrap gap-x-2 gap-y-1 items-center"},[j(p,{class:"leading-tight truncate max-w-full block",to:k(d)},{default:S((()=>[C(I(k(i).name),1)])),_:1},8,["to"]),k(i).salePrice?(M(),P("span",{key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"}," Save "+I(k(f)),1)):A("",!0),k(u)?(M(),P("span",{key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"}," Low Stock ")):A("",!0)]),j(v,{class:"mt-1 text-xs","sale-price":k(i).salePrice,"regular-price":k(i).regularPrice},null,8,["sale-price","regular-price"])]),j("div",{class:"inline-flex gap-2 flex-col items-end shrink-0"},[j(g,{item:e.item},null,8,["item"]),j("div",{class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},[k(o).showMoveToWishlist?(M(),P("button",{key:0,class:"mr-2 pr-2 border-r",onClick:moveToWishList,type:"button"},"Move to Wishlist")):A("",!0),j("button",{title:"Remove Item","aria-label":"Remove Item",onClick:removeItem,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[j(b,{name:"ion:trash",class:"md:inline-block",size:"12"})])])])])):A("",!0)];k(i)?(l(`<div class="flex items-center gap-3 group"${s}>`),l(q(p,{to:k(d)},{default:S(((e,t,l,a)=>{var s,o,n,r;if(!t)return[j(m,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:k(c),alt:(null==(n=k(i).image)?void 0:n.altText)||k(i).name,title:(null==(r=k(i).image)?void 0:r.title)||k(i).name,loading:"lazy"},null,8,["src","alt","title"])];t(q(m,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:k(c),alt:(null==(s=k(i).image)?void 0:s.altText)||k(i).name,title:(null==(o=k(i).image)?void 0:o.title)||k(i).name,loading:"lazy"},null,l,a))})),_:1},a,s)),l(`<div class="flex-1 min-w-0"${s}><div class="flex flex-wrap gap-x-2 gap-y-1 items-center"${s}>`),l(q(p,{class:"leading-tight truncate max-w-full block",to:k(d)},{default:S(((e,t,l,a)=>{if(!t)return[C(I(k(i).name),1)];t(`${R(k(i).name)}`)})),_:1},a,s)),k(i).salePrice?l(`<span class="text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"${s}> Save ${R(k(f))}</span>`):l("\x3c!----\x3e"),k(u)?l(`<span class="text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"${s}> Low Stock </span>`):l("\x3c!----\x3e"),l("</div>"),l(q(v,{class:"mt-1 text-xs","sale-price":k(i).salePrice,"regular-price":k(i).regularPrice},null,a,s)),l(`</div><div class="inline-flex gap-2 flex-col items-end shrink-0"${s}>`),l(q(g,{item:e.item},null,a,s)),l(`<div class="text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"${s}>`),k(o).showMoveToWishlist?l(`<button class="mr-2 pr-2 border-r" type="button"${s}>Move to Wishlist</button>`):l("\x3c!----\x3e"),l(`<button title="Remove Item" aria-label="Remove Item" type="button" class="flex items-center gap-1 hover:text-red-500 cursor-pointer"${s}>`),l(q(b,{name:"ion:trash",class:"md:inline-block",size:"12"},null,a,s)),l("</button></div></div></div>")):l("\x3c!----\x3e")})),_:1},a))}}},fe=be.setup;be.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/cartElements/CartCard.vue"),fe?fe(e,t):void 0};const he=x({__name:"AddCoupon",__ssrInlineRender:!0,setup(e){const{cart:t,isUpdatingCoupon:l,removeCoupon:s}=a(),o=y(""),i=y("");return(e,a,r,d)=>{const c=u,p=n;a(`<div${E(d)}><form class="flex gap-1"><input id="couponCode"${N("value",k(o))} type="text"${N("placeholder",e.$t("messages.shop.couponCode"))} class="w-full px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm outline-none" required><button class="flex items-center justify-center px-4 py-2 text-white bg-gray-800 border rounded-md shadow-sm outline-none min-w-20"${U(k(l))?" disabled":""}>`),k(l)?a(q(c,{color:"#fff",size:"16"},null,r)):a(`<span>${R(e.$t("messages.general.apply"))}</span>`),a("</button></form>"),k(i)?a(`<div class="mt-2 text-xs text-red-600">${k(i)??""}</div>`):a("\x3c!----\x3e"),k(t)&&k(t).appliedCoupons?(a('<div class="text-xs font-semibold uppercase flex flex-wrap gap-2">\x3c!--[--\x3e'),Q(k(t).appliedCoupons,((e,t)=>{a('<div class="flex flex-wrap mt-2 flex-2">'),(null==e?void 0:e.code)?(a(`<div class="bg-primary border-primary border rounded-md flex bg-opacity-5 border-opacity-10 text-primary leading-none p-1.5 gap-1 items-center"><span>${e.code??""}</span>`),a(q(p,{name:"ion:close",class:"rounded-full cursor-pointer hover:bg-primary hover:text-white",onClick:t=>k(s)(e.code)},null,r)),a("</div>")):a("\x3c!----\x3e"),a("</div>")})),a("\x3c!--]--\x3e</div>")):a("\x3c!----\x3e"),a("</div>")}}}),xe=he.setup;he.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/AddCoupon.vue"),xe?xe(e,t):void 0};const ye=Object.assign(he,{__name:"AddCoupon"}),$e={__name:"OrderSummary",__ssrInlineRender:!0,setup(e){const{cart:t,isUpdatingCart:l}=a();return(e,a,s,o)=>{const i=be,n=ye,r=u;k(t)?(a(`<aside${E(_({class:"bg-white rounded-lg shadow-lg mb-8 w-full min-h-[280px] p-4 sm:p-8 relative md:max-w-md md:top-32 md:sticky"},o))}><h2 class="mb-6 text-xl font-semibold leading-none">${R(e.$t("messages.shop.orderSummary"))}</h2><ul class="flex flex-col gap-4 overflow-y-auto">\x3c!--[--\x3e`),Q(k(t).contents.nodes,(e=>{a(q(i,{key:e.key,item:e},null,s))})),a("\x3c!--]--\x3e</ul>"),a(q(n,{class:"my-8"},null,s)),a(`<div class="grid gap-1 text-sm font-semibold text-gray-500"><div class="flex justify-between"><span>${R(e.$t("messages.shop.subtotal"))}</span><span class="text-gray-700 tabular-nums">${k(t).subtotal??""}</span></div><div class="flex justify-between"><span>${R(e.$t("messages.general.shipping"))}</span><span class="text-gray-700 tabular-nums">${R(parseFloat(k(t).shippingTotal)>0?"+":"")} ${R(k(t).shippingTotal)}</span></div>`),k(t)&&k(t).appliedCoupons?a(`<div class="flex justify-between"><span>${R(e.$t("messages.shop.discount"))}</span><span class="text-primary tabular-nums">- <span>${k(t).discountTotal??""}</span></span></div>`):a("\x3c!----\x3e"),a(`<div class="flex justify-between mt-4"><span>${R(e.$t("messages.shop.total"))}</span><span class="text-lg font-bold text-gray-700 tabular-nums">${k(t).total??""}</span></div></div>`),B(e.$slots,"default",{},null,a,s),k(l)?(a('<div class="absolute inset-0 flex items-center justify-center bg-white bg-opacity-50">'),a(q(r,null,null,s)),a("</div>")):a("\x3c!----\x3e"),a("</aside>")):a("\x3c!----\x3e")}}},we=$e.setup;$e.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/OrderSummary.vue"),we?we(e,t):void 0};const _e=x({__name:"checkout",__ssrInlineRender:!0,async setup(d){var c;let p,m;const{t:v}=e(),{query:g}=t();l();const{cart:b,isUpdatingCart:f,paymentGateways:h}=a(),{customer:x,viewer:O}=s(),{orderInput:D,isProcessingOrder:T}=useCheckout(),Q=(null==(c=o().public)?void 0:c.STRIPE_PUBLISHABLE_KEY)||null,B=y(T.value?v("messages.general.processing"):v("messages.shop.checkoutButton")),L=$((()=>T.value||f.value||!D.value.paymentMethod)),W=y(!1),G=Q?([p,m]=w((()=>J(Q))),p=await p,m(),p):null,Y=y();y(!1);const handleStripeElement=e=>{Y.value=e};return i({title:v("messages.shop.checkout")}),(e,t,l,a)=>{var s,o,i,d,c,p,m,v;const g=n,f=r,y=X,$=te,w=se,Q=ne,Y=ue,F=$e,J=u;t(`<div${E(_({class:"flex flex-col min-h-[600px]"},a))}>`),k(b)&&k(x)?(t("\x3c!--[--\x3e"),k(b).isEmpty?(t('<div class="flex flex-col items-center justify-center flex-1 mb-12">'),t(q(g,{name:"ion:cart-outline",size:"156",class:"opacity-25 mb-5"},null,l)),t(`<h2 class="text-2xl font-bold mb-2">${R(e.$t("messages.shop.cartEmpty"))}</h2><span class="text-gray-400 mb-4">${R(e.$t("messages.shop.addProductsInYourCart"))}</span>`),t(q(f,{to:"/products",class:"flex items-center justify-center gap-3 p-2 px-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-primary hover:bg-primary-dark"},{default:S(((t,l,a,s)=>{if(!l)return[C(I(e.$t("messages.shop.browseOurProducts")),1)];l(`${R(e.$t("messages.shop.browseOurProducts"))}`)})),_:1},l)),t("</div>")):(t('<form class="container flex flex-wrap items-start gap-8 my-16 justify-evenly lg:gap-20"><div class="grid w-full max-w-2xl gap-8 checkout-form md:flex-1">'),!k(O)&&(null==(s=k(x))?void 0:s.billing)?(t(`<div><h2 class="w-full mb-2 text-2xl font-semibold leading-none">Contact Information</h2><p class="mt-1 text-sm text-gray-500">${R(e.$t("messages.account.alreadyRegistered"))} `),t(q(f,{to:"/my-account",class:"text-primary font-semibold"},{default:S(((t,l,a,s)=>{if(!l)return[C(I(e.$t("messages.account.login")),1)];l(`${R(e.$t("messages.account.login"))}`)})),_:1},l)),t(`</p><div class="w-full mt-4"><label for="email">${R(e.$t("messages.billing.email"))}</label><input${N("value",k(x).billing.email)} placeholder="johndoe@email.com" autocomplete="email" type="email" name="email" class="${z({"has-error":k(W)})}" required>`),k(W)?t('<div class="mt-1 text-sm text-red-500">Invalid email address</div>'):t("\x3c!----\x3e"),t("</div></div>")):t("\x3c!----\x3e"),t(`<div><h2 class="w-full mb-3 text-2xl font-semibold">${R(e.$t("messages.billing.billingDetails"))}</h2>`),t(q(y,{"model-value":(null==(o=k(x))?void 0:o.billing)||{}},null,l)),t("</div>"),k(b).availableShippingMethods&&k(b).availableShippingMethods.length>0?t(`<label for="shipToDifferentAddress" class="flex items-center gap-2"><span>${R(e.$t("messages.billing.differentAddress"))}</span><input id="shipToDifferentAddress"${U(Array.isArray(k(D).shipToDifferentAddress)?V(k(D).shipToDifferentAddress,null):k(D).shipToDifferentAddress)?" checked":""} type="checkbox" name="shipToDifferentAddress"></label>`):t("\x3c!----\x3e"),k(D).shipToDifferentAddress?(t(`<div><h2 class="mb-4 text-xl font-semibold">${R(e.$t("messages.general.shippingDetails"))}</h2>`),t(q($,{"model-value":(null==(i=k(x))?void 0:i.shipping)||{}},null,l)),t("</div>")):t("\x3c!----\x3e"),k(b).availableShippingMethods&&k(b).availableShippingMethods.length?(t(`<div><h3 class="mb-4 text-xl font-semibold">${R(e.$t("messages.general.shippingSelect"))}</h3>`),t(q(w,{options:(null==(c=null==(d=k(b).availableShippingMethods)?void 0:d[0])?void 0:c.rates)||[],"active-option":(null==(p=k(b).chosenShippingMethods)?void 0:p[0])||""},null,l)),t("</div>")):t("\x3c!----\x3e"),(null==(m=k(h))?void 0:m.nodes.length)?(t(`<div class="mt-2 col-span-full"><h2 class="mb-4 text-xl font-semibold">${R(e.$t("messages.billing.paymentOptions"))}</h2>`),t(q(Q,{modelValue:k(D).paymentMethod,"onUpdate:modelValue":e=>k(D).paymentMethod=e,class:"mb-4",paymentGateways:k(h)},null,l)),k(G)?t(q(Y,{style:"stripe"==(null==(v=k(D).paymentMethod)?void 0:v.id)?null:{display:"none"},stripe:k(G),onUpdateElement:handleStripeElement},null,l)):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t(`<div><h2 class="mb-4 text-xl font-semibold">${R(e.$t("messages.shop.orderNote"))} (${R(e.$t("messages.general.optional"))})</h2><textarea id="order-note" name="order-note" class="w-full min-h-[100px]" rows="4"${N("placeholder",e.$t("messages.shop.orderNotePlaceholder"))}>${R(k(D).customerNote)}</textarea></div></div>`),t(q(F,null,{default:S(((e,t,l,a)=>{if(!t)return[j("button",{class:"flex items-center justify-center w-full gap-3 p-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-primary hover:bg-primary-dark disabled:cursor-not-allowed disabled:bg-gray-400",disabled:k(L)},[C(I(k(B)),1),k(T)?(M(),P(J,{key:0,color:"#fff",size:"18"})):A("",!0)],8,["disabled"])];t(`<button class="flex items-center justify-center w-full gap-3 p-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-primary hover:bg-primary-dark disabled:cursor-not-allowed disabled:bg-gray-400"${U(k(L))?" disabled":""}${a}>${R(k(B))}`),k(T)?t(q(J,{color:"#fff",size:"18"},null,l,a)):t("\x3c!----\x3e"),t("</button>")})),_:1},l)),t("</form>")),t("\x3c!--]--\x3e")):t(q(J,{class:"m-auto"},null,l)),t("</div>")}}}),ke=_e.setup;_e.setup=(e,t)=>{const l=T();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/pages/checkout.vue"),ke?ke(e,t):void 0};export{_e as default};
//# sourceMappingURL=checkout-OtE4_Xrc.mjs.map
