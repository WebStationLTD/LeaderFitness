import{defineComponent as e,useAttrs as r,ref as i,computed as t,mergeProps as s,unref as o,useSSRContext as a}from"vue";import{ssrRenderAttrs as n,ssrRenderSlot as u}from"vue/server-renderer";import{o as d,p as l,n as p,r as c}from"./server.mjs";const g={src:{type:String,required:!1},format:{type:String,required:!1},quality:{type:[Number,String],required:!1},background:{type:String,required:!1},fit:{type:String,required:!1},modifiers:{type:Object,required:!1},preset:{type:String,required:!1},provider:{type:String,required:!1},sizes:{type:[Object,String],required:!1},densities:{type:String,required:!1},preload:{type:[Boolean,Object],required:!1},width:{type:[String,Number],required:!1},height:{type:[String,Number],required:!1},alt:{type:String,required:!1},referrerpolicy:{type:String,required:!1},usemap:{type:String,required:!1},longdesc:{type:String,required:!1},ismap:{type:Boolean,required:!1},loading:{type:String,required:!1,validator:e=>["lazy","eager"].includes(e)},crossorigin:{type:[Boolean,String],required:!1,validator:e=>["anonymous","use-credentials","",!0,!1].includes(e)},decoding:{type:String,required:!1,validator:e=>["async","auto","sync"].includes(e)},nonce:{type:[String],required:!1}},m=e({__name:"NuxtImg",__ssrInlineRender:!0,props:{...g,placeholder:{type:[Boolean,String,Number,Array],required:!1},placeholderClass:{type:String,required:!1},custom:{type:Boolean,required:!1}},emits:["load","error"],setup(e,{emit:a}){const g=e,m=r(),y=!0,v=d(),h=(e=>{const r=t((()=>({provider:e.provider,preset:e.preset}))),i=t((()=>({width:l(e.width),height:l(e.height),alt:e.alt,referrerpolicy:e.referrerpolicy,usemap:e.usemap,longdesc:e.longdesc,ismap:e.ismap,crossorigin:!0===e.crossorigin?"anonymous":e.crossorigin||void 0,loading:e.loading,decoding:e.decoding,nonce:e.nonce}))),s=d();return{options:r,attrs:i,modifiers:t((()=>({...e.modifiers,width:l(e.width),height:l(e.height),format:e.format,quality:e.quality||s.options.quality,background:e.background,fit:e.fit})))}})(g),f=i(!1),q=i(),S=t((()=>v.getSizes(g.src,{...h.options.value,sizes:g.sizes,densities:g.densities,modifiers:{...h.modifiers.value,width:l(g.width),height:l(g.height)}}))),b=t((()=>{const e={...h.attrs.value,"data-nuxt-img":""};return g.placeholder&&!f.value||(e.sizes=S.value.sizes,e.srcset=S.value.srcset),e})),z=t((()=>{let e=g.placeholder;if(""===e&&(e=!0),!e||f.value)return!1;if("string"==typeof e)return e;const r=Array.isArray(e)?e:"number"==typeof e?[e,e]:[10,10];return v(g.src,{...h.modifiers.value,width:r[0],height:r[1],quality:r[2]||50,blur:r[3]||3},h.options.value)})),w=t((()=>g.sizes?S.value.src:v(g.src,h.modifiers.value,h.options.value))),_=t((()=>z.value?z.value:w.value));if(g.preload){const e=Object.values(S.value).every((e=>e));p({link:[{rel:"preload",as:"image",nonce:g.nonce,...e?{href:S.value.src,imagesizes:S.value.sizes,imagesrcset:S.value.srcset}:{href:_.value},..."boolean"!=typeof g.preload&&g.preload.fetchPriority?{fetchpriority:g.preload.fetchPriority}:{}}]})}return c().isHydrating,(e,r,i,t)=>{e.custom?u(e.$slots,"default",{...o(y)?{onerror:"this.setAttribute('data-error', 1)"}:{},imgAttrs:{...b.value,...o(m)},isLoaded:f.value,src:_.value},null,r,i):r(`<img${n(s({ref_key:"imgEl",ref:q,class:z.value&&!f.value?e.placeholderClass:void 0},{...o(y)?{onerror:"this.setAttribute('data-error', 1)"}:{},...b.value,...o(m)},{src:_.value},t))}>`)}}}),y=m.setup;m.setup=(e,r)=>{const i=a();return(i.modules||(i.modules=new Set)).add("node_modules/@nuxt/image/dist/runtime/components/NuxtImg.vue"),y?y(e,r):void 0};const v=Object.assign(m,{__name:"NuxtImg"});export{v as _};
//# sourceMappingURL=NuxtImg-hBz1e1i1.mjs.map
