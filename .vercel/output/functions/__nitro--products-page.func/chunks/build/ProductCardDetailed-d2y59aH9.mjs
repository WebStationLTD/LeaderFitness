import{c as e,_ as t,x as a,f as l,u as n,w as o,i as s,b as d,v as r}from"./server.mjs";import{defineComponent as i,mergeProps as u,ref as c,watch as v,computed as p,withCtx as m,unref as f,createVNode as x,createBlock as g,createCommentVNode as b,openBlock as h,toDisplayString as y,useSSRContext as w}from"vue";import{ssrRenderAttrs as _,ssrRenderList as P,ssrRenderComponent as j,ssrInterpolate as $,ssrRenderAttr as I,ssrIncludeBooleanAttr as S}from"vue/server-renderer";import{F as z}from"./NuxtImg-CriYuRni.mjs";import{P as R}from"./ProductPrice-D0-FECQf.mjs";import{P as B}from"./default-3LCvtah8.mjs";const C=i({__name:"SaleBadge",__ssrInlineRender:!0,props:{node:{type:Object,required:!0}},setup(e){const{t:t}=o(),{storeSettings:a}=l(),n=p((()=>{var t,a,l,n;if(null==(t=e.node)||!t.salePrice||null==(a=e.node)||!a.regularPrice)return"";const o=parseFloat(null==(l=e.node)?void 0:l.salePrice),s=parseFloat(null==(n=e.node)?void 0:n.regularPrice);return Math.round((s-o)/s*100)+" %"})),s=p((()=>e.node.salePrice&&"hidden"!==a.saleBadge)),d=p((()=>"percent"===(null==a?void 0:a.saleBadge)?n.value:t("messages.shop.onSale")?t("messages.shop.onSale"):"Sale"));return(e,t,a,l)=>{f(s)?t(`<span${_(u({class:"red-badge"},l))} data-v-69615c4f>${$(f(d))}</span>`):t("\x3c!----\x3e")}}}),E=C.setup;C.setup=(e,t)=>{const a=w();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/SaleBadge.vue"),E?E(e,t):void 0};const k=Object.assign(e(C,[["__scopeId","data-v-69615c4f"]]),{__name:"SaleBadge"}),N=i({__name:"ProductWishlistButton",__ssrInlineRender:!0,props:{product:{}},setup(e){const{isInList:a}=r(),l=e,n=p((()=>!!l.product.databaseId&&a(l.product.databaseId)));return(e,a,l,o)=>{const s=t;a(`<button${_(u({type:"button",class:"absolute top-2 left-2 z-40 bg-white/80 hover:bg-white rounded-full shadow-md transition-all duration-200 wishlist-btn",title:f(n)?e.$t("messages.shop.wishlistRemove"):e.$t("messages.shop.wishlistAdd")},o))} data-v-097c071d>`),f(n)?a(j(s,{name:"ion:heart",size:"24",class:"text-red-500 md:w-6 md:h-6 w-5 h-5"},null,l)):a(j(s,{name:"ion:heart-outline",size:"24",class:"text-gray-600 md:w-6 md:h-6 w-5 h-5"},null,l)),a("</button>")}}}),O=N.setup;N.setup=(e,t)=>{const a=w();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/ProductWishlistButton.vue"),O?O(e,t):void 0};const U=Object.assign(e(N,[["__scopeId","data-v-097c071d"]]),{__name:"ProductWishlistButton"}),q=i({__name:"StarRating",__ssrInlineRender:!0,props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup:e=>(a,l,n,o)=>{const s=t;l(`<div${_(u({class:"inline-flex items-center"},o))}>\x3c!--[--\x3e`),P(5,(t=>{l(j(s,{key:t,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:{color:e.rating<t?"#ccc":"#FBBE24"}},null,n))})),l("\x3c!--]--\x3e"),null===e.count||e.hideCount?l("\x3c!----\x3e"):l(`<span class="text-xs ml-1 text-gray-500">(${$(e.count)})</span>`),l("</div>")}}),D=q.setup;q.setup=(e,t)=>{const a=w();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/StarRating.vue"),D?D(e,t):void 0};const F=Object.assign(q,{__name:"StarRating"}),L=280,M=i({__name:"ProductCardDetailed",__ssrInlineRender:!0,props:{node:{type:Object,required:!0},index:{type:Number,default:1}},setup(e){var r,i,w,C;const E=a(),{storeSettings:N}=l(),{cart:O}=n(),{t:q}=o(),D=e,M=Math.round(315),A=c(null==(r=E.query)?void 0:r.filter),T=c((null==(C=null==(w=null==(i=A.value)?void 0:i.split("pa_color[")[1])?void 0:w.split("]")[0])?void 0:C.split(","))||[]);v((()=>E.query),(()=>{var e,t,a;A.value=E.query.filter,T.value=(null==(a=null==(t=null==(e=A.value)?void 0:e.split("pa_color[")[1])?void 0:t.split("]")[0])?void 0:a.split(","))||[]}));const W=p((()=>{var e,t,a,l;return(null==(t=null==(e=D.node)?void 0:e.image)?void 0:t.producCardSourceUrl)||(null==(l=null==(a=D.node)?void 0:a.image)?void 0:l.sourceUrl)||"/images/placeholder.jpg"})),Q=p((()=>{var e,t,a,l,n,o;if(T.value.length){const s=null==(t=null==(e=D.node)?void 0:e.variations)?void 0:t.nodes.filter((e=>{var t;const a=null==(t=e.attributes)?void 0:t.nodes.some((e=>T.value.some((t=>{var a;return null==(a=null==e?void 0:e.value)?void 0:a.includes(t)})))),l=T.value.some((t=>{var a;return null==(a=e.slug)?void 0:a.includes(t)}));return a||l}));if(null!=s&&s.length)return(null==(l=null==(a=s[0])?void 0:a.image)?void 0:l.producCardSourceUrl)||(null==(o=null==(n=s[0])?void 0:n.image)?void 0:o.sourceUrl)||W.value}return W.value})),V=c(!1),Y=c(1),G=c(""),H=c(null),J=p((()=>{var e;return(null==(e=D.node)?void 0:e.type)===B.VARIABLE})),K=p((()=>{var e;return(null==(e=D.node)?void 0:e.type)===B.SIMPLE})),X=p((()=>{var e,t;return J.value&&void 0!==(null==(t=null==(e=D.node)?void 0:e.variations)?void 0:t.nodes)&&D.node.variations.nodes.length>0})),Z=p((()=>J.value||K.value)),ee=p((()=>V.value||X.value&&!H.value));return v(O,(()=>{setTimeout((()=>{V.value=!1,G.value=""}),300)})),p((()=>{var e,t,a,l;if(H.value&&null!=(t=null==(e=D.node)?void 0:e.variations)&&t.nodes){const e=D.node.variations.nodes.find((e=>e.databaseId===H.value));return null!==(null==e?void 0:e.salePrice)&&void 0!==(null==e?void 0:e.salePrice)}return null!==(null==(a=D.node)?void 0:a.salePrice)&&void 0!==(null==(l=D.node)?void 0:l.salePrice)})),(a,l,n,o)=>{var r,i;const c=s,v=k,p=U,w=z,B=F,C=R,E=t,O=d;l(`<div${_(u({class:"relative group"},o))} data-v-aaa5f5f1>`),e.node.slug?l(j(c,{to:`/produkt/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:m(((t,a,l,n)=>{var o,s,d,r;if(!a)return[x(v,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),x(p,{product:e.node},null,8,["product"]),f(Q)?(h(),g(w,{key:0,width:L,height:f(M),src:f(Q),alt:(null==(d=e.node.image)?void 0:d.altText)||e.node.name||"Product image",title:(null==(r=e.node.image)?void 0:r.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:"sm:140px md:280px",class:"rounded-lg object-top object-cover w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,8,["height","src","alt","title","loading","sizes"])):b("",!0)];a(j(v,{node:e.node,class:"absolute top-2 right-2"},null,l,n)),a(j(p,{product:e.node},null,l,n)),f(Q)?a(j(w,{width:L,height:f(M),src:f(Q),alt:(null==(o=e.node.image)?void 0:o.altText)||e.node.name||"Product image",title:(null==(s=e.node.image)?void 0:s.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:"sm:140px md:280px",class:"rounded-lg object-top object-cover w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,l,n)):a("\x3c!----\x3e")})),_:1},n)):l("\x3c!----\x3e"),l("<div data-v-aaa5f5f1>"),f(N).showReviews?l(j(B,{rating:e.node.averageRating||0,count:e.node.reviewCount||0},null,n)):l("\x3c!----\x3e"),e.node.slug?l(j(c,{to:`/produkt/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:m(((t,a,l,n)=>{if(!a)return[x("h2",{class:"mb-2 font-light leading-tight group-hover:text-primary"},y(e.node.name),1)];a(`<h2 class="mb-2 font-light leading-tight group-hover:text-primary" data-v-aaa5f5f1${n}>${$(e.node.name)}</h2>`)})),_:1},n)):l("\x3c!----\x3e"),l('<div class="flex flex-col items-start sm:flex-row sm:items-center sm:justify-between mb-3 min-h-[26px]" data-v-aaa5f5f1>'),l(j(C,{class:"text-sm","sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,n)),f(X)?(l('<div class="flex w-full mt-2 sm:mt-0 sm:justify-end sm:w-[100px]" data-v-aaa5f5f1><select class="text-xs py-1 px-2 border border-gray-300 rounded focus:outline-none focus:border-gray-400 bg-white w-full sm:max-w-[160px]" data-v-aaa5f5f1><option value="" disabled selected data-v-aaa5f5f1>Вариации</option>\x3c!--[--\x3e'),P(null==(i=null==(r=e.node)?void 0:r.variations)?void 0:i.nodes,(e=>{var t,a;l(`<option${I("value",e.databaseId)}${S(f(H)===e.databaseId)?" selected":""} data-v-aaa5f5f1>`),null!=(a=null==(t=e.attributes)?void 0:t.nodes)&&a.length?l(`\x3c!--[--\x3e${$(e.attributes.nodes.map((e=>e.value)).filter(Boolean).join(" / "))}\x3c!--]--\x3e`):l(`\x3c!--[--\x3e${$(e.name)}\x3c!--]--\x3e`),l("</option>")})),l("\x3c!--]--\x3e</select></div>")):l("\x3c!----\x3e"),l("</div>"),f(G)?l(`<div class="text-red-500 text-xs -mt-2 mb-3" data-v-aaa5f5f1>${$(f(G))}</div>`):l("\x3c!----\x3e"),f(Z)?(l(`<div data-v-aaa5f5f1><div class="flex items-center justify-between space-x-2" data-v-aaa5f5f1><div class="flex items-center h-8 bg-white border border-gray-300 rounded-md" data-v-aaa5f5f1><button type="button" class="flex items-center justify-center w-6 h-full text-xs text-gray-500 transition-colors border-r border-gray-300 hover:bg-gray-50"${S(f(Y)<=1)?" disabled":""} data-v-aaa5f5f1>`),l(j(E,{name:"ion:remove",size:"14"},null,n)),l(`</button><input${I("value",f(Y))} type="number" min="1" class="w-8 h-full text-xs text-center bg-transparent focus:outline-none" data-v-aaa5f5f1><button type="button" class="flex items-center justify-center w-6 h-full text-xs text-gray-500 transition-colors border-l border-gray-300 hover:bg-gray-50" data-v-aaa5f5f1>`),l(j(E,{name:"ion:add",size:"14"},null,n)),l(`</button></div><button type="button"${S(f(ee))?" disabled":""} class="flex items-center justify-center flex-1 h-8 px-3 text-xs font-medium text-white transition-colors bg-gray-800 rounded-md hover:bg-gray-900 disabled:bg-gray-400 disabled:cursor-not-allowed" data-v-aaa5f5f1><span data-v-aaa5f5f1>Купи</span>`),f(V)?l(j(O,{stroke:"3",size:"10",color:"#fff",class:"ml-1"},null,n)):l("\x3c!----\x3e"),l("</button></div></div>")):l("\x3c!----\x3e"),l("</div></div>")}}}),A=M.setup;M.setup=(e,t)=>{const a=w();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/ProductCardDetailed.vue"),A?A(e,t):void 0};const T=Object.assign(e(M,[["__scopeId","data-v-aaa5f5f1"]]),{__name:"ProductCardDetailed"});export{T as M,F as N,k};
//# sourceMappingURL=ProductCardDetailed-d2y59aH9.mjs.map
