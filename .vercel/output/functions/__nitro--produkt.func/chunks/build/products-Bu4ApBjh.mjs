import{_ as e,a as o,b as r,c as t,d as i}from"./ProductGrid-DM3elyy0.mjs";import{defineComponent as n,computed as a,withAsyncContext as s,watch as l,unref as u,mergeProps as p,useSSRContext as c}from"vue";import{ssrRenderAttrs as d,ssrRenderComponent as m}from"vue/server-renderer";import{z as v,w as y,d as g,e as h,l as f,A as w,i as x}from"./server.mjs";import"./default-C7s0JCB3.mjs";import"graphql-request";import"./ProductCard-SaerHacm.mjs";import"./NuxtImg-BJG_EbHe.mjs";import"./ProductPrice-BLA-t2Nu.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const b=n({__name:"products",__ssrInlineRender:!0,async setup(n){var c,b,P;let q,j;const{loadProductsForPage:M,updateProductList:_,products:D,getCurrentPageFromRoute:F}=v(),S=y(),{storeSettings:B}=g(),{isQueryEmpty:C}=h();f({title:"Products",meta:[{name:"description",content:"Discover our products"}]});const E=a((()=>({search:S.query.search,categoryIn:S.query.category?[S.query.category]:void 0,priceMin:S.query.priceMin?parseFloat(S.query.priceMin):void 0,priceMax:S.query.priceMax?parseFloat(S.query.priceMax):void 0,onSale:"true"===S.query.sale||void 0,orderby:S.query.orderby||"DATE"}))),{data:N}=([q,j]=s((async()=>w("shopPage",(async()=>{try{const{data:e}=await x("getShopPage");return e.value}catch(e){return console.warn("Не можахме да заредим SEO данните:",e),null}})))),q=await q,j(),q);if(null==(b=null==(c=N.value)?void 0:c.page)?void 0:b.seo){const e=N.value.page,o=e.seo,r=(null==o?void 0:o.title)||e.title||"Products",t=(null==o?void 0:o.metaDesc)||e.content||"Discover our products";f({title:r,meta:[{name:"description",content:t},{property:"og:title",content:(null==o?void 0:o.opengraphTitle)||r},{property:"og:description",content:(null==o?void 0:o.opengraphDescription)||t},{name:"robots",content:(null==o?void 0:o.metaRobotsNoindex)?"noindex":"index"},{name:"robots",content:(null==o?void 0:o.metaRobotsNofollow)?"nofollow":"follow"}],link:[{rel:"canonical",href:(null==o?void 0:o.canonical)||"/products"}]}),(null==(P=null==o?void 0:o.schema)?void 0:P.raw)&&f({script:[{type:"application/ld+json",innerHTML:o.schema.raw}]})}return[q,j]=s((async()=>w("initialProducts",(async()=>{try{const e=F();return await M(e,E.value),C.value||await _(),!0}catch(e){return console.error("Грешка при зареждане на продукти:",e),!1}})))),await q,j(),l((()=>S.query),(()=>{"products"!==S.name&&"product-page-pager"!==S.name||_()})),l((()=>S.params),(()=>{"products"!==S.name&&"product-page-pager"!==S.name||_()})),(n,a,s,l)=>{var c;const v=e,y=o,g=r,h=t,f=i;null==(c=u(D))||c.length,a(`<div${d(p({class:"container flex items-start gap-16 px-2"},l))}>`),u(B).showFilters?a(m(v,null,null,s)):a("\x3c!----\x3e"),a('<div class="w-full"><div class="flex items-center justify-between w-full gap-4 mt-8 md:gap-8">'),a(m(y,null,null,s)),u(B).showOrderByDropdown?a(m(g,{class:"hidden md:inline-flex"},null,s)):a("\x3c!----\x3e"),u(B).showFilters?a(m(h,{class:"md:hidden"},null,s)):a("\x3c!----\x3e"),a("</div>"),a(m(f,null,null,s)),a("</div></div>")}}}),P=b.setup;b.setup=(e,o)=>{const r=c();return(r.modules||(r.modules=new Set)).add("woonuxt_base/app/pages/products.vue"),P?P(e,o):void 0};export{b as default};
//# sourceMappingURL=products-Bu4ApBjh.mjs.map
