import{w as e,x as t,s as l,u as a,g as s,k as o,l as i,_ as n,i as r,c as d,b as u,r as c,d as p,t as v,G as g,v as f,f as b}from"./server.mjs";import{N as x,L as h}from"./CountrySelect-SPFsW0me.mjs";import{defineComponent as y,ref as $,computed as w,withAsyncContext as _,mergeProps as k,unref as S,withCtx as C,createTextVNode as I,toDisplayString as M,createVNode as O,createBlock as A,createCommentVNode as D,openBlock as P,toRef as T,watch as E,useSSRContext as q}from"vue";import{ssrRenderAttrs as R,ssrRenderComponent as z,ssrInterpolate as N,ssrRenderAttr as U,ssrRenderClass as Q,ssrIncludeBooleanAttr as B,ssrLooseContain as L,ssrRenderList as W,ssrRenderSlot as F,ssrRenderStyle as Y}from"vue/server-renderer";import{_ as G}from"./TrashIcon-C576Jaq2.mjs";import{useSwipe as J}from"@vueuse/core";import{F as K}from"./NuxtImg-CriYuRni.mjs";import{P as H}from"./ProductPrice-D0-FECQf.mjs";import{loadStripe as X}from"@stripe/stripe-js";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"graphql-request";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";function ge(){const e=c("orderInput",(()=>({customerNote:"",paymentMethod:"",shipToDifferentAddress:!1,metaData:[{key:"order_via",value:"WooNuxt"}]}))),t=c("isProcessingOrder",(()=>!1));async function m(e){return new Promise((t=>{const l=(void 0).innerWidth/2-375,a=(void 0).innerHeight/2-375+80;(void 0).open(e,"",`width=750,height=750,top=${a},left=${l}`),console.error("[nuxt] `setInterval` should not be used on the server. Consider wrapping it with an `onNuxtReady`, `onBeforeMount` or `onMounted` lifecycle hook, or ensure you only call it in the browser by checking `false`.")}))}return{orderInput:e,isProcessingOrder:t,processCheckout:async(o=!1)=>{var i,n,r,d,u,c,g,f;const{customer:b,loginUser:x}=s(),h=l(),{replaceQueryParam:y}=p(),{cart:$,emptyCart:w,refreshCart:_}=a();t.value=!0;const{username:k,password:S,shipToDifferentAddress:C}=e.value,I=null==(i=b.value)?void 0:i.billing,M=C?null==(n=b.value)?void 0:n.shipping:I,O=null==(r=$.value)?void 0:r.chosenShippingMethods;try{let t={billing:I,shipping:M,shippingMethod:O,metaData:e.value.metaData,paymentMethod:e.value.paymentMethod.id,customerNote:e.value.customerNote,shipToDifferentAddress:C,transactionId:e.value.transactionId,isPaid:o};e.value.createAccount?t.account={username:k,password:S}:t.account=null;const{checkout:l}=await v(t);e.value.createAccount&&await x({username:k,password:S});const a=null==(d=null==l?void 0:l.order)?void 0:d.databaseId,s=null==(u=null==l?void 0:l.order)?void 0:u.orderKey,i=e.value.paymentMethod.id,n="paypal"===i||"ppcp-gateway"===i;if(null!=l&&l.order)try{localStorage.setItem("lastOrder",JSON.stringify({id:a,key:s,total:l.order.total,status:l.order.status,date:l.order.date,paymentMethod:l.order.paymentMethod,paymentMethodTitle:l.order.paymentMethodTitle}))}catch(e){console.error("Не може да се запише поръчката в localStorage",e)}if(await(null==l?void 0:l.redirect)&&n){const e=(void 0).location.origin;let t=(null==l?void 0:l.redirect)??"";const o=`${e}/checkout/order-received/${a}/?key=${s}&from_paypal=true`,i=`${e}/checkout/?cancel_order=true&from_paypal=true`;t=y("return",o,t),t=y("cancel_return",i,t),t=y("bn","WooNuxt_Cart",t),await m(t)&&(null!=(c=b.value)&&c.email&&"guest"!==b.value.email?h.push(`/checkout/order-received/${a}/?key=${s}&fetch_delay=true`):h.push("/thank-you"))}else null!=(g=b.value)&&g.email&&"guest"!==b.value.email?h.push(`/checkout/order-received/${a}/?key=${s}`):h.push("/thank-you");if("success"!==await(null==l?void 0:l.result))return alert("There was an error processing your order. Please try again."),(void 0).location.reload(),l;await w(),await _()}catch(e){const t=null==(f=null==e?void 0:e.gqlErrors)?void 0:f[0].message;return null!=t&&t.includes("An account is already registered with your email address")?(alert("An account is already registered with your email address"),null):(alert(t),null)}finally{t.value=!1}},updateShippingLocation:async function(){var t;const{customer:l,viewer:o}=s(),{isUpdatingCart:i,refreshCart:n}=a();i.value=!0;try{if(null==(t=null==o?void 0:o.value)||!t.id)throw new Error("Viewer ID is missing.");const{updateCustomer:a}=await g({input:{id:o.value.id,shipping:e.value.shipToDifferentAddress?l.value.shipping:l.value.billing,billing:l.value.billing}});a&&await n()}catch(e){console.error("Error updating shipping location:",e)}finally{i.value=!1}}}}const Z=y({__name:"BillingDetails",__ssrInlineRender:!0,props:{modelValue:{type:Object,required:!0}},setup(e){const{updateShippingLocation:t}=ge(),{isBillingAddressEnabled:l}=a(),s=T(e,"modelValue");return(e,a,o,i)=>{const n=x,r=h;a(`<div${R(k({class:"grid w-full gap-4 lg:grid-cols-2"},i))}><div class="w-full"><label for="first-name">${N(e.$t("messages.billing.firstName"))}</label><input id="first-name"${U("value",S(s).firstName)} placeholder="John" autocomplete="given-name" type="text" required></div><div class="w-full"><label for="last-name">${N(e.$t("messages.billing.lastName"))}</label><input id="last-name"${U("value",S(s).lastName)} placeholder="Doe" autocomplete="family-name" type="text" required></div>`),S(l)?a(`<div class="w-full col-span-full"><label for="address1">${N(e.$t("messages.billing.address1"))}</label><input id="address1"${U("value",S(s).address1)} placeholder="O&#39;Connell Street 47" autocomplete="street-address" type="text" required></div>`):a("\x3c!----\x3e"),S(l)?a(`<div class="w-full col-span-full"><label for="address2">${N(e.$t("messages.billing.address2"))} (${N(e.$t("messages.general.optional"))})</label><input id="address2"${U("value",S(s).address2)} placeholder="Apartment, studio, or floor" autocomplete="address-line2" type="text"></div>`):a("\x3c!----\x3e"),S(l)?a(`<div class="w-full"><label for="city">${N(e.$t("messages.billing.city"))}</label><input id="city"${U("value",S(s).city)} placeholder="New York" autocomplete="locality" type="text" required></div>`):a("\x3c!----\x3e"),S(l)?(a(`<div class="w-full"><label for="state">${N(e.$t("messages.billing.state"))} (${N(e.$t("messages.general.optional"))})</label>`),a(z(n,{id:"state",modelValue:S(s).state,"onUpdate:modelValue":e=>S(s).state=e,"default-value":S(s).state,"country-code":S(s).country,onChange:S(t),autocomplete:"address-level1"},null,o)),a("</div>")):a("\x3c!----\x3e"),S(l)?(a(`<div class="w-full"><label for="country">${N(e.$t("messages.billing.country"))}</label>`),a(z(r,{id:"country",modelValue:S(s).country,"onUpdate:modelValue":e=>S(s).country=e,"default-value":S(s).country,onChange:S(t),autocomplete:"country"},null,o)),a("</div>")):a("\x3c!----\x3e"),S(l)?a(`<div class="w-full"><label for="zip">${N(e.$t("messages.billing.zip"))}</label><input id="zip"${U("value",S(s).postcode)} placeholder="10001" autocomplete="postal-code" type="text" required></div>`):a("\x3c!----\x3e"),S(l)?a(`<div class="w-full col-span-full"><label for="phone">${N(e.$t("messages.billing.phone"))} (${N(e.$t("messages.general.optional"))})</label><input id="phone"${U("value",S(s).phone)} placeholder="+1 234 567 8901" autocomplete="tel" type="tel"></div>`):a("\x3c!----\x3e"),a("</div>")}}}),ee=Z.setup;Z.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/forms/BillingDetails.vue"),ee?ee(e,t):void 0};const te=Object.assign(Z,{__name:"BillingDetails"}),le=y({__name:"ShippingDetails",__ssrInlineRender:!0,props:{modelValue:{type:Object,required:!0}},setup(e){const{updateShippingLocation:t}=ge(),l=T(e,"modelValue");return(e,a,s,o)=>{const i=x,n=h;a(`<div${R(k({class:"grid w-full gap-4 lg:grid-cols-2"},o))}><div class="w-full"><label for="first-name">${N(e.$t("messages.billing.firstName"))}</label><input id="first-name"${U("value",S(l).firstName)} placeholder="John" autocomplete="given-name" type="text" required></div><div class="w-full"><label for="last-name">${N(e.$t("messages.billing.lastName"))}</label><input id="last-name"${U("value",S(l).lastName)} placeholder="Doe" autocomplete="family-name" type="text" required></div><div class="w-full col-span-full"><label for="address1">${N(e.$t("messages.billing.address1"))}</label><input id="address1"${U("value",S(l).address1)} placeholder="O&#39;Connell Street 47" autocomplete="street-address" type="text" required></div><div class="w-full col-span-full"><label for="address2">${N(e.$t("messages.billing.address2"))} (${N(e.$t("messages.general.optional"))})</label><input id="address2"${U("value",S(l).address2)} placeholder="Apartment, studio, or floor" autocomplete="address-line2" type="text"></div><div class="w-full"><label for="city">${N(e.$t("messages.billing.city"))}</label><input id="city"${U("value",S(l).city)} placeholder="New York" autocomplete="locality" type="text" required></div><div class="w-full"><label for="state">${N(e.$t("messages.billing.state"))} (${N(e.$t("messages.general.optional"))})</label>`),a(z(i,{id:"state",modelValue:S(l).state,"onUpdate:modelValue":e=>S(l).state=e,"default-value":S(l).state,"country-code":S(l).country,onChange:S(t)},null,s)),a(`</div><div class="w-full"><label for="country">${N(e.$t("messages.billing.country"))}</label>`),a(z(n,{id:"country",modelValue:S(l).country,"onUpdate:modelValue":e=>S(l).country=e,"default-value":S(l).country,onChange:S(t)},null,s)),a(`</div><div class="w-full"><label for="zip">${N(e.$t("messages.billing.zip"))}</label><input id="zip"${U("value",S(l).postcode)} placeholder="10001" autocomplete="postal-code" type="text" required></div><div class="w-full col-span-full"><label for="phone">${N(e.$t("messages.billing.phone"))} (${N(e.$t("messages.general.optional"))})</label><input id="phone"${U("value",S(l).phone)} placeholder="+1 234 567 8901" autocomplete="tel" type="tel"></div></div>`)}}}),ae=le.setup;le.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/forms/ShippingDetails.vue"),ae?ae(e,t):void 0};const se=Object.assign(le,{__name:"ShippingDetails"}),oe={__name:"ShippingOptions",__ssrInlineRender:!0,props:{options:{type:Array,required:!0},activeOption:{type:String,required:!0}},setup(e){var t;a();const l=o(),s=(null==(t=null==l?void 0:l.public)?void 0:t.CURRENCY_SYMBOL)||"$";return(t,l,a,o)=>{const i=n;l(`<div${R(k({class:"grid gap-4 shipping-options"},o))} data-v-f391d757>\x3c!--[--\x3e`),W(e.options,(t=>{l(`<div class="${Q([{"active-option":t.id===e.activeOption},"flex items-center justify-between option"])}" data-v-f391d757><div data-v-f391d757><div class="text-sm leading-tight text-gray-500" data-v-f391d757>${t.label??""}</div><div class="font-semibold text-gray-600" data-v-f391d757>${N(S(s))}${N(t.cost)}</div></div>`),l(z(i,{name:"ion:checkmark-circle",size:"20",class:"ml-auto text-primary checkmark opacity-0"},null,a)),l("</div>")})),l("\x3c!--]--\x3e</div>")}}},ie=oe.setup;oe.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/ShippingOptions.vue"),ie?ie(e,t):void 0};const ne=d(oe,[["__scopeId","data-v-f391d757"]]),re=y({__name:"PaymentOptions",__ssrInlineRender:!0,props:{modelValue:{},paymentGateways:{}},emits:["update:modelValue"],setup(e,{emit:t}){const l=T(e,"modelValue"),a=w((()=>l.value));return(e,t,l,s)=>{var o;const i=n;t(`<div${R(k({class:"flex gap-4 leading-tight flex-wrap"},s))} data-v-baca1106>\x3c!--[--\x3e`),W(null==(o=e.paymentGateways)?void 0:o.nodes,(e=>{t(`<div class="${Q([{"active-option":e.id===S(a).id},"option"])}"${U("title",(null==e?void 0:e.description)||(null==e?void 0:e.title)||"Payment Method")} data-v-baca1106>`),"stripe"===e.id?t(z(i,{name:"ion:card-outline",size:"20"},null,l)):"paypal"===e.id?t(z(i,{name:"ion:logo-paypal",size:"20"},null,l)):t(z(i,{name:"ion:cash-outline",size:"20"},null,l)),t(`<span class="whitespace-nowrap" data-v-baca1106>${e.title??""}</span>`),t(z(i,{name:"ion:checkmark-circle",size:"20",class:"ml-auto text-primary checkmark opacity-0"},null,l)),t("</div>")})),t("\x3c!--]--\x3e"),S(a).description?t(`<div class="prose block w-full" data-v-baca1106><p class="text-sm text-gray-500" data-v-baca1106>${S(a).description??""}</p></div>`):t("\x3c!----\x3e"),t("</div>")}}}),de=re.setup;re.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/PaymentOptions.vue"),de?de(e,t):void 0};const ue=Object.assign(d(re,[["__scopeId","data-v-baca1106"]]),{__name:"PaymentOptions"}),ce=y({__name:"StripeElement",__ssrInlineRender:!0,props:["stripe"],emits:["updateElement"],setup(e,{emit:t}){const{cart:l}=a();return w((()=>l.value&&100*parseFloat(l.value.rawTotal))).value,(e,t,l,a)=>{t(`<div${R(k({id:"card-element"},a))}></div>`)}}}),pe=ce.setup;ce.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/StripeElement.vue"),pe?pe(e,t):void 0};const me=Object.assign(ce,{__name:"StripeElement"}),ve={__name:"SwipeCard",__ssrInlineRender:!0,emits:["remove"],setup(e,{emit:t}){const l=t,a=$(!0),s=$(null),{isSwiping:o,lengthX:i}=J(s,{passive:!0,onSwipeEnd(){i.value>80&&(a.value=!1,l("remove"))}});return(e,t,l,s)=>{const n=G;S(a)?(t(`<div${R(k({class:"rounded-lg flex h-16 w-full overflow-hidden relative items-center"},s))}>`),t(z(n,{class:["transform transition-all right-0 w-6 scale-0 absolute",{"scale-100":S(i)>40,"delete-ready":S(i)>80}]},null,l)),t(`<div class="${Q([{"transition-all":!S(o)},"rounded-lg inset-0 absolute"])}" style="${Y({transform:S(o)?`translateX(-${S(i)}px)`:"none"})}">`),F(e.$slots,"default",{},null,t,l),t("</div></div>")):t("\x3c!----\x3e")}}},fe=ve.setup;ve.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/cartElements/SwipeCard.vue"),fe?fe(e,t):void 0};const be=y({__name:"QuantityInput",__ssrInlineRender:!0,props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:t,isUpdatingCart:l}=a(),{debounce:s}=p(),o=w((()=>{var t,l;return e.item.variation?null==(t=e.item.variation)?void 0:t.node:null==(l=e.item.product)?void 0:l.node})),i=$(e.item.quantity),r=w((()=>!!o.value.stockQuantity&&o.value.stockQuantity<=i.value));return E(i,s((()=>{""!==i.value&&t(e.item.key,i.value)}),250)),(e,t,a,s)=>{const d=n;t(`<div${R(k({class:"flex rounded bg-white text-sm leading-none shadow-sm shadow-gray-200 isolate"},s))} data-v-7c0d03fb><button title="Decrease Quantity" aria-label="Decrease Quantity" type="button" class="focus:outline-none border-r w-6 h-6 border rounded-l border-gray-300 hover:bg-gray-50 disabled:cursor-not-allowed"${B(S(l)||S(i)<=0)?" disabled":""} data-v-7c0d03fb>`),t(z(d,{name:"ion:remove",size:"14"},null,a)),t(`</button><input${U("value",S(i))} type="number" min="0"${U("max",S(o).stockQuantity)} aria-label="Quantity" class="flex items-center justify-center w-8 px-2 text-right text-xs focus:outline-none border-y border-gray-300" data-v-7c0d03fb><button title="Increase Quantity" aria-label="Increase Quantity" type="button" class="focus:outline-none border-l w-6 h-6 border rounded-r hover:bg-gray-50 border-gray-300 disabled:cursor-not-allowed disabled:bg-gray-100"${B(S(l)||S(r))?" disabled":""} data-v-7c0d03fb>`),t(z(d,{name:"ion:add",size:"14"},null,a)),t("</button></div>")}}}),xe=be.setup;be.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/cartElements/QuantityInput.vue"),xe?xe(e,t):void 0};const he=Object.assign(d(be,[["__scopeId","data-v-7c0d03fb"]]),{__name:"QuantityInput"}),ye={__name:"CartCard",__ssrInlineRender:!0,props:{item:{type:Object,required:!0}},setup(e){const{updateItemQuantity:t}=a(),{addToWishlist:l}=f(),{FALLBACK_IMG:s}=p(),{storeSettings:o}=b(),i=w((()=>{var t,l;return e.item.variation?null==(t=e.item.variation)?void 0:t.node:null==(l=e.item.product)?void 0:l.node})),d=w((()=>`/produkt/${decodeURIComponent(e.item.product.node.slug)}`)),u=w((()=>!!i.value.stockQuantity&&i.value.lowStockAmount>=i.value.stockQuantity)),c=w((()=>{var t,l,a;return(null==(t=i.value.image)?void 0:t.cartSourceUrl)||(null==(l=i.value.image)?void 0:l.sourceUrl)||(null==(a=e.item.product.image)?void 0:a.sourceUrl)||s})),v=w((()=>parseFloat(i.value.rawRegularPrice))),g=w((()=>parseFloat(i.value.rawSalePrice))),x=w((()=>Math.round((v.value-g.value)/v.value*100)+"%")),P$1=()=>{t(e.item.key,0)},V=()=>{l(e.item.product.node),P$1()};return(t,l,a,s)=>{const p=r,v=K,g=H,f=he,b=n;l(z(ve,k({onRemove:P$1},s),{default:C(((t,l,a,s)=>{if(!l)return[S(i)?(P(),A("div",{key:0,class:"flex items-center gap-3 group"},[O(p,{to:S(d)},{default:C((()=>{var e,t;return[O(v,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:S(c),alt:(null==(e=S(i).image)?void 0:e.altText)||S(i).name,title:(null==(t=S(i).image)?void 0:t.title)||S(i).name,loading:"lazy"},null,8,["src","alt","title"])]})),_:1},8,["to"]),O("div",{class:"flex-1 min-w-0"},[O("div",{class:"flex flex-wrap gap-x-2 gap-y-1 items-center"},[O(p,{class:"leading-tight truncate max-w-full block",to:S(d)},{default:C((()=>[I(M(S(i).name),1)])),_:1},8,["to"]),S(i).salePrice?(P(),A("span",{key:0,class:"text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"}," Save "+M(S(x)),1)):D("",!0),S(u)?(P(),A("span",{key:1,class:"text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"}," Low Stock ")):D("",!0)]),O(g,{class:"mt-1 text-xs","sale-price":S(i).salePrice,"regular-price":S(i).regularPrice},null,8,["sale-price","regular-price"])]),O("div",{class:"inline-flex gap-2 flex-col items-end shrink-0"},[O(f,{item:e.item},null,8,["item"]),O("div",{class:"text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"},[S(o).showMoveToWishlist?(P(),A("button",{key:0,class:"mr-2 pr-2 border-r",onClick:V,type:"button"},"Move to Wishlist")):D("",!0),O("button",{title:"Remove Item","aria-label":"Remove Item",onClick:P$1,type:"button",class:"flex items-center gap-1 hover:text-red-500 cursor-pointer"},[O(b,{name:"ion:trash",class:"md:inline-block",size:"12"})])])])])):D("",!0)];S(i)?(l(`<div class="flex items-center gap-3 group"${s}>`),l(z(p,{to:S(d)},{default:C(((e,t,l,a)=>{var s,o,n,r;if(!t)return[O(v,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:S(c),alt:(null==(n=S(i).image)?void 0:n.altText)||S(i).name,title:(null==(r=S(i).image)?void 0:r.title)||S(i).name,loading:"lazy"},null,8,["src","alt","title"])];t(z(v,{width:"64",height:"64",class:"w-16 h-16 rounded-md skeleton",src:S(c),alt:(null==(s=S(i).image)?void 0:s.altText)||S(i).name,title:(null==(o=S(i).image)?void 0:o.title)||S(i).name,loading:"lazy"},null,l,a))})),_:1},a,s)),l(`<div class="flex-1 min-w-0"${s}><div class="flex flex-wrap gap-x-2 gap-y-1 items-center"${s}>`),l(z(p,{class:"leading-tight truncate max-w-full block",to:S(d)},{default:C(((e,t,l,a)=>{if(!t)return[I(M(S(i).name),1)];t(`${N(S(i).name)}`)})),_:1},a,s)),S(i).salePrice?l(`<span class="text-[10px] border-green-200 leading-none bg-green-100 inline-block p-0.5 rounded text-green-600 border"${s}> Save ${N(S(x))}</span>`):l("\x3c!----\x3e"),S(u)?l(`<span class="text-[10px] border-yellow-200 leading-none bg-yellow-100 inline-block p-0.5 rounded text-orange-500 border"${s}> Low Stock </span>`):l("\x3c!----\x3e"),l("</div>"),l(z(g,{class:"mt-1 text-xs","sale-price":S(i).salePrice,"regular-price":S(i).regularPrice},null,a,s)),l(`</div><div class="inline-flex gap-2 flex-col items-end shrink-0"${s}>`),l(z(f,{item:e.item},null,a,s)),l(`<div class="text-xs text-gray-400 group-hover:text-gray-700 flex leading-none items-center"${s}>`),S(o).showMoveToWishlist?l(`<button class="mr-2 pr-2 border-r" type="button"${s}>Move to Wishlist</button>`):l("\x3c!----\x3e"),l(`<button title="Remove Item" aria-label="Remove Item" type="button" class="flex items-center gap-1 hover:text-red-500 cursor-pointer"${s}>`),l(z(b,{name:"ion:trash",class:"md:inline-block",size:"12"},null,a,s)),l("</button></div></div></div>")):l("\x3c!----\x3e")})),_:1},a))}}},$e=ye.setup;ye.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/cartElements/CartCard.vue"),$e?$e(e,t):void 0};const we=y({__name:"AddCoupon",__ssrInlineRender:!0,setup(e){const{cart:t,isUpdatingCoupon:l,removeCoupon:s}=a(),o=$(""),i=$("");return(e,a,r,d)=>{const c=u,p=n;a(`<div${R(d)}><form class="flex gap-1"><input id="couponCode"${U("value",S(o))} type="text"${U("placeholder",e.$t("messages.shop.couponCode"))} class="w-full px-4 py-2 bg-white border border-gray-300 rounded-md shadow-sm outline-none" required><button class="flex items-center justify-center px-4 py-2 text-white bg-gray-800 border rounded-md shadow-sm outline-none min-w-20"${B(S(l))?" disabled":""}>`),S(l)?a(z(c,{color:"#fff",size:"16"},null,r)):a(`<span>${N(e.$t("messages.general.apply"))}</span>`),a("</button></form>"),S(i)?a(`<div class="mt-2 text-xs text-red-600">${S(i)??""}</div>`):a("\x3c!----\x3e"),S(t)&&S(t).appliedCoupons?(a('<div class="text-xs font-semibold uppercase flex flex-wrap gap-2">\x3c!--[--\x3e'),W(S(t).appliedCoupons,((e,t)=>{a('<div class="flex flex-wrap mt-2 flex-2">'),null!=e&&e.code?(a(`<div class="bg-primary border-primary border rounded-md flex bg-opacity-5 border-opacity-10 text-primary leading-none p-1.5 gap-1 items-center"><span>${e.code??""}</span>`),a(z(p,{name:"ion:close",class:"rounded-full cursor-pointer hover:bg-primary hover:text-white",onClick:t=>S(s)(e.code)},null,r)),a("</div>")):a("\x3c!----\x3e"),a("</div>")})),a("\x3c!--]--\x3e</div>")):a("\x3c!----\x3e"),a("</div>")}}}),_e=we.setup;we.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/AddCoupon.vue"),_e?_e(e,t):void 0};const ke=Object.assign(we,{__name:"AddCoupon"}),Se={__name:"OrderSummary",__ssrInlineRender:!0,setup(e){const{cart:t,isUpdatingCart:l}=a();return(e,a,s,o)=>{const i=ye,n=ke,r=u;S(t)?(a(`<aside${R(k({class:"bg-white rounded-lg shadow-lg mb-8 w-full min-h-[280px] p-4 sm:p-8 relative md:max-w-md md:top-32 md:sticky"},o))}><h2 class="mb-6 text-xl font-semibold leading-none">${N(e.$t("messages.shop.orderSummary"))}</h2><ul class="flex flex-col gap-4 overflow-y-auto">\x3c!--[--\x3e`),W(S(t).contents.nodes,(e=>{a(z(i,{key:e.key,item:e},null,s))})),a("\x3c!--]--\x3e</ul>"),a(z(n,{class:"my-8"},null,s)),a(`<div class="grid gap-1 text-sm font-semibold text-gray-500"><div class="flex justify-between"><span>${N(e.$t("messages.shop.subtotal"))}</span><span class="text-gray-700 tabular-nums">${S(t).subtotal??""}</span></div><div class="flex justify-between"><span>${N(e.$t("messages.general.shipping"))}</span><span class="text-gray-700 tabular-nums">${N(parseFloat(S(t).shippingTotal)>0?"+":"")} ${N(S(t).shippingTotal)}</span></div>`),S(t)&&S(t).appliedCoupons?a(`<div class="flex justify-between"><span>${N(e.$t("messages.shop.discount"))}</span><span class="text-primary tabular-nums">- <span>${S(t).discountTotal??""}</span></span></div>`):a("\x3c!----\x3e"),a(`<div class="flex justify-between mt-4"><span>${N(e.$t("messages.shop.total"))}</span><span class="text-lg font-bold text-gray-700 tabular-nums">${S(t).total??""}</span></div></div>`),F(e.$slots,"default",{},null,a,s),S(l)?(a('<div class="absolute inset-0 flex items-center justify-center bg-white bg-opacity-50">'),a(z(r,null,null,s)),a("</div>")):a("\x3c!----\x3e"),a("</aside>")):a("\x3c!----\x3e")}}},Ce=Se.setup;Se.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/components/shopElements/OrderSummary.vue"),Ce?Ce(e,t):void 0};const Ie=y({__name:"checkout",__ssrInlineRender:!0,async setup(d){var c;let p,v;const{t:g}=e(),{query:f}=t();l();const{cart:b,isUpdatingCart:x,paymentGateways:h}=a(),{customer:y,viewer:T}=s(),{orderInput:E,isProcessingOrder:q}=ge(),W=(null==(c=o().public)?void 0:c.STRIPE_PUBLISHABLE_KEY)||null,F=$(q.value?g("messages.general.processing"):g("messages.shop.checkoutButton")),Y=w((()=>q.value||x.value||!E.value.paymentMethod)),G=$(!1),J=W?([p,v]=_((()=>X(W))),p=await p,v(),p):null,K=$();$(!1);const j=e=>{K.value=e};return i({title:g("messages.shop.checkout")}),(e,t,l,a)=>{var s,o,i,d,c,p,v,g;const f=n,x=r,$=te,w=se,_=ne,W=ue,K=me,H=Se,X=u;t(`<div${R(k({class:"flex flex-col min-h-[600px]"},a))}>`),S(b)&&S(y)?(t("\x3c!--[--\x3e"),S(b).isEmpty?(t('<div class="flex flex-col items-center justify-center flex-1 mb-12">'),t(z(f,{name:"ion:cart-outline",size:"156",class:"opacity-25 mb-5"},null,l)),t(`<h2 class="text-2xl font-bold mb-2">${N(e.$t("messages.shop.cartEmpty"))}</h2><span class="text-gray-400 mb-4">${N(e.$t("messages.shop.addProductsInYourCart"))}</span>`),t(z(x,{to:"/products",class:"flex items-center justify-center gap-3 p-2 px-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-primary hover:bg-primary-dark"},{default:C(((t,l,a,s)=>{if(!l)return[I(M(e.$t("messages.shop.browseOurProducts")),1)];l(`${N(e.$t("messages.shop.browseOurProducts"))}`)})),_:1},l)),t("</div>")):(t('<form class="container flex flex-wrap items-start gap-8 my-16 justify-evenly lg:gap-20"><div class="grid w-full max-w-2xl gap-8 checkout-form md:flex-1">'),!S(T)&&null!=(s=S(y))&&s.billing?(t(`<div><h2 class="w-full mb-2 text-2xl font-semibold leading-none">Contact Information</h2><p class="mt-1 text-sm text-gray-500">${N(e.$t("messages.account.alreadyRegistered"))} `),t(z(x,{to:"/my-account",class:"text-primary font-semibold"},{default:C(((t,l,a,s)=>{if(!l)return[I(M(e.$t("messages.account.login")),1)];l(`${N(e.$t("messages.account.login"))}`)})),_:1},l)),t(`</p><div class="w-full mt-4"><label for="email">${N(e.$t("messages.billing.email"))}</label><input${U("value",S(y).billing.email)} placeholder="johndoe@email.com" autocomplete="email" type="email" name="email" class="${Q({"has-error":S(G)})}" required>`),S(G)?t('<div class="mt-1 text-sm text-red-500">Invalid email address</div>'):t("\x3c!----\x3e"),t("</div></div>")):t("\x3c!----\x3e"),t(`<div><h2 class="w-full mb-3 text-2xl font-semibold">${N(e.$t("messages.billing.billingDetails"))}</h2>`),t(z($,{"model-value":(null==(o=S(y))?void 0:o.billing)||{}},null,l)),t("</div>"),S(b).availableShippingMethods&&S(b).availableShippingMethods.length>0?t(`<label for="shipToDifferentAddress" class="flex items-center gap-2"><span>${N(e.$t("messages.billing.differentAddress"))}</span><input id="shipToDifferentAddress"${B(Array.isArray(S(E).shipToDifferentAddress)?L(S(E).shipToDifferentAddress,null):S(E).shipToDifferentAddress)?" checked":""} type="checkbox" name="shipToDifferentAddress"></label>`):t("\x3c!----\x3e"),S(E).shipToDifferentAddress?(t(`<div><h2 class="mb-4 text-xl font-semibold">${N(e.$t("messages.general.shippingDetails"))}</h2>`),t(z(w,{"model-value":(null==(i=S(y))?void 0:i.shipping)||{}},null,l)),t("</div>")):t("\x3c!----\x3e"),S(b).availableShippingMethods&&S(b).availableShippingMethods.length?(t(`<div><h3 class="mb-4 text-xl font-semibold">${N(e.$t("messages.general.shippingSelect"))}</h3>`),t(z(_,{options:(null==(c=null==(d=S(b).availableShippingMethods)?void 0:d[0])?void 0:c.rates)||[],"active-option":(null==(p=S(b).chosenShippingMethods)?void 0:p[0])||""},null,l)),t("</div>")):t("\x3c!----\x3e"),null!=(v=S(h))&&v.nodes.length?(t(`<div class="mt-2 col-span-full"><h2 class="mb-4 text-xl font-semibold">${N(e.$t("messages.billing.paymentOptions"))}</h2>`),t(z(W,{modelValue:S(E).paymentMethod,"onUpdate:modelValue":e=>S(E).paymentMethod=e,class:"mb-4",paymentGateways:S(h)},null,l)),S(J)?t(z(K,{style:"stripe"==(null==(g=S(E).paymentMethod)?void 0:g.id)?null:{display:"none"},stripe:S(J),onUpdateElement:j},null,l)):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t(`<div><h2 class="mb-4 text-xl font-semibold">${N(e.$t("messages.shop.orderNote"))} (${N(e.$t("messages.general.optional"))})</h2><textarea id="order-note" name="order-note" class="w-full min-h-[100px]" rows="4"${U("placeholder",e.$t("messages.shop.orderNotePlaceholder"))}>${N(S(E).customerNote)}</textarea></div></div>`),t(z(H,null,{default:C(((e,t,l,a)=>{if(!t)return[O("button",{class:"flex items-center justify-center w-full gap-3 p-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-primary hover:bg-primary-dark disabled:cursor-not-allowed disabled:bg-gray-400",disabled:S(Y)},[I(M(S(F)),1),S(q)?(P(),A(X,{key:0,color:"#fff",size:"18"})):D("",!0)],8,["disabled"])];t(`<button class="flex items-center justify-center w-full gap-3 p-3 mt-4 font-semibold text-center text-white rounded-lg shadow-md bg-primary hover:bg-primary-dark disabled:cursor-not-allowed disabled:bg-gray-400"${B(S(Y))?" disabled":""}${a}>${N(S(F))}`),S(q)?t(z(X,{color:"#fff",size:"18"},null,l,a)):t("\x3c!----\x3e"),t("</button>")})),_:1},l)),t("</form>")),t("\x3c!--]--\x3e")):t(z(X,{class:"m-auto"},null,l)),t("</div>")}}}),je=Ie.setup;Ie.setup=(e,t)=>{const l=q();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/pages/checkout.vue"),je?je(e,t):void 0};export{Ie as default};
//# sourceMappingURL=checkout-BXeOnr5j.mjs.map
