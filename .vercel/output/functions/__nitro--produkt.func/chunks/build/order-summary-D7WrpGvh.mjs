import{w as e,f as s,e as t,v as l,k as i,b as a,h as o,_ as d}from"./server.mjs";import{_ as n,a as r}from"./DownloadableItems-aFap2LE6.mjs";import{_ as u}from"./NuxtImg-BJG_EbHe.mjs";import{defineComponent as m,ref as v,computed as c,mergeProps as p,unref as x,withCtx as g,createVNode as f,useSSRContext as h}from"vue";import{ssrRenderAttrs as y,ssrRenderComponent as b,ssrInterpolate as $,ssrRenderList as w}from"vue/server-renderer";import{O as j}from"./default-C7s0JCB3.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"graphql-request";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const _=m({__name:"order-summary",__ssrInlineRender:!0,setup(m){const{query:h,params:_,name:T}=e(),{customer:I}=s(),{formatDate:k,formatPrice:P}=t(),{t:E}=l(),R=v(null);v("true"===h.fetch_delay);const q=v(!1),B=v("");c((()=>{var e;return!(null==(e=I.value)?void 0:e.email)}));const D=c((()=>"order-summary"===T)),U=c((()=>"order-received"===T)),z=c((()=>{var e;return(null==(e=R.value)?void 0:e.status)!==j.COMPLETED})),C=c((()=>{var e;return!!parseFloat((null==(e=R.value)?void 0:e.rawDiscountTotal)||"0")})),M=c((()=>{var e,s;return(null==(s=null==(e=R.value)?void 0:e.downloadableItems)?void 0:s.nodes)||[]}));return i({title:()=>D.value?E("messages.shop.orderSummary"):E("messages.shop.orderReceived")}),(e,s,t,l)=>{const i=a,m=o,v=d,c=n,h=u,j=r;s(`<div${y(p({class:"w-full min-h-[600px] flex items-center p-4 text-gray-800 md:bg-white md:rounded-xl md:mx-auto md:shadow-lg md:my-24 md:mt-8 md:max-w-3xl md:p-16 flex-col"},l))}>`),x(q)?(s("\x3c!--[--\x3e"),x(R)?(s('<div class="w-full">'),x(D)?(s('<div class="flex items-center gap-4">'),s(b(m,{to:"/my-account?tab=orders",class:"inline-flex items-center justify-center p-2 border rounded-md",title:"Back to orders","aria-label":"Back to orders"},{default:g(((e,s,t,l)=>{if(!s)return[f(v,{name:"ion:chevron-back-outline"})];s(b(v,{name:"ion:chevron-back-outline"},null,t,l))})),_:1},t)),s(`<h1 class="text-xl font-semibold">${$(e.$t("messages.shop.orderSummary"))}</h1></div>`)):x(U)?(s(`\x3c!--[--\x3e<div class="flex items-center justify-between w-full mb-2"><h1 class="text-xl font-semibold">${$(e.$t("messages.shop.orderReceived"))}</h1>`),x(z)?(s('<button type="button" class="inline-flex items-center justify-center p-2 bg-white border rounded-md" title="Refresh order" aria-label="Refresh order">'),s(b(v,{name:"ion:refresh-outline"},null,t)),s("</button>")):s("\x3c!----\x3e"),s(`</div><p>${$(e.$t("messages.shop.orderThanks"))}</p>\x3c!--]--\x3e`)):s("\x3c!----\x3e"),s('<hr class="my-8"></div>')):s("\x3c!----\x3e"),x(R)?(s(`<div class="flex-1 w-full"><div class="flex items-start justify-between"><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.shop.order"))}</div><div class="leading-none">#${$(x(R).databaseId)}</div></div><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.general.date"))}</div><div class="leading-none">${$(x(k)(x(R).date))}</div></div><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.general.status"))}</div>`),x(R).status?s(b(c,{order:x(R)},null,t)):s("\x3c!----\x3e"),s(`</div><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.general.paymentMethod"))}</div><div class="leading-none">${$(x(R).paymentMethodTitle)}</div></div></div>`),x(R).lineItems?(s('\x3c!--[--\x3e<hr class="my-8"><div class="grid gap-2">\x3c!--[--\x3e'),w(x(R).lineItems.nodes,(e=>{var l,i,a,o;s('<div class="flex items-center justify-between gap-8">'),(null==(l=e.product)?void 0:l.node)?s(b(m,{to:`/produkt/${e.product.node.slug}`},{default:g(((s,t,l,i)=>{var a,o,d,n,r,u,m,v,c,p,x,g,y,$,w,j,_,T,I,k,P,E,R,q,B,D,U,z,C,M;if(!t)return[f(h,{class:"w-16 h-16 rounded-xl",src:(null==(T=null==(_=null==(j=e.variation)?void 0:j.node)?void 0:_.image)?void 0:T.sourceUrl)||(null==(k=null==(I=e.product.node)?void 0:I.image)?void 0:k.sourceUrl)||"/images/placeholder.png",alt:(null==(R=null==(E=null==(P=e.variation)?void 0:P.node)?void 0:E.image)?void 0:R.altText)||(null==(B=null==(q=e.product.node)?void 0:q.image)?void 0:B.altText)||"Product image",title:(null==(z=null==(U=null==(D=e.variation)?void 0:D.node)?void 0:U.image)?void 0:z.title)||(null==(M=null==(C=e.product.node)?void 0:C.image)?void 0:M.title)||"Product image",width:"64",height:"64",loading:"lazy"},null,8,["src","alt","title"])];t(b(h,{class:"w-16 h-16 rounded-xl",src:(null==(d=null==(o=null==(a=e.variation)?void 0:a.node)?void 0:o.image)?void 0:d.sourceUrl)||(null==(r=null==(n=e.product.node)?void 0:n.image)?void 0:r.sourceUrl)||"/images/placeholder.png",alt:(null==(v=null==(m=null==(u=e.variation)?void 0:u.node)?void 0:m.image)?void 0:v.altText)||(null==(p=null==(c=e.product.node)?void 0:c.image)?void 0:p.altText)||"Product image",title:(null==(y=null==(g=null==(x=e.variation)?void 0:x.node)?void 0:g.image)?void 0:y.title)||(null==(w=null==($=e.product.node)?void 0:$.image)?void 0:w.title)||"Product image",width:"64",height:"64",loading:"lazy"},null,l,i))})),_:2},t)):s("\x3c!----\x3e"),s(`<div class="flex-1 leading-tight">${$(e.variation?null==(a=null==(i=e.variation)?void 0:i.node)?void 0:a.name:null==(o=e.product)?void 0:o.node.name)}</div><div class="text-sm text-gray-600">Qty. ${$(e.quantity)}</div><span class="text-sm font-semibold">${$(x(P)(e.total))}</span></div>`)})),s("\x3c!--]--\x3e</div>\x3c!--]--\x3e")):s("\x3c!----\x3e"),s('<hr class="my-8">'),x(M).length&&!x(z)?(s("<div>"),s(b(j,{downloadableItems:x(M)},null,t)),s('<hr class="my-8"></div>')):s("\x3c!----\x3e"),s(`<div><div class="flex justify-between"><span>${$(e.$t("messages.shop.subtotal"))}</span><span>${$(x(R).subtotal)}</span></div><div class="flex justify-between"><span>${$(e.$t("messages.general.tax"))}</span><span>${$(x(R).totalTax)}</span></div><div class="flex justify-between"><span>${$(e.$t("messages.general.shipping"))}</span><span>${$(x(R).shippingTotal)}</span></div>`),x(C)?s(`<div class="flex justify-between text-primary"><span>${$(e.$t("messages.shop.discount"))}</span><span>- ${$(x(R).discountTotal)}</span></div>`):s("\x3c!----\x3e"),s(`<hr class="my-8"><div class="flex justify-between"><span class>${$(e.$t("messages.shop.total"))}</span><span class="font-semibold">${$(x(R).total)}</span></div></div></div>`)):x(B)?(s('<div class="flex flex-col items-center justify-center flex-1 w-full gap-4 text-center">'),s(b(v,{name:"ion:sad-outline",size:"96",class:"text-gray-700"},null,t)),s('<h1 class="text-xl font-semibold">Error</h1>'),x(B)?s(`<div class="text-sm text-red-500">${x(B)??""}</div>`):s("\x3c!----\x3e"),s("</div>")):s("\x3c!----\x3e"),s("\x3c!--]--\x3e")):s(b(i,{class:"flex-1"},null,t)),s("</div>")}}}),T=_.setup;_.setup=(e,s)=>{const t=h();return(t.modules||(t.modules=new Set)).add("woonuxt_base/app/pages/order-summary.vue"),T?T(e,s):void 0};export{_ as default};
//# sourceMappingURL=order-summary-D7WrpGvh.mjs.map
