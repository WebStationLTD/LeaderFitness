import e from"node:process";globalThis._importMeta_=globalThis._importMeta_||{url:"file:///_entry.js",env:e.env};import t from"node:http";import s from"node:https";import{EventEmitter as a}from"node:events";import{Buffer as c}from"node:buffer";import{toValue as l}from"vue";import{GraphQLClient as u}from"graphql-request";import{createConsola as d,consola as h}from"consola";import{getIcons as f}from"@iconify/utils";import{createHash as m}from"node:crypto";import{fileURLToPath as g}from"node:url";import{ipxFSStorage as v,ipxHttpStorage as _,createIPX as x,createIPXH3Handler as R}from"ipx";import{promises as k,existsSync as $}from"node:fs";import{resolve as C,dirname as E,join as j}from"node:path";const T=/"(?:_|\\u0{2}5[Ff]){2}(?:p|\\u0{2}70)(?:r|\\u0{2}72)(?:o|\\u0{2}6[Ff])(?:t|\\u0{2}74)(?:o|\\u0{2}6[Ff])(?:_|\\u0{2}5[Ff]){2}"\s*:/,O=/"(?:c|\\u0063)(?:o|\\u006[Ff])(?:n|\\u006[Ee])(?:s|\\u0073)(?:t|\\u0074)(?:r|\\u0072)(?:u|\\u0075)(?:c|\\u0063)(?:t|\\u0074)(?:o|\\u006[Ff])(?:r|\\u0072)"\s*:/,P=/^\s*["[{]|^\s*-?\d{1,16}(\.\d{1,17})?([Ee][+-]?\d+)?\s*$/;function jsonParseTransform(e,t){if(!("__proto__"===e||"constructor"===e&&t&&"object"==typeof t&&"prototype"in t))return t;!function(e){console.warn(`[destr] Dropping "${e}" key to prevent prototype pollution.`)}(e)}function destr(e,t={}){if("string"!=typeof e)return e;if('"'===e[0]&&'"'===e[e.length-1]&&-1===e.indexOf("\\"))return e.slice(1,-1);const s=e.trim();if(s.length<=9)switch(s.toLowerCase()){case"true":return!0;case"false":return!1;case"undefined":return;case"null":return null;case"nan":return Number.NaN;case"infinity":return Number.POSITIVE_INFINITY;case"-infinity":return Number.NEGATIVE_INFINITY}if(!P.test(e)){if(t.strict)throw new SyntaxError("[destr] Invalid JSON");return e}try{if(T.test(e)||O.test(e)){if(t.strict)throw new Error("[destr] Possible prototype pollution");return JSON.parse(e,jsonParseTransform)}return JSON.parse(e)}catch(s){if(t.strict)throw s;return e}}const H=/#/g,L=/&/g,N=/\//g,U=/=/g,I=/\?/g,M=/\+/g,q=/%5e/gi,B=/%60/gi,F=/%7c/gi,D=/%20/gi,W=/%252f/gi;function encode(e){return encodeURI(""+e).replace(F,"|")}function encodeQueryValue(e){return encode("string"==typeof e?e:JSON.stringify(e)).replace(M,"%2B").replace(D,"+").replace(H,"%23").replace(L,"%26").replace(B,"`").replace(q,"^").replace(N,"%2F")}function encodeQueryKey(e){return encodeQueryValue(e).replace(U,"%3D")}function decode$1(e=""){try{return decodeURIComponent(""+e)}catch{return""+e}}function decodeQueryValue(e){return decode$1(e.replace(M," "))}function parseQuery(e=""){const t=Object.create(null);"?"===e[0]&&(e=e.slice(1));for(const s of e.split("&")){const e=s.match(/([^=]+)=?(.*)/)||[];if(e.length<2)continue;const a=decode$1(e[1].replace(M," "));if("__proto__"===a||"constructor"===a)continue;const c=decodeQueryValue(e[2]||"");void 0===t[a]?t[a]=c:Array.isArray(t[a])?t[a].push(c):t[a]=[t[a],c]}return t}function stringifyQuery(e){return Object.keys(e).filter((t=>void 0!==e[t])).map((t=>{return s=t,"number"!=typeof(a=e[t])&&"boolean"!=typeof a||(a=String(a)),a?Array.isArray(a)?a.map((e=>`${encodeQueryKey(s)}=${encodeQueryValue(e)}`)).join("&"):`${encodeQueryKey(s)}=${encodeQueryValue(a)}`:encodeQueryKey(s);var s,a})).filter(Boolean).join("&")}const K=/^[\s\w\0+.-]{2,}:([/\\]{1,2})/,X=/^[\s\w\0+.-]{2,}:([/\\]{2})?/,V=/^([/\\]\s*){2,}[^/\\]/,Q=/^\.?\//;function hasProtocol(e,t={}){return"boolean"==typeof t&&(t={acceptRelative:t}),t.strict?K.test(e):X.test(e)||!!t.acceptRelative&&V.test(e)}function withoutTrailingSlash(e="",t){return(function(e=""){return e.endsWith("/")}(e)?e.slice(0,-1):e)||"/"}function withTrailingSlash(e="",t){return e.endsWith("/")?e:e+"/"}function withLeadingSlash(e=""){return function(e=""){return e.startsWith("/")}(e)?e:"/"+e}function withBase(e,t){if(isEmptyURL(t)||hasProtocol(e))return e;const s=withoutTrailingSlash(t);return e.startsWith(s)?e:joinURL(s,e)}function withoutBase(e,t){if(isEmptyURL(t))return e;const s=withoutTrailingSlash(t);if(!e.startsWith(s))return e;const a=e.slice(s.length);return"/"===a[0]?a:"/"+a}function withQuery(e,t){const s=parseURL(e),a={...parseQuery(s.search),...t};return s.search=stringifyQuery(a),stringifyParsedURL(s)}function getQuery$1(e){return parseQuery(parseURL(e).search)}function isEmptyURL(e){return!e||"/"===e}function joinURL(e,...t){let s=e||"";for(const e of t.filter((e=>function(e){return e&&"/"!==e}(e))))if(s){const t=e.replace(Q,"");s=withTrailingSlash(s)+t}else s=e;return s}function joinRelativeURL(...e){const t=/\/(?!\/)/,s=e.filter(Boolean),a=[];let c=0;for(const e of s)if(e&&"/"!==e)for(const[s,l]of e.split(t).entries())if(l&&"."!==l)if(".."!==l)1===s&&a[a.length-1]?.endsWith(":/")?a[a.length-1]+="/"+l:(a.push(l),c++);else{if(1===a.length&&hasProtocol(a[0]))continue;a.pop(),c--}let l=a.join("/");return c>=0?s[0]?.startsWith("/")&&!l.startsWith("/")?l="/"+l:s[0]?.startsWith("./")&&!l.startsWith("./")&&(l="./"+l):l="../".repeat(-1*c)+l,s[s.length-1]?.endsWith("/")&&!l.endsWith("/")&&(l+="/"),l}function withHttps(e){return function(e,t){let s=e.match(X);s||(s=e.match(/^\/{2,}/));if(!s)return t+e;return t+e.slice(s[0].length)}(e,"https://")}const J=Symbol.for("ufo:protocolRelative");function parseURL(e="",t){const s=e.match(/^[\s\0]*(blob:|data:|javascript:|vbscript:)(.*)/i);if(s){const[,e,t=""]=s;return{protocol:e.toLowerCase(),pathname:t,href:e+t,auth:"",host:"",search:"",hash:""}}if(!hasProtocol(e,{acceptRelative:!0}))return t?parseURL(t+e):parsePath(e);const[,a="",c,l=""]=e.replace(/\\/g,"/").match(/^[\s\0]*([\w+.-]{2,}:)?\/\/([^/@]+@)?(.*)/)||[];let[,u="",d=""]=l.match(/([^#/?]*)(.*)?/)||[];"file:"===a&&(d=d.replace(/\/(?=[A-Za-z]:)/,""));const{pathname:h,search:f,hash:m}=parsePath(d);return{protocol:a.toLowerCase(),auth:c?c.slice(0,Math.max(0,c.length-1)):"",host:u,pathname:h,search:f,hash:m,[J]:!a}}function parsePath(e=""){const[t="",s="",a=""]=(e.match(/([^#?]*)(\?[^#]*)?(#.*)?/)||[]).splice(1);return{pathname:t,search:s,hash:a}}function stringifyParsedURL(e){const t=e.pathname||"",s=e.search?(e.search.startsWith("?")?"":"?")+e.search:"",a=e.hash||"",c=e.auth?e.auth+"@":"",l=e.host||"";return(e.protocol||e[J]?(e.protocol||"")+"//":"")+c+l+t+s+a}function decode(e){return e.includes("%")?decodeURIComponent(e):e}function tryDecode(e,t){try{return t(e)}catch{return e}}const G=/^[\u0009\u0020-\u007E\u0080-\u00FF]+$/;function serialize$2(e,t,s){const a=s||{},c=a.encode||encodeURIComponent;if("function"!=typeof c)throw new TypeError("option encode is invalid");if(!G.test(e))throw new TypeError("argument name is invalid");const l=c(t);if(l&&!G.test(l))throw new TypeError("argument val is invalid");let u=e+"="+l;if(void 0!==a.maxAge&&null!==a.maxAge){const e=a.maxAge-0;if(Number.isNaN(e)||!Number.isFinite(e))throw new TypeError("option maxAge is invalid");u+="; Max-Age="+Math.floor(e)}if(a.domain){if(!G.test(a.domain))throw new TypeError("option domain is invalid");u+="; Domain="+a.domain}if(a.path){if(!G.test(a.path))throw new TypeError("option path is invalid");u+="; Path="+a.path}if(a.expires){if(d=a.expires,!("[object Date]"===Object.prototype.toString.call(d)||d instanceof Date)||Number.isNaN(a.expires.valueOf()))throw new TypeError("option expires is invalid");u+="; Expires="+a.expires.toUTCString()}var d;if(a.httpOnly&&(u+="; HttpOnly"),a.secure&&(u+="; Secure"),a.priority){switch("string"==typeof a.priority?a.priority.toLowerCase():a.priority){case"low":u+="; Priority=Low";break;case"medium":u+="; Priority=Medium";break;case"high":u+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(a.sameSite){switch("string"==typeof a.sameSite?a.sameSite.toLowerCase():a.sameSite){case!0:u+="; SameSite=Strict";break;case"lax":u+="; SameSite=Lax";break;case"strict":u+="; SameSite=Strict";break;case"none":u+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a.partitioned&&(u+="; Partitioned"),u}function parseSetCookie(e,t){const s=(e||"").split(";").filter((e=>"string"==typeof e&&!!e.trim())),a=function(e){let t="",s="";const a=e.split("=");a.length>1?(t=a.shift(),s=a.join("=")):s=e;return{name:t,value:s}}(s.shift()||""),c=a.name;let l=a.value;try{l=!1===t?.decode?l:(t?.decode||decodeURIComponent)(l)}catch{}const u={name:c,value:l};for(const e of s){const t=e.split("="),s=(t.shift()||"").trimStart().toLowerCase(),a=t.join("=");switch(s){case"expires":u.expires=new Date(a);break;case"max-age":u.maxAge=Number.parseInt(a,10);break;case"secure":u.secure=!0;break;case"httponly":u.httpOnly=!0;break;case"samesite":u.sameSite=a;break;default:u[s]=a}}return u}const Y=0,Z=1,ee=2;function createRouter$1(e={}){const t={options:e,rootNode:createRadixNode(),staticRoutesMap:{}},normalizeTrailingSlash=t=>e.strictTrailingSlash?t:t.replace(/\/$/,"")||"/";if(e.routes)for(const s in e.routes)insert(t,normalizeTrailingSlash(s),e.routes[s]);return{ctx:t,lookup:e=>function(e,t){const s=e.staticRoutesMap[t];if(s)return s.data;const a=t.split("/"),c={};let l=!1,u=null,d=e.rootNode,h=null;for(let e=0;e<a.length;e++){const t=a[e];null!==d.wildcardChildNode&&(u=d.wildcardChildNode,h=a.slice(e).join("/"));const s=d.children.get(t);if(void 0===s){if(d&&d.placeholderChildren.length>1){const t=a.length-e;d=d.placeholderChildren.find((e=>e.maxDepth===t))||null}else d=d.placeholderChildren[0]||null;if(!d)break;d.paramName&&(c[d.paramName]=t),l=!0}else d=s}null!==d&&null!==d.data||null===u||(d=u,c[d.paramName||"_"]=h,l=!0);if(!d)return null;if(l)return{...d.data,params:l?c:void 0};return d.data}(t,normalizeTrailingSlash(e)),insert:(e,s)=>insert(t,normalizeTrailingSlash(e),s),remove:e=>function(e,t){let s=!1;const a=t.split("/");let c=e.rootNode;for(const e of a)if(c=c.children.get(e),!c)return s;if(c.data){const e=a.at(-1)||"";c.data=null,0===Object.keys(c.children).length&&c.parent&&(c.parent.children.delete(e),c.parent.wildcardChildNode=null,c.parent.placeholderChildren=[]),s=!0}return s}(t,normalizeTrailingSlash(e))}}function insert(e,t,s){let a=!0;const c=t.split("/");let l=e.rootNode,u=0;const d=[l];for(const e of c){let t;if(t=l.children.get(e))l=t;else{const s=getNodeType(e);t=createRadixNode({type:s,parent:l}),l.children.set(e,t),s===ee?(t.paramName="*"===e?"_"+u++:e.slice(1),l.placeholderChildren.push(t),a=!1):s===Z&&(l.wildcardChildNode=t,t.paramName=e.slice(3)||"_",a=!1),d.push(t),l=t}}for(const[e,t]of d.entries())t.maxDepth=Math.max(d.length-e,t.maxDepth||0);return l.data=s,!0===a&&(e.staticRoutesMap[t]=l),l}function createRadixNode(e={}){return{type:e.type||Y,maxDepth:0,parent:e.parent||null,children:new Map,data:e.data||null,paramName:e.paramName||null,wildcardChildNode:null,placeholderChildren:[]}}function getNodeType(e){return e.startsWith("**")?Z:":"===e[0]||"*"===e?ee:Y}function toRouteMatcher(e){return function(e,t){return{ctx:{table:e},matchAll:s=>_matchRoutes(s,e,t)}}(_routerNodeToTable("",e.ctx.rootNode),e.ctx.options.strictTrailingSlash)}function _matchRoutes(e,t,s){!0!==s&&e.endsWith("/")&&(e=e.slice(0,-1)||"/");const a=[];for(const[s,c]of _sortRoutesMap(t.wildcard))(e===s||e.startsWith(s+"/"))&&a.push(c);for(const[s,c]of _sortRoutesMap(t.dynamic))if(e.startsWith(s+"/")){const t="/"+e.slice(s.length).split("/").splice(2).join("/");a.push(..._matchRoutes(t,c))}const c=t.static.get(e);return c&&a.push(c),a.filter(Boolean)}function _sortRoutesMap(e){return[...e.entries()].sort(((e,t)=>e[0].length-t[0].length))}function _routerNodeToTable(e,t){const s={static:new Map,wildcard:new Map,dynamic:new Map};return function _addNode(e,t){if(e)if(t.type!==Y||e.includes("*")||e.includes(":")){if(t.type===Z)s.wildcard.set(e.replace("/**",""),t.data);else if(t.type===ee){const a=_routerNodeToTable("",t);return t.data&&a.static.set("/",t.data),void s.dynamic.set(e.replace(/\/\*|\/:\w+/,""),a)}}else t.data&&s.static.set(e,t.data);for(const[s,a]of t.children.entries())_addNode(`${e}/${s}`.replace("//","/"),a)}(e,t),s}function isPlainObject(e){if(null===e||"object"!=typeof e)return!1;const t=Object.getPrototypeOf(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&(!(Symbol.iterator in e)&&(!(Symbol.toStringTag in e)||"[object Module]"===Object.prototype.toString.call(e)))}function _defu(e,t,s=".",a){if(!isPlainObject(t))return _defu(e,{},s,a);const c=Object.assign({},t);for(const t in e){if("__proto__"===t||"constructor"===t)continue;const l=e[t];null!=l&&(a&&a(c,t,l,s)||(Array.isArray(l)&&Array.isArray(c[t])?c[t]=[...l,...c[t]]:isPlainObject(l)&&isPlainObject(c[t])?c[t]=_defu(l,c[t],(s?`${s}.`:"")+t.toString(),a):c[t]=l))}return c}function createDefu(e){return(...t)=>t.reduce(((t,s)=>_defu(t,s,"",e)),{})}const te=createDefu(),re=createDefu(((e,t,s)=>{if(void 0!==e[t]&&"function"==typeof s)return e[t]=s(e[t]),!0}));function o(e){throw new Error(`${e} is not implemented yet!`)}let ne=class i extends a{__unenv__={};readableEncoding=null;readableEnded=!0;readableFlowing=!1;readableHighWaterMark=0;readableLength=0;readableObjectMode=!1;readableAborted=!1;readableDidRead=!1;closed=!1;errored=null;readable=!1;destroyed=!1;static from(e,t){return new i(t)}constructor(e){super()}_read(e){}read(e){}setEncoding(e){return this}pause(){return this}resume(){return this}isPaused(){return!0}unpipe(e){return this}unshift(e,t){}wrap(e){return this}push(e,t){return!1}_destroy(e,t){this.removeAllListeners()}destroy(e){return this.destroyed=!0,this._destroy(e),this}pipe(e,t){return{}}compose(e,t){throw new Error("Method not implemented.")}[Symbol.asyncDispose](){return this.destroy(),Promise.resolve()}async*[Symbol.asyncIterator](){throw o("Readable.asyncIterator")}iterator(e){throw o("Readable.iterator")}map(e,t){throw o("Readable.map")}filter(e,t){throw o("Readable.filter")}forEach(e,t){throw o("Readable.forEach")}reduce(e,t,s){throw o("Readable.reduce")}find(e,t){throw o("Readable.find")}findIndex(e,t){throw o("Readable.findIndex")}some(e,t){throw o("Readable.some")}toArray(e){throw o("Readable.toArray")}every(e,t){throw o("Readable.every")}flatMap(e,t){throw o("Readable.flatMap")}drop(e,t){throw o("Readable.drop")}take(e,t){throw o("Readable.take")}asIndexedPairs(e){throw o("Readable.asIndexedPairs")}},oe=class extends a{__unenv__={};writable=!0;writableEnded=!1;writableFinished=!1;writableHighWaterMark=0;writableLength=0;writableObjectMode=!1;writableCorked=0;closed=!1;errored=null;writableNeedDrain=!1;destroyed=!1;_data;_encoding="utf8";constructor(e){super()}pipe(e,t){return{}}_write(e,t,s){if(this.writableEnded)s&&s();else{if(void 0===this._data)this._data=e;else{const s="string"==typeof this._data?c.from(this._data,this._encoding||t||"utf8"):this._data,a="string"==typeof e?c.from(e,t||this._encoding||"utf8"):e;this._data=c.concat([s,a])}this._encoding=t,s&&s()}}_writev(e,t){}_destroy(e,t){}_final(e){}write(e,t,s){const a="string"==typeof t?this._encoding:"utf8",c="function"==typeof t?t:"function"==typeof s?s:void 0;return this._write(e,a,c),!0}setDefaultEncoding(e){return this}end(e,t,s){const a="function"==typeof e?e:"function"==typeof t?t:"function"==typeof s?s:void 0;if(this.writableEnded)return a&&a(),this;const c=e===a?void 0:e;if(c){const e=t===a?void 0:t;this.write(c,e,a)}return this.writableEnded=!0,this.writableFinished=!0,this.emit("close"),this.emit("finish"),this}cork(){}uncork(){}destroy(e){return this.destroyed=!0,delete this._data,this.removeAllListeners(),this}compose(e,t){throw new Error("Method not implemented.")}};const se=class{allowHalfOpen=!0;_destroy;constructor(e=new ne,t=new oe){Object.assign(this,e),Object.assign(this,t),this._destroy=function(...e){return function(...t){for(const s of e)s(...t)}}(e._destroy,t._destroy)}};const ae=(Object.assign(se.prototype,ne.prototype),Object.assign(se.prototype,oe.prototype),se);class A extends ae{__unenv__={};bufferSize=0;bytesRead=0;bytesWritten=0;connecting=!1;destroyed=!1;pending=!1;localAddress="";localPort=0;remoteAddress="";remoteFamily="";remotePort=0;autoSelectFamilyAttemptedAddresses=[];readyState="readOnly";constructor(e){super()}write(e,t,s){return!1}connect(e,t,s){return this}end(e,t,s){return this}setEncoding(e){return this}pause(){return this}resume(){return this}setTimeout(e,t){return this}setNoDelay(e){return this}setKeepAlive(e,t){return this}address(){return{}}unref(){return this}ref(){return this}destroySoon(){this.destroy()}resetAndDestroy(){const e=new Error("ERR_SOCKET_CLOSED");return e.code="ERR_SOCKET_CLOSED",this.destroy(e),this}}class y extends ne{aborted=!1;httpVersion="1.1";httpVersionMajor=1;httpVersionMinor=1;complete=!0;connection;socket;headers={};trailers={};method="GET";url="/";statusCode=200;statusMessage="";closed=!1;errored=null;readable=!1;constructor(e){super(),this.socket=this.connection=e||new A}get rawHeaders(){const e=this.headers,t=[];for(const s in e)if(Array.isArray(e[s]))for(const a of e[s])t.push(s,a);else t.push(s,e[s]);return t}get rawTrailers(){return[]}setTimeout(e,t){return this}get headersDistinct(){return p(this.headers)}get trailersDistinct(){return p(this.trailers)}}function p(e){const t={};for(const[s,a]of Object.entries(e))s&&(t[s]=(Array.isArray(a)?a:[a]).filter(Boolean));return t}class w extends oe{statusCode=200;statusMessage="";upgrading=!1;chunkedEncoding=!1;shouldKeepAlive=!1;useChunkedEncodingByDefault=!1;sendDate=!1;finished=!1;headersSent=!1;strictContentLength=!1;connection=null;socket=null;req;_headers={};constructor(e){super(),this.req=e}assignSocket(e){e._httpMessage=this,this.socket=e,this.connection=e,this.emit("socket",e),this._flush()}_flush(){this.flushHeaders()}detachSocket(e){}writeContinue(e){}writeHead(e,t,s){e&&(this.statusCode=e),"string"==typeof t&&(this.statusMessage=t,t=void 0);const a=s||t;if(a&&!Array.isArray(a))for(const e in a)this.setHeader(e,a[e]);return this.headersSent=!0,this}writeProcessing(){}setTimeout(e,t){return this}appendHeader(e,t){e=e.toLowerCase();const s=this._headers[e],a=[...Array.isArray(s)?s:[s],...Array.isArray(t)?t:[t]].filter(Boolean);return this._headers[e]=a.length>1?a:a[0],this}setHeader(e,t){return this._headers[e.toLowerCase()]=t,this}setHeaders(e){for(const[t,s]of Object.entries(e))this.setHeader(t,s);return this}getHeader(e){return this._headers[e.toLowerCase()]}getHeaders(){return this._headers}getHeaderNames(){return Object.keys(this._headers)}hasHeader(e){return e.toLowerCase()in this._headers}removeHeader(e){delete this._headers[e.toLowerCase()]}addTrailers(e){}flushHeaders(){}writeEarlyHints(e,t){"function"==typeof t&&t()}}const ie=(()=>{const n=function(){};return n.prototype=Object.create(null),n})();function S(e={}){if(e instanceof Headers)return e;const t=new Headers;for(const[s,a]of Object.entries(e))if(void 0!==a){if(Array.isArray(a)){for(const e of a)t.append(s,String(e));continue}t.set(s,String(a))}return t}const ce=new Set([101,204,205,304]);async function b(e,t){const s=new y,a=new w(s);let c;if(s.url=t.url?.toString()||"/",!s.url.startsWith("/")){const e=new URL(s.url);c=e.host,s.url=e.pathname+e.search+e.hash}s.method=t.method||"GET",s.headers=function(e={}){const t=new ie,s=Array.isArray(e)||function(e){return"function"==typeof e?.entries}(e)?e:Object.entries(e);for(const[e,a]of s)if(a){if(void 0===t[e]){t[e]=a;continue}t[e]=[...Array.isArray(t[e])?t[e]:[t[e]],...Array.isArray(a)?a:[a]]}return t}(t.headers||{}),s.headers.host||(s.headers.host=t.host||c||"localhost"),s.connection.encrypted=s.connection.encrypted||"https"===t.protocol,s.body=t.body||null,s.__unenv__=t.context,await e(s,a);let l=a._data;(ce.has(a.statusCode)||"HEAD"===s.method.toUpperCase())&&(l=null,delete a._headers["content-length"]);const u={status:a.statusCode,statusText:a.statusMessage,headers:a._headers,body:l};return s.destroy(),a.destroy(),u}function hasProp(e,t){try{return t in e}catch{return!1}}class H3Error extends Error{static __h3_error__=!0;statusCode=500;fatal=!1;unhandled=!1;statusMessage;data;cause;constructor(e,t={}){super(e,t),t.cause&&!this.cause&&(this.cause=t.cause)}toJSON(){const e={message:this.message,statusCode:sanitizeStatusCode(this.statusCode,500)};return this.statusMessage&&(e.statusMessage=sanitizeStatusMessage(this.statusMessage)),void 0!==this.data&&(e.data=this.data),e}}function createError$1(e){if("string"==typeof e)return new H3Error(e);if(isError(e))return e;const t=new H3Error(e.message??e.statusMessage??"",{cause:e.cause||e});if(hasProp(e,"stack"))try{Object.defineProperty(t,"stack",{get:()=>e.stack})}catch{try{t.stack=e.stack}catch{}}if(e.data&&(t.data=e.data),e.statusCode?t.statusCode=sanitizeStatusCode(e.statusCode,t.statusCode):e.status&&(t.statusCode=sanitizeStatusCode(e.status,t.statusCode)),e.statusMessage?t.statusMessage=e.statusMessage:e.statusText&&(t.statusMessage=e.statusText),t.statusMessage){const e=t.statusMessage;sanitizeStatusMessage(t.statusMessage)!==e&&console.warn("[h3] Please prefer using `message` for longer error messages instead of `statusMessage`. In the future, `statusMessage` will be sanitized by default.")}return void 0!==e.fatal&&(t.fatal=e.fatal),void 0!==e.unhandled&&(t.unhandled=e.unhandled),t}function isError(e){return!0===e?.constructor?.__h3_error__}function getQuery(e){return getQuery$1(e.path||"")}function getRequestHeaders(e){const t={};for(const s in e.node.req.headers){const a=e.node.req.headers[s];t[s]=Array.isArray(a)?a.filter(Boolean).join(", "):a}return t}function getRequestHeader(e,t){return getRequestHeaders(e)[t.toLowerCase()]}const le=getRequestHeader;function getRequestHost(e,t={}){if(t.xForwardedHost){const t=e.node.req.headers["x-forwarded-host"];if(t)return t}return e.node.req.headers.host||"localhost"}function getRequestProtocol(e,t={}){return!1!==t.xForwardedProto&&"https"===e.node.req.headers["x-forwarded-proto"]||e.node.req.connection?.encrypted?"https":"http"}function getRequestURL(e,t={}){const s=getRequestHost(e,t),a=getRequestProtocol(e,t),c=(e.node.req.originalUrl||e.path).replace(/^[/\\]+/g,"/");return new URL(c,`${a}://${s}`)}const ue=Symbol.for("h3RawBody"),de=["PATCH","POST","PUT","DELETE"];function readRawBody(e,t="utf8"){!function(e,t){if(!function(e,t){if("string"==typeof t){if(e.method===t)return!0}else if(t.includes(e.method))return!0;return!1}(e,t))throw createError$1({statusCode:405,statusMessage:"HTTP method is not allowed."})}(e,de);const s=e._requestBody||e.web?.request?.body||e.node.req[ue]||e.node.req.rawBody||e.node.req.body;if(s){const e=Promise.resolve(s).then((e=>Buffer.isBuffer(e)?e:"function"==typeof e.pipeTo?new Promise(((t,s)=>{const a=[];e.pipeTo(new WritableStream({write(e){a.push(e)},close(){t(Buffer.concat(a))},abort(e){s(e)}})).catch(s)})):"function"==typeof e.pipe?new Promise(((t,s)=>{const a=[];e.on("data",(e=>{a.push(e)})).on("end",(()=>{t(Buffer.concat(a))})).on("error",s)})):e.constructor===Object?Buffer.from(JSON.stringify(e)):e instanceof URLSearchParams?Buffer.from(e.toString()):e instanceof FormData?new Response(e).bytes().then((e=>Buffer.from(e))):Buffer.from(e)));return t?e.then((e=>e.toString(t))):e}if(!Number.parseInt(e.node.req.headers["content-length"]||"")&&!String(e.node.req.headers["transfer-encoding"]??"").split(",").map((e=>e.trim())).filter(Boolean).includes("chunked"))return Promise.resolve(void 0);const a=e.node.req[ue]=new Promise(((t,s)=>{const a=[];e.node.req.on("error",(e=>{s(e)})).on("data",(e=>{a.push(e)})).on("end",(()=>{t(Buffer.concat(a))}))}));return t?a.then((e=>e.toString(t))):a}function handleCacheHeaders(e,t){const s=["public",...t.cacheControls||[]];let a=!1;if(void 0!==t.maxAge&&s.push("max-age="+ +t.maxAge,"s-maxage="+ +t.maxAge),t.modifiedTime){const s=new Date(t.modifiedTime),c=e.node.req.headers["if-modified-since"];e.node.res.setHeader("last-modified",s.toUTCString()),c&&new Date(c)>=s&&(a=!0)}if(t.etag){e.node.res.setHeader("etag",t.etag);e.node.req.headers["if-none-match"]===t.etag&&(a=!0)}return e.node.res.setHeader("cache-control",s.join(", ")),!!a&&(e.node.res.statusCode=304,e.handled||e.node.res.end(),!0)}const pe={html:"text/html",json:"application/json"},he=/[^\u0009\u0020-\u007E]/g;function sanitizeStatusMessage(e=""){return e.replace(he,"")}function sanitizeStatusCode(e,t=200){return e?("string"==typeof e&&(e=Number.parseInt(e,10)),e<100||e>999?t:e):t}function getDistinctCookieKey(e,t){return[e,t.domain||"",t.path||"/"].join(";")}function parseCookies(e){return function(e){if("string"!=typeof e)throw new TypeError("argument str must be a string");const t={},s={},a=s.decode||decode;let c=0;for(;c<e.length;){const l=e.indexOf("=",c);if(-1===l)break;let u=e.indexOf(";",c);if(-1===u)u=e.length;else if(u<l){c=e.lastIndexOf(";",l-1)+1;continue}const d=e.slice(c,l).trim();if(!s?.filter||s?.filter(d)){if(void 0===t[d]){let s=e.slice(l+1,u).trim();34===s.codePointAt(0)&&(s=s.slice(1,-1)),t[d]=tryDecode(s,a)}c=u+1}else c=u+1}return t}(e.node.req.headers.cookie||"")}function getCookie(e,t){return parseCookies(e)[t]}function setCookie(e,t,s,a={}){a.path||(a={path:"/",...a});const c=serialize$2(t,s,a),l=splitCookiesString(e.node.res.getHeader("set-cookie"));if(0===l.length)return void e.node.res.setHeader("set-cookie",c);const u=getDistinctCookieKey(t,a);e.node.res.removeHeader("set-cookie");for(const t of l){const s=parseSetCookie(t);getDistinctCookieKey(s.name,s)!==u&&e.node.res.appendHeader("set-cookie",t)}e.node.res.appendHeader("set-cookie",c)}function deleteCookie(e,t,s){setCookie(e,t,"",{...s,maxAge:0})}function splitCookiesString(e){if(Array.isArray(e))return e.flatMap((e=>splitCookiesString(e)));if("string"!=typeof e)return[];const t=[];let s,a,c,l,u,d=0;const skipWhitespace=()=>{for(;d<e.length&&/\s/.test(e.charAt(d));)d+=1;return d<e.length};for(;d<e.length;){for(s=d,u=!1;skipWhitespace();)if(a=e.charAt(d),","===a){for(c=d,d+=1,skipWhitespace(),l=d;d<e.length&&(a=e.charAt(d),"="!==a&&";"!==a&&","!==a);)d+=1;d<e.length&&"="===e.charAt(d)?(u=!0,d=l,t.push(e.slice(s,c)),s=d):d=c+1}else d+=1;(!u||d>=e.length)&&t.push(e.slice(s))}return t}const fe="undefined"==typeof setImmediate?e=>e():setImmediate;function send(e,t,s){return s&&function(e,t){t&&304!==e.node.res.statusCode&&!e.node.res.getHeader("content-type")&&e.node.res.setHeader("content-type",t)}(e,s),new Promise((s=>{fe((()=>{e.handled||e.node.res.end(t),s()}))}))}function setResponseStatus(e,t,s){t&&(e.node.res.statusCode=sanitizeStatusCode(t,e.node.res.statusCode)),s&&(e.node.res.statusMessage=sanitizeStatusMessage(s))}function getResponseStatus(e){return e.node.res.statusCode}function getResponseStatusText(e){return e.node.res.statusMessage}function sendRedirect(e,t,s=302){e.node.res.statusCode=sanitizeStatusCode(s,e.node.res.statusCode),e.node.res.setHeader("location",t);return send(e,`<!DOCTYPE html><html><head><meta http-equiv="refresh" content="0; url=${t.replace(/"/g,"%22")}"></head></html>`,pe.html)}function setResponseHeaders(e,t){for(const[s,a]of Object.entries(t))e.node.res.setHeader(s,a)}const me=setResponseHeaders;function setResponseHeader(e,t,s){e.node.res.setHeader(t,s)}const ge=setResponseHeader;function sendStream(e,t){if(!t||"object"!=typeof t)throw new Error("[h3] Invalid stream provided.");if(e.node.res._data=t,!e.node.res.socket)return e._handled=!0,Promise.resolve();if(hasProp(t,"pipeTo")&&"function"==typeof t.pipeTo)return t.pipeTo(new WritableStream({write(t){e.node.res.write(t)}})).then((()=>{e.node.res.end()}));if(hasProp(t,"pipe")&&"function"==typeof t.pipe)return new Promise(((s,a)=>{t.pipe(e.node.res),t.on&&(t.on("end",(()=>{e.node.res.end(),s()})),t.on("error",(e=>{a(e)}))),e.node.res.on("close",(()=>{t.abort&&t.abort()}))}));throw new Error("[h3] Invalid or incompatible stream provided.")}function sendWebResponse(e,t){for(const[s,a]of t.headers)"set-cookie"===s?e.node.res.appendHeader(s,splitCookiesString(a)):e.node.res.setHeader(s,a);if(t.status&&(e.node.res.statusCode=sanitizeStatusCode(t.status,e.node.res.statusCode)),t.statusText&&(e.node.res.statusMessage=sanitizeStatusMessage(t.statusText)),t.redirected&&e.node.res.setHeader("location",t.url),t.body)return sendStream(e,t.body);e.node.res.end()}const ye=new Set(["PATCH","POST","PUT","DELETE"]),we=new Set(["transfer-encoding","accept-encoding","connection","keep-alive","upgrade","expect","host","accept"]);async function proxyRequest(e,t,s={}){let a,c;ye.has(e.method)&&(s.streamRequest?(a=function(e){if(!de.includes(e.method))return;const t=e.web?.request?.body||e._requestBody;return t||(ue in e.node.req||"rawBody"in e.node.req||"body"in e.node.req||"__unenv__"in e.node.req?new ReadableStream({async start(t){const s=await readRawBody(e,!1);s&&t.enqueue(s),t.close()}}):new ReadableStream({start:t=>{e.node.req.on("data",(e=>{t.enqueue(e)})),e.node.req.on("end",(()=>{t.close()})),e.node.req.on("error",(e=>{t.error(e)}))}}))}(e),c="half"):a=await readRawBody(e,!1).catch((()=>{})));const l=s.fetchOptions?.method||e.method,u=function(e,...t){const s=t.filter(Boolean);if(0===s.length)return e;const a=new Headers(e);for(const e of s){const t=Array.isArray(e)?e:"function"==typeof e.entries?e.entries():Object.entries(e);for(const[e,s]of t)void 0!==s&&a.set(e,s)}return a}(getProxyRequestHeaders(e,{host:t.startsWith("/")}),s.fetchOptions?.headers,s.headers);return async function(e,t,s={}){let a;try{a=await _getFetch(s.fetch)(t,{headers:s.headers,ignoreResponseError:!0,...s.fetchOptions})}catch(e){throw createError$1({status:502,statusMessage:"Bad Gateway",cause:e})}e.node.res.statusCode=sanitizeStatusCode(a.status,e.node.res.statusCode),e.node.res.statusMessage=sanitizeStatusMessage(a.statusText);const c=[];for(const[t,s]of a.headers.entries())"content-encoding"!==t&&"content-length"!==t&&("set-cookie"!==t?e.node.res.setHeader(t,s):c.push(...splitCookiesString(s)));c.length>0&&e.node.res.setHeader("set-cookie",c.map((e=>(s.cookieDomainRewrite&&(e=rewriteCookieProperty(e,s.cookieDomainRewrite,"domain")),s.cookiePathRewrite&&(e=rewriteCookieProperty(e,s.cookiePathRewrite,"path")),e))));s.onResponse&&await s.onResponse(e,a);if(void 0!==a._data)return a._data;if(e.handled)return;if(!1===s.sendStream){const t=new Uint8Array(await a.arrayBuffer());return e.node.res.end(t)}if(a.body)for await(const t of a.body)e.node.res.write(t);return e.node.res.end()}(e,t,{...s,fetchOptions:{method:l,body:a,duplex:c,...s.fetchOptions,headers:u}})}function getProxyRequestHeaders(e,t){const s=Object.create(null),a=getRequestHeaders(e);for(const e in a)(!we.has(e)||"host"===e&&t?.host)&&(s[e]=a[e]);return s}function fetchWithEvent(e,t,s,a){return _getFetch(a?.fetch)(t,{...s,context:s?.context||e.context,headers:{...getProxyRequestHeaders(e,{host:"string"==typeof t&&t.startsWith("/")}),...s?.headers}})}function _getFetch(e){if(e)return e;if(globalThis.fetch)return globalThis.fetch;throw new Error("fetch is not available. Try importing `node-fetch-native/polyfill` for Node.js.")}function rewriteCookieProperty(e,t,s){const a="string"==typeof t?{"*":t}:t;return e.replace(new RegExp(`(;\\s*${s}=)([^;]+)`,"gi"),((e,t,s)=>{let c;if(s in a)c=a[s];else{if(!("*"in a))return e;c=a["*"]}return c?t+c:""}))}class H3Event{__is_event__=!0;node;web;context={};_method;_path;_headers;_requestBody;_handled=!1;_onBeforeResponseCalled;_onAfterResponseCalled;constructor(e,t){this.node={req:e,res:t}}get method(){return this._method||(this._method=(this.node.req.method||"GET").toUpperCase()),this._method}get path(){return this._path||this.node.req.url||"/"}get headers(){return this._headers||(this._headers=function(e){const t=new Headers;for(const[s,a]of Object.entries(e))if(Array.isArray(a))for(const e of a)t.append(s,e);else a&&t.set(s,a);return t}(this.node.req.headers)),this._headers}get handled(){return this._handled||this.node.res.writableEnded||this.node.res.headersSent}respondWith(e){return Promise.resolve(e).then((e=>sendWebResponse(this,e)))}toString(){return`[${this.method}] ${this.path}`}toJSON(){return this.toString()}get req(){return this.node.req}get res(){return this.node.res}}function isEvent(e){return hasProp(e,"__is_event__")}function createEvent(e,t){return new H3Event(e,t)}function defineEventHandler(e){if("function"==typeof e)return e.__is_handler__=!0,e;const t={onRequest:_normalizeArray(e.onRequest),onBeforeResponse:_normalizeArray(e.onBeforeResponse)},_handler=s=>async function(e,t,s){if(s.onRequest)for(const t of s.onRequest)if(await t(e),e.handled)return;const a=await t(e),c={body:a};if(s.onBeforeResponse)for(const t of s.onBeforeResponse)await t(e,c);return c.body}(s,e.handler,t);return _handler.__is_handler__=!0,_handler.__resolve__=e.handler.__resolve__,_handler.__websocket__=e.websocket,_handler}function _normalizeArray(e){return e?Array.isArray(e)?e:[e]:void 0}const be=defineEventHandler;function isEventHandler(e){return hasProp(e,"__is_handler__")}function toEventHandler(e,t,s){return isEventHandler(e)||console.warn("[h3] Implicit event handler conversion is deprecated. Use `eventHandler()` or `fromNodeMiddleware()` to define event handlers.",s&&"/"!==s?`\n     Route: ${s}`:"",`\n     Handler: ${e}`),e}const lazyEventHandler=function(e){let t,s;const resolveHandler=()=>s?Promise.resolve(s):(t||(t=Promise.resolve(e()).then((e=>{const t=e.default||e;if("function"!=typeof t)throw new TypeError("Invalid lazy handler result. It should be a function:",t);return s={handler:toEventHandler(e.default||e)},s}))),t),a=be((e=>s?s.handler(e):resolveHandler().then((t=>t.handler(e)))));return a.__resolve__=resolveHandler,a};function createApp(e={}){const t=[],s=function(e,t){const s=t.debug?2:void 0;return be((async a=>{a.node.req.originalUrl=a.node.req.originalUrl||a.node.req.url||"/";const c=a._path||a.node.req.url||"/";let l;t.onRequest&&await t.onRequest(a);for(const u of e){if(u.route.length>1){if(!c.startsWith(u.route))continue;l=c.slice(u.route.length)||"/"}else l=c;if(u.match&&!u.match(l,a))continue;a._path=l,a.node.req.url=l;const e=await u.handler(a),d=void 0===e?void 0:await e;if(void 0!==d){const e={body:d};return t.onBeforeResponse&&(a._onBeforeResponseCalled=!0,await t.onBeforeResponse(a,e)),await handleHandlerResponse(a,e.body,s),void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,e)))}if(a.handled)return void(t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0)))}if(!a.handled)throw createError$1({statusCode:404,statusMessage:`Cannot find any path matching ${a.path||"/"}.`});t.onAfterResponse&&(a._onAfterResponseCalled=!0,await t.onAfterResponse(a,void 0))}))}(t,e),a=function(e){return async t=>{let s;for(const a of e){if("/"===a.route&&!a.handler.__resolve__)continue;if(!t.startsWith(a.route))continue;if(s=t.slice(a.route.length)||"/",a.match&&!a.match(s,void 0))continue;let e={route:a.route,handler:a.handler};if(e.handler.__resolve__){const t=await e.handler.__resolve__(s);if(!t)continue;e={...e,...t,route:joinURL(e.route||"/",t.route||"/")}}return e}}}(t);s.__resolve__=a;const c=function(e){let t;return()=>(t||(t=e()),t)}((()=>{return t=a,{...e.websocket,async resolve(e){const s=e.request?.url||e.url||"/",{pathname:a}="string"==typeof s?parseURL(s):s,c=await t(a);return c?.handler?.__websocket__||{}}};var t})),l={use:(e,t,s)=>use(l,e,t,s),resolve:a,handler:s,stack:t,options:e,get websocket(){return c()}};return l}function use(e,t,s,a){if(Array.isArray(t))for(const c of t)use(e,c,s,a);else if(Array.isArray(s))for(const c of s)use(e,t,c,a);else"string"==typeof t?e.stack.push(normalizeLayer({...a,route:t,handler:s})):"function"==typeof t?e.stack.push(normalizeLayer({...s,handler:t})):e.stack.push(normalizeLayer({...t}));return e}function normalizeLayer(e){let t=e.handler;return t.handler&&(t=t.handler),e.lazy?t=lazyEventHandler(t):isEventHandler(t)||(t=toEventHandler(t,0,e.route)),{route:withoutTrailingSlash(e.route),match:e.match,handler:t}}function handleHandlerResponse(e,t,s){if(null===t)return function(e,t){if(e.handled)return;t||200===e.node.res.statusCode||(t=e.node.res.statusCode);const s=sanitizeStatusCode(t,204);204===s&&e.node.res.removeHeader("content-length"),e.node.res.writeHead(s),e.node.res.end()}(e);if(t){if(a=t,"undefined"!=typeof Response&&a instanceof Response)return sendWebResponse(e,t);if(function(e){if(!e||"object"!=typeof e)return!1;if("function"==typeof e.pipe){if("function"==typeof e._read)return!0;if("function"==typeof e.abort)return!0}return"function"==typeof e.pipeTo}(t))return sendStream(e,t);if(t.buffer)return send(e,t);if(t.arrayBuffer&&"function"==typeof t.arrayBuffer)return t.arrayBuffer().then((s=>send(e,Buffer.from(s),t.type)));if(t instanceof Error)throw createError$1(t);if("function"==typeof t.end)return!0}var a;const c=typeof t;if("string"===c)return send(e,t,pe.html);if("object"===c||"boolean"===c||"number"===c)return send(e,JSON.stringify(t,void 0,s),pe.json);if("bigint"===c)return send(e,t.toString(),pe.json);throw createError$1({statusCode:500,statusMessage:`[h3] Cannot send ${c} as response.`})}const ve=["connect","delete","get","head","options","post","put","trace","patch"];function toNodeListener(e){return async function(t,s){const a=createEvent(t,s);try{await e.handler(a)}catch(t){const s=createError$1(t);if(isError(t)||(s.unhandled=!0),setResponseStatus(a,s.statusCode,s.statusMessage),e.options.onError&&await e.options.onError(s,a),a.handled)return;(s.unhandled||s.fatal)&&console.error("[h3]",s.fatal?"[fatal]":"[unhandled]",s),e.options.onBeforeResponse&&!a._onBeforeResponseCalled&&await e.options.onBeforeResponse(a,{body:s}),await function(e,t,s){if(e.handled)return;const a=isError(t)?t:createError$1(t),c={statusCode:a.statusCode,statusMessage:a.statusMessage,stack:[],data:a.data};if(s&&(c.stack=(a.stack||"").split("\n").map((e=>e.trim()))),e.handled)return;setResponseStatus(e,Number.parseInt(a.statusCode),a.statusMessage),e.node.res.setHeader("content-type",pe.json),e.node.res.end(JSON.stringify(c,void 0,2))}(a,s,!!e.options.debug),e.options.onAfterResponse&&!a._onAfterResponseCalled&&await e.options.onAfterResponse(a,{body:s})}}}function flatHooks(e,t={},s){for(const a in e){const c=e[a],l=s?`${s}:${a}`:a;"object"==typeof c&&null!==c?flatHooks(c,t,l):"function"==typeof c&&(t[l]=c)}return t}const _e={run:e=>e()},xe=void 0!==console.createTask?console.createTask:()=>_e;function serialTaskCaller(e,t){const s=t.shift(),a=xe(s);return e.reduce(((e,s)=>e.then((()=>a.run((()=>s(...t)))))),Promise.resolve())}function parallelTaskCaller(e,t){const s=t.shift(),a=xe(s);return Promise.all(e.map((e=>a.run((()=>e(...t))))))}function callEachWith(e,t){for(const s of[...e])s(t)}class Hookable{constructor(){this._hooks={},this._before=void 0,this._after=void 0,this._deprecatedMessages=void 0,this._deprecatedHooks={},this.hook=this.hook.bind(this),this.callHook=this.callHook.bind(this),this.callHookWith=this.callHookWith.bind(this)}hook(e,t,s={}){if(!e||"function"!=typeof t)return()=>{};const a=e;let c;for(;this._deprecatedHooks[e];)c=this._deprecatedHooks[e],e=c.to;if(c&&!s.allowDeprecated){let e=c.message;e||(e=`${a} hook has been deprecated`+(c.to?`, please use ${c.to}`:"")),this._deprecatedMessages||(this._deprecatedMessages=new Set),this._deprecatedMessages.has(e)||(console.warn(e),this._deprecatedMessages.add(e))}if(!t.name)try{Object.defineProperty(t,"name",{get:()=>"_"+e.replace(/\W+/g,"_")+"_hook_cb",configurable:!0})}catch{}return this._hooks[e]=this._hooks[e]||[],this._hooks[e].push(t),()=>{t&&(this.removeHook(e,t),t=void 0)}}hookOnce(e,t){let s,_function=(...e)=>("function"==typeof s&&s(),s=void 0,_function=void 0,t(...e));return s=this.hook(e,_function),s}removeHook(e,t){if(this._hooks[e]){const s=this._hooks[e].indexOf(t);-1!==s&&this._hooks[e].splice(s,1),0===this._hooks[e].length&&delete this._hooks[e]}}deprecateHook(e,t){this._deprecatedHooks[e]="string"==typeof t?{to:t}:t;const s=this._hooks[e]||[];delete this._hooks[e];for(const t of s)this.hook(e,t)}deprecateHooks(e){Object.assign(this._deprecatedHooks,e);for(const t in e)this.deprecateHook(t,e[t])}addHooks(e){const t=flatHooks(e),s=Object.keys(t).map((e=>this.hook(e,t[e])));return()=>{for(const e of s.splice(0,s.length))e()}}removeHooks(e){const t=flatHooks(e);for(const e in t)this.removeHook(e,t[e])}removeAllHooks(){for(const e in this._hooks)delete this._hooks[e]}callHook(e,...t){return t.unshift(e),this.callHookWith(serialTaskCaller,e,...t)}callHookParallel(e,...t){return t.unshift(e),this.callHookWith(parallelTaskCaller,e,...t)}callHookWith(e,t,...s){const a=this._before||this._after?{name:t,args:s,context:{}}:void 0;this._before&&callEachWith(this._before,a);const c=e(t in this._hooks?[...this._hooks[t]]:[],s);return c instanceof Promise?c.finally((()=>{this._after&&a&&callEachWith(this._after,a)})):(this._after&&a&&callEachWith(this._after,a),c)}beforeEach(e){return this._before=this._before||[],this._before.push(e),()=>{if(void 0!==this._before){const t=this._before.indexOf(e);-1!==t&&this._before.splice(t,1)}}}afterEach(e){return this._after=this._after||[],this._after.push(e),()=>{if(void 0!==this._after){const t=this._after.indexOf(e);-1!==t&&this._after.splice(t,1)}}}}function createHooks(){return new Hookable}const Se=globalThis.Headers,Re=globalThis.AbortController,ke=globalThis.fetch||(()=>{throw new Error("[node-fetch-native] Failed to fetch: `globalThis.fetch` is not available!")});class FetchError extends Error{constructor(e,t){super(e,t),this.name="FetchError",t?.cause&&!this.cause&&(this.cause=t.cause)}}const $e=new Set(Object.freeze(["PATCH","POST","PUT","DELETE"]));function isPayloadMethod(e="GET"){return $e.has(e.toUpperCase())}const Ce=new Set(["image/svg","application/xml","application/xhtml","application/html"]),Ee=/^application\/(?:[\w!#$%&*.^`~-]*\+)?json(;.+)?$/i;function resolveFetchOptions(e,t,s,a){const c=function(e,t,s){if(!t)return new s(e);const a=new s(t);if(e)for(const[t,c]of Symbol.iterator in e||Array.isArray(e)?e:new s(e))a.set(t,c);return a}(t?.headers??e?.headers,s?.headers,a);let l;return(s?.query||s?.params||t?.params||t?.query)&&(l={...s?.params,...s?.query,...t?.params,...t?.query}),{...s,...t,query:l,params:l,headers:c}}async function callHooks(e,t){if(t)if(Array.isArray(t))for(const s of t)await s(e);else await t(e)}const Ae=new Set([408,409,425,429,500,502,503,504]),je=new Set([101,204,205,304]);function createFetch(e={}){const{fetch:t=globalThis.fetch,Headers:s=globalThis.Headers,AbortController:a=globalThis.AbortController}=e;async function onError(e){const t=e.error&&"AbortError"===e.error.name&&!e.options.timeout||!1;if(!1!==e.options.retry&&!t){let t;t="number"==typeof e.options.retry?e.options.retry:isPayloadMethod(e.options.method)?0:1;const s=e.response&&e.response.status||500;if(t>0&&(Array.isArray(e.options.retryStatusCodes)?e.options.retryStatusCodes.includes(s):Ae.has(s))){const s="function"==typeof e.options.retryDelay?e.options.retryDelay(e):e.options.retryDelay||0;return s>0&&await new Promise((e=>setTimeout(e,s))),$fetchRaw(e.request,{...e.options,retry:t-1})}}const s=function(e){const t=e.error?.message||e.error?.toString()||"",s=e.request?.method||e.options?.method||"GET",a=e.request?.url||String(e.request)||"/",c=`[${s}] ${JSON.stringify(a)}`,l=e.response?`${e.response.status} ${e.response.statusText}`:"<no response>",u=new FetchError(`${c}: ${l}${t?` ${t}`:""}`,e.error?{cause:e.error}:void 0);for(const t of["request","options","response"])Object.defineProperty(u,t,{get:()=>e[t]});for(const[t,s]of[["data","_data"],["status","status"],["statusCode","status"],["statusText","statusText"],["statusMessage","statusText"]])Object.defineProperty(u,t,{get:()=>e.response&&e.response[s]});return u}(e);throw Error.captureStackTrace&&Error.captureStackTrace(s,$fetchRaw),s}const $fetchRaw=async function(c,l={}){const u={request:c,options:resolveFetchOptions(c,l,e.defaults,s),response:void 0,error:void 0};let d;if(u.options.method&&(u.options.method=u.options.method.toUpperCase()),u.options.onRequest&&await callHooks(u,u.options.onRequest),"string"==typeof u.request&&(u.options.baseURL&&(u.request=withBase(u.request,u.options.baseURL)),u.options.query&&(u.request=withQuery(u.request,u.options.query),delete u.options.query),"query"in u.options&&delete u.options.query,"params"in u.options&&delete u.options.params),u.options.body&&isPayloadMethod(u.options.method)&&(!function(e){if(void 0===e)return!1;const t=typeof e;return"string"===t||"number"===t||"boolean"===t||null===t||"object"===t&&(!!Array.isArray(e)||!e.buffer&&(e.constructor&&"Object"===e.constructor.name||"function"==typeof e.toJSON))}(u.options.body)?("pipeTo"in u.options.body&&"function"==typeof u.options.body.pipeTo||"function"==typeof u.options.body.pipe)&&("duplex"in u.options||(u.options.duplex="half")):(u.options.body="string"==typeof u.options.body?u.options.body:JSON.stringify(u.options.body),u.options.headers=new s(u.options.headers||{}),u.options.headers.has("content-type")||u.options.headers.set("content-type","application/json"),u.options.headers.has("accept")||u.options.headers.set("accept","application/json"))),!u.options.signal&&u.options.timeout){const e=new a;d=setTimeout((()=>{const t=new Error("[TimeoutError]: The operation was aborted due to timeout");t.name="TimeoutError",t.code=23,e.abort(t)}),u.options.timeout),u.options.signal=e.signal}try{u.response=await t(u.request,u.options)}catch(e){return u.error=e,u.options.onRequestError&&await callHooks(u,u.options.onRequestError),await onError(u)}finally{d&&clearTimeout(d)}if((u.response.body||u.response._bodyInit)&&!je.has(u.response.status)&&"HEAD"!==u.options.method){const e=(u.options.parseResponse?"json":u.options.responseType)||function(e=""){if(!e)return"json";const t=e.split(";").shift()||"";return Ee.test(t)?"json":Ce.has(t)||t.startsWith("text/")?"text":"blob"}(u.response.headers.get("content-type")||"");switch(e){case"json":{const e=await u.response.text(),t=u.options.parseResponse||destr;u.response._data=t(e);break}case"stream":u.response._data=u.response.body||u.response._bodyInit;break;default:u.response._data=await u.response[e]()}}return u.options.onResponse&&await callHooks(u,u.options.onResponse),!u.options.ignoreResponseError&&u.response.status>=400&&u.response.status<600?(u.options.onResponseError&&await callHooks(u,u.options.onResponseError),await onError(u)):u.response},$fetch=async function(e,t){return(await $fetchRaw(e,t))._data};return $fetch.raw=$fetchRaw,$fetch.native=(...e)=>t(...e),$fetch.create=(t={},s={})=>createFetch({...e,...s,defaults:{...e.defaults,...s.defaults,...t}}),$fetch}const Te=globalThis.fetch?(...e)=>globalThis.fetch(...e):function(){if(!JSON.parse(e.env.FETCH_KEEP_ALIVE||"false"))return ke;const a={keepAlive:!0},c=new t.Agent(a),l=new s.Agent(a),u={agent:e=>"http:"===e.protocol?c:l};return function(e,t){return ke(e,{...u,...t})}}(),Oe=globalThis.Headers||Se,Pe=globalThis.AbortController||Re,He=createFetch({fetch:Te,Headers:Oe,AbortController:Pe});function asyncCall(e,...t){try{return(s=e(...t))&&"function"==typeof s.then?s:Promise.resolve(s)}catch(e){return Promise.reject(e)}var s}function stringify(e){if(function(e){const t=typeof e;return null===e||"object"!==t&&"function"!==t}(e))return String(e);if(function(e){const t=Object.getPrototypeOf(e);return!t||t.isPrototypeOf(Object)}(e)||Array.isArray(e))return JSON.stringify(e);if("function"==typeof e.toJSON)return stringify(e.toJSON());throw new Error("[unstorage] Cannot stringify value!")}const Le="base64:";function serializeRaw(e){return"string"==typeof e?e:Le+function(e){if(globalThis.Buffer)return Buffer.from(e).toString("base64");return globalThis.btoa(String.fromCodePoint(...e))}(e)}function deserializeRaw(e){return"string"!=typeof e?e:e.startsWith(Le)?function(e){if(globalThis.Buffer)return Buffer.from(e,"base64");return Uint8Array.from(globalThis.atob(e),(e=>e.codePointAt(0)))}(e.slice(7)):e}const Ne=["has","hasItem","get","getItem","getItemRaw","set","setItem","setItemRaw","del","remove","removeItem","getMeta","setMeta","removeMeta","getKeys","clear","mount","unmount"];function normalizeKey$1(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""}function joinKeys(...e){return normalizeKey$1(e.join(":"))}function normalizeBaseKey(e){return(e=normalizeKey$1(e))?e+":":""}const memory=()=>{const e=new Map;return{name:"memory",getInstance:()=>e,hasItem:t=>e.has(t),getItem:t=>e.get(t)??null,getItemRaw:t=>e.get(t)??null,setItem(t,s){e.set(t,s)},setItemRaw(t,s){e.set(t,s)},removeItem(t){e.delete(t)},getKeys:()=>[...e.keys()],clear(){e.clear()},dispose(){e.clear()}}};function watch(e,t,s){return e.watch?e.watch(((e,a)=>t(e,s+a))):()=>{}}async function dispose(e){"function"==typeof e.dispose&&await asyncCall(e.dispose)}const Ue={},normalizeKey=function(e){return e&&e.split("?")[0]?.replace(/[/\\]/g,":").replace(/:+/g,":").replace(/^:|:$/g,"")||""},Ie={getKeys:()=>Promise.resolve(Object.keys(Ue)),hasItem:e=>(e=normalizeKey(e),Promise.resolve(e in Ue)),getItem:e=>(e=normalizeKey(e),Promise.resolve(Ue[e]?Ue[e].import():null)),getMeta:e=>(e=normalizeKey(e),Promise.resolve(Ue[e]?Ue[e].meta:{}))};function createError(e,t,s){const a=new Error(`[unstorage] [${e}] ${t}`,s);return Error.captureStackTrace&&Error.captureStackTrace(a,createError),a}function ignoreNotfound(e){return"ENOENT"===e.code||"EISDIR"===e.code?null:e}function ignoreExists(e){return"EEXIST"===e.code?null:e}async function writeFile(e,t,s){return await ensuredir(E(e)),k.writeFile(e,t,s)}function readFile(e,t){return k.readFile(e,t).catch(ignoreNotfound)}function readdir(e){return k.readdir(e,{withFileTypes:!0}).catch(ignoreNotfound).then((e=>e||[]))}async function ensuredir(e){$(e)||(await ensuredir(E(e)).catch(ignoreExists),await k.mkdir(e).catch(ignoreExists))}async function readdirRecursive(e,t,s){if(t&&t(e))return[];const a=await readdir(e),c=[];return await Promise.all(a.map((async a=>{const l=C(e,a.name);if(a.isDirectory()){if(void 0===s||s>0){const e=await readdirRecursive(l,t,void 0===s?void 0:s-1);c.push(...e.map((e=>a.name+"/"+e)))}}else t&&t(a.name)||c.push(a.name)}))),c}async function rmRecursive(e){const t=await readdir(e);await Promise.all(t.map((t=>{const s=C(e,t.name);return t.isDirectory()?rmRecursive(s).then((()=>k.rmdir(s))):k.unlink(s)})))}const Me=/\.\.:|\.\.$/,qe="fs-lite",unstorage_47drivers_47fs_45lite=(e={})=>{if(!e.base)throw t=qe,s="base",Array.isArray(s)?createError(t,`Missing some of the required options ${s.map((e=>"`"+e+"`")).join(", ")}`):createError(t,`Missing required option \`${s}\`.`);var t,s;e.base=C(e.base);const r=t=>{if(Me.test(t))throw createError(qe,`Invalid key: ${JSON.stringify(t)}. It should not contain .. segments`);return j(e.base,t.replace(/:/g,"/"))};return{name:qe,options:e,flags:{maxDepth:!0},hasItem:e=>$(r(e)),getItem:e=>readFile(r(e),"utf8"),getItemRaw:e=>readFile(r(e)),async getMeta(e){const{atime:t,mtime:s,size:a,birthtime:c,ctime:l}=await k.stat(r(e)).catch((()=>({})));return{atime:t,mtime:s,size:a,birthtime:c,ctime:l}},setItem(t,s){if(!e.readOnly)return writeFile(r(t),s,"utf8")},setItemRaw(t,s){if(!e.readOnly)return writeFile(r(t),s)},removeItem(t){var s;if(!e.readOnly)return s=r(t),k.unlink(s).catch(ignoreNotfound)},getKeys:(t,s)=>readdirRecursive(r("."),e.ignore,s?.maxDepth),async clear(){e.readOnly||e.noClear||await rmRecursive(r("."))}}},Be=function(e={}){const t={mounts:{"":e.driver||memory()},mountpoints:[""],watching:!1,watchListeners:[],unwatch:{}},getMount=e=>{for(const s of t.mountpoints)if(e.startsWith(s))return{base:s,relativeKey:e.slice(s.length),driver:t.mounts[s]};return{base:"",relativeKey:e,driver:t.mounts[""]}},getMounts=(e,s)=>t.mountpoints.filter((t=>t.startsWith(e)||s&&e.startsWith(t))).map((s=>({relativeBase:e.length>s.length?e.slice(s.length):void 0,mountpoint:s,driver:t.mounts[s]}))),onChange=(e,s)=>{if(t.watching){s=normalizeKey$1(s);for(const a of t.watchListeners)a(e,s)}},stopWatch=async()=>{if(t.watching){for(const e in t.unwatch)await t.unwatch[e]();t.unwatch={},t.watching=!1}},runBatch=(e,t,s)=>{const a=new Map,getBatch=e=>{let t=a.get(e.base);return t||(t={driver:e.driver,base:e.base,items:[]},a.set(e.base,t)),t};for(const s of e){const e="string"==typeof s,a=normalizeKey$1(e?s:s.key),c=e?void 0:s.value,l=e||!s.options?t:{...t,...s.options},u=getMount(a);getBatch(u).items.push({key:a,value:c,relativeKey:u.relativeKey,options:l})}return Promise.all([...a.values()].map((e=>s(e)))).then((e=>e.flat()))},s={hasItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);return asyncCall(a.hasItem,s,t)},getItem(e,t={}){e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);return asyncCall(a.getItem,s,t).then((e=>destr(e)))},getItems:(e,t={})=>runBatch(e,t,(e=>e.driver.getItems?asyncCall(e.driver.getItems,e.items.map((e=>({key:e.relativeKey,options:e.options}))),t).then((t=>t.map((t=>({key:joinKeys(e.base,t.key),value:destr(t.value)}))))):Promise.all(e.items.map((t=>asyncCall(e.driver.getItem,t.relativeKey,t.options).then((e=>({key:t.key,value:destr(e)})))))))),getItemRaw(e,t={}){e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);return a.getItemRaw?asyncCall(a.getItemRaw,s,t):asyncCall(a.getItem,s,t).then((e=>deserializeRaw(e)))},async setItem(e,t,a={}){if(void 0===t)return s.removeItem(e);e=normalizeKey$1(e);const{relativeKey:c,driver:l}=getMount(e);l.setItem&&(await asyncCall(l.setItem,c,stringify(t),a),l.watch||onChange("update",e))},async setItems(e,t){await runBatch(e,t,(async e=>{if(e.driver.setItems)return asyncCall(e.driver.setItems,e.items.map((e=>({key:e.relativeKey,value:stringify(e.value),options:e.options}))),t);e.driver.setItem&&await Promise.all(e.items.map((t=>asyncCall(e.driver.setItem,t.relativeKey,stringify(t.value),t.options))))}))},async setItemRaw(e,t,a={}){if(void 0===t)return s.removeItem(e,a);e=normalizeKey$1(e);const{relativeKey:c,driver:l}=getMount(e);if(l.setItemRaw)await asyncCall(l.setItemRaw,c,t,a);else{if(!l.setItem)return;await asyncCall(l.setItem,c,serializeRaw(t),a)}l.watch||onChange("update",e)},async removeItem(e,t={}){"boolean"==typeof t&&(t={removeMeta:t}),e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e);a.removeItem&&(await asyncCall(a.removeItem,s,t),(t.removeMeta||t.removeMata)&&await asyncCall(a.removeItem,s+"$",t),a.watch||onChange("remove",e))},async getMeta(e,t={}){"boolean"==typeof t&&(t={nativeOnly:t}),e=normalizeKey$1(e);const{relativeKey:s,driver:a}=getMount(e),c=Object.create(null);if(a.getMeta&&Object.assign(c,await asyncCall(a.getMeta,s,t)),!t.nativeOnly){const e=await asyncCall(a.getItem,s+"$",t).then((e=>destr(e)));e&&"object"==typeof e&&("string"==typeof e.atime&&(e.atime=new Date(e.atime)),"string"==typeof e.mtime&&(e.mtime=new Date(e.mtime)),Object.assign(c,e))}return c},setMeta(e,t,s={}){return this.setItem(e+"$",t,s)},removeMeta(e,t={}){return this.removeItem(e+"$",t)},async getKeys(e,t={}){e=normalizeBaseKey(e);const s=getMounts(e,!0);let a=[];const c=[];let l=!0;for(const e of s){e.driver.flags?.maxDepth||(l=!1);const s=await asyncCall(e.driver.getKeys,e.relativeBase,t);for(const t of s){const s=e.mountpoint+normalizeKey$1(t);a.some((e=>s.startsWith(e)))||c.push(s)}a=[e.mountpoint,...a.filter((t=>!t.startsWith(e.mountpoint)))]}const u=void 0!==t.maxDepth&&!l;return c.filter((s=>(!u||function(e,t){if(void 0===t)return!0;let s=0,a=e.indexOf(":");for(;a>-1;)s++,a=e.indexOf(":",a+1);return s<=t}(s,t.maxDepth))&&function(e,t){return t?e.startsWith(t)&&"$"!==e[e.length-1]:"$"!==e[e.length-1]}(s,e)))},async clear(e,t={}){e=normalizeBaseKey(e),await Promise.all(getMounts(e,!1).map((async e=>{if(e.driver.clear)return asyncCall(e.driver.clear,e.relativeBase,t);if(e.driver.removeItem){const s=await e.driver.getKeys(e.relativeBase||"",t);return Promise.all(s.map((s=>e.driver.removeItem(s,t))))}})))},async dispose(){await Promise.all(Object.values(t.mounts).map((e=>dispose(e))))},watch:async e=>(await(async()=>{if(!t.watching){t.watching=!0;for(const e in t.mounts)t.unwatch[e]=await watch(t.mounts[e],onChange,e)}})(),t.watchListeners.push(e),async()=>{t.watchListeners=t.watchListeners.filter((t=>t!==e)),0===t.watchListeners.length&&await stopWatch()}),async unwatch(){t.watchListeners=[],await stopWatch()},mount(e,a){if((e=normalizeBaseKey(e))&&t.mounts[e])throw new Error(`already mounted at ${e}`);return e&&(t.mountpoints.push(e),t.mountpoints.sort(((e,t)=>t.length-e.length))),t.mounts[e]=a,t.watching&&Promise.resolve(watch(a,onChange,e)).then((s=>{t.unwatch[e]=s})).catch(console.error),s},async unmount(e,s=!0){(e=normalizeBaseKey(e))&&t.mounts[e]&&(t.watching&&e in t.unwatch&&(t.unwatch[e]?.(),delete t.unwatch[e]),s&&await dispose(t.mounts[e]),t.mountpoints=t.mountpoints.filter((t=>t!==e)),delete t.mounts[e])},getMount(e=""){e=normalizeKey$1(e)+":";const t=getMount(e);return{driver:t.driver,base:t.base}},getMounts(e="",t={}){e=normalizeKey$1(e);return getMounts(e,t.parents).map((e=>({driver:e.driver,base:e.mountpoint})))},keys:(e,t={})=>s.getKeys(e,t),get:(e,t={})=>s.getItem(e,t),set:(e,t,a={})=>s.setItem(e,t,a),has:(e,t={})=>s.hasItem(e,t),del:(e,t={})=>s.removeItem(e,t),remove:(e,t={})=>s.removeItem(e,t)};return s}({});function useStorage(e=""){return e?function(e,t){if(!(t=normalizeBaseKey(t)))return e;const s={...e};for(const a of Ne)s[a]=(s="",...c)=>e[a](t+s,...c);return s.getKeys=(s="",...a)=>e.getKeys(t+s,...a).then((e=>e.map((e=>e.slice(t.length))))),s.getItems=async(s,a)=>{const c=s.map((e=>"string"==typeof e?t+e:{...e,key:t+e.key}));return(await e.getItems(c,a)).map((e=>({key:e.key.slice(t.length),value:e.value})))},s.setItems=async(s,a)=>{const c=s.map((e=>({key:t+e.key,value:e.value,options:e.options})));return e.setItems(c,a)},s}(Be,e):Be}function serialize$1(e){return"string"==typeof e?`'${e}'`:(new ze).serialize(e)}Be.mount("/assets",Ie),Be.mount("data",unstorage_47drivers_47fs_45lite({driver:"fsLite",base:"./.data/kv"}));const ze=function(){class o{#e=new Map;compare(e,t){const s=typeof e,a=typeof t;return"string"===s&&"string"===a?e.localeCompare(t):"number"===s&&"number"===a?e-t:String.prototype.localeCompare.call(this.serialize(e,!0),this.serialize(t,!0))}serialize(e,t){if(null===e)return"null";switch(typeof e){case"string":return t?e:`'${e}'`;case"bigint":return`${e}n`;case"object":return this.$object(e);case"function":return this.$function(e)}return String(e)}serializeObject(e){const t=Object.prototype.toString.call(e);if("[object Object]"!==t)return this.serializeBuiltInType(t.length<10?`unknown:${t}`:t.slice(8,-1),e);const s=e.constructor,a=s===Object||void 0===s?"":s.name;if(""!==a&&globalThis[a]===s)return this.serializeBuiltInType(a,e);if("function"==typeof e.toJSON){const t=e.toJSON();return a+(null!==t&&"object"==typeof t?this.$object(t):`(${this.serialize(t)})`)}return this.serializeObjectEntries(a,Object.entries(e))}serializeBuiltInType(e,t){const s=this["$"+e];if(s)return s.call(this,t);if("function"==typeof t?.entries)return this.serializeObjectEntries(e,t.entries());throw new Error(`Cannot serialize ${e}`)}serializeObjectEntries(e,t){const s=Array.from(t).sort(((e,t)=>this.compare(e[0],t[0])));let a=`${e}{`;for(let e=0;e<s.length;e++){const[t,c]=s[e];a+=`${this.serialize(t,!0)}:${this.serialize(c)}`,e<s.length-1&&(a+=",")}return a+"}"}$object(e){let t=this.#e.get(e);return void 0===t&&(this.#e.set(e,`#${this.#e.size}`),t=this.serializeObject(e),this.#e.set(e,t)),t}$function(e){const t=Function.prototype.toString.call(e);return"[native code] }"===t.slice(-15)?`${e.name||""}()[native]`:`${e.name}(${e.length})${t.replace(/\s*\n\s*/g,"")}`}$Array(e){let t="[";for(let s=0;s<e.length;s++)t+=this.serialize(e[s]),s<e.length-1&&(t+=",");return t+"]"}$Date(e){try{return`Date(${e.toISOString()})`}catch{return"Date(null)"}}$ArrayBuffer(e){return`ArrayBuffer[${new Uint8Array(e).join(",")}]`}$Set(e){return`Set${this.$Array(Array.from(e).sort(((e,t)=>this.compare(e,t))))}`}$Map(e){return this.serializeObjectEntries("Map",e.entries())}}for(const e of["Error","RegExp","URL"])o.prototype["$"+e]=function(t){return`${e}(${t})`};for(const e of["Int8Array","Uint8Array","Uint8ClampedArray","Int16Array","Uint16Array","Int32Array","Uint32Array","Float32Array","Float64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join(",")}]`};for(const e of["BigInt64Array","BigUint64Array"])o.prototype["$"+e]=function(t){return`${e}[${t.join("n,")}${t.length>0?"n":""}]`};return o}();function isEqual(e,t){return e===t||serialize$1(e)===serialize$1(t)}const Fe=globalThis.process?.getBuiltinModule?.("crypto")?.hash,De="sha256",We="base64url";function digest(e){if(Fe)return Fe(De,e,We);const t=m(De).update(e);return globalThis.process?.versions?.webcontainer?t.digest().toString(We):t.digest(We)}function hash$1(e){return digest(serialize$1(e))}const Ke=(()=>{class Hasher2{buff="";#t=new Map;write(e){this.buff+=e}dispatch(e){return this[null===e?"null":typeof e](e)}object(e){if(e&&"function"==typeof e.toJSON)return this.object(e.toJSON());const t=Object.prototype.toString.call(e);let s="";const a=t.length;s=a<10?"unknown:["+t+"]":t.slice(8,a-1),s=s.toLowerCase();let c=null;if(void 0!==(c=this.#t.get(e)))return this.dispatch("[CIRCULAR:"+c+"]");if(this.#t.set(e,this.#t.size),"undefined"!=typeof Buffer&&Buffer.isBuffer&&Buffer.isBuffer(e))return this.write("buffer:"),this.write(e.toString("utf8"));if("object"!==s&&"function"!==s&&"asyncfunction"!==s)this[s]?this[s](e):this.unknown(e,s);else{const t=Object.keys(e).sort(),s=[];this.write("object:"+(t.length+s.length)+":");const dispatchForKey=t=>{this.dispatch(t),this.write(":"),this.dispatch(e[t]),this.write(",")};for(const e of t)dispatchForKey(e);for(const e of s)dispatchForKey(e)}}array(e,t){if(t=void 0!==t&&t,this.write("array:"+e.length+":"),!t||e.length<=1){for(const t of e)this.dispatch(t);return}const s=new Map,a=e.map((e=>{const t=new Hasher2;t.dispatch(e);for(const[e,a]of t.#t)s.set(e,a);return t.toString()}));return this.#t=s,a.sort(),this.array(a,!1)}date(e){return this.write("date:"+e.toJSON())}symbol(e){return this.write("symbol:"+e.toString())}unknown(e,t){if(this.write(t),e)return this.write(":"),e&&"function"==typeof e.entries?this.array([...e.entries()],!0):void 0}error(e){return this.write("error:"+e.toString())}boolean(e){return this.write("bool:"+e)}string(e){this.write("string:"+e.length+":"),this.write(e)}function(e){this.write("fn:"),!function(e){if("function"!=typeof e)return!1;return"[native code] }"===Function.prototype.toString.call(e).slice(-15)}(e)?this.dispatch(e.toString()):this.dispatch("[native]")}number(e){return this.write("number:"+e)}null(){return this.write("Null")}undefined(){return this.write("Undefined")}regexp(e){return this.write("regex:"+e.toString())}arraybuffer(e){return this.write("arraybuffer:"),this.dispatch(new Uint8Array(e))}url(e){return this.write("url:"+e.toString())}map(e){this.write("map:");const t=[...e];return this.array(t,!1)}set(e){this.write("set:");const t=[...e];return this.array(t,!1)}bigint(e){return this.write("bigint:"+e.toString())}}for(const e of["uint8array","uint8clampedarray","unt8array","uint16array","unt16array","uint32array","unt32array","float32array","float64array"])Hasher2.prototype[e]=function(t){return this.write(e+":"),this.array([...t],!1)};return Hasher2})();function hash(e){return digest("string"==typeof e?e:function(e){const t=new Ke;return t.dispatch(e),t.buff}(e)).replace(/[-_]/g,"").slice(0,10)}function defineCachedFunction(e,t={}){t={name:"_",base:"/cache",swr:!0,maxAge:1,...t};const s={},a=t.group||"nitro/functions",c=t.name||e.name||"_",l=t.integrity||hash([e,t]),u=t.validate||(e=>void 0!==e.value);return async(...d)=>{if(await(t.shouldBypassCache?.(...d)))return e(...d);const h=await(t.getKey||getKey)(...d),f=await(t.shouldInvalidateCache?.(...d)),m=await async function(e,d,h,f){const m=[t.base,a,c,e+".json"].filter(Boolean).join(":").replace(/:\/$/,":index");let g=await useStorage().getItem(m).catch((e=>{console.error("[cache] Cache read error.",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})}))||{};if("object"!=typeof g){g={};const e=new Error("Malformed data read from cache.");console.error("[cache]",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})}const v=1e3*(t.maxAge??0);v&&(g.expires=Date.now()+v);const _=h||g.integrity!==l||v&&Date.now()-(g.mtime||0)>v||!1===u(g),x=_?(async()=>{const a=s[e];a||(void 0!==g.value&&(t.staleMaxAge||0)>=0&&!1===t.swr&&(g.value=void 0,g.integrity=void 0,g.mtime=void 0,g.expires=void 0),s[e]=Promise.resolve(d()));try{g.value=await s[e]}catch(t){throw a||delete s[e],t}if(!a&&(g.mtime=Date.now(),g.integrity=l,delete s[e],!1!==u(g))){let e;t.maxAge&&!t.swr&&(e={ttl:t.maxAge});const s=useStorage().setItem(m,g,e).catch((e=>{console.error("[cache] Cache write error.",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})}));f?.waitUntil&&f.waitUntil(s)}})():Promise.resolve();return void 0===g.value?await x:_&&f&&f.waitUntil&&f.waitUntil(x),t.swr&&!1!==u(g)?(x.catch((e=>{console.error("[cache] SWR handler error.",e),useNitroApp().captureError(e,{event:f,tags:["cache"]})})),g):x.then((()=>g))}(h,(()=>e(...d)),f,d[0]&&isEvent(d[0])?d[0]:void 0);let g=m.value;return t.transform&&(g=await t.transform(m,...d)||g),g}}function getKey(...e){return e.length>0?hash(e):""}function escapeKey(e){return String(e).replace(/\W/g,"")}function defineCachedEventHandler(e,t={name:"_",base:"/cache",swr:!0,maxAge:1}){const s=(t.varies||[]).filter(Boolean).map((e=>e.toLowerCase())).sort(),a={...t,getKey:async e=>{const a=await(t.getKey?.(e));if(a)return escapeKey(a);const c=e.node.req.originalUrl||e.node.req.url||e.path;let l;try{l=escapeKey(decodeURI(parseURL(c).pathname)).slice(0,16)||"index"}catch{l="-"}return[`${l}.${hash(c)}`,...s.map((t=>[t,e.node.req.headers[t]])).map((([e,t])=>`${escapeKey(e)}.${hash(t)}`))].join(":")},validate:e=>!!e.value&&(!(e.value.code>=400)&&(void 0!==e.value.body&&("undefined"!==e.value.headers.etag&&"undefined"!==e.value.headers["last-modified"]))),group:t.group||"nitro/handlers",integrity:t.integrity||hash([e,t])},c=function(e,t={}){return defineCachedFunction(e,t)}((async c=>{const l={};for(const e of s){const t=c.node.req.headers[e];void 0!==t&&(l[e]=t)}const u=cloneWithProxy(c.node.req,{headers:l}),d={};let h;const f=createEvent(u,cloneWithProxy(c.node.res,{statusCode:200,writableEnded:!1,writableFinished:!1,headersSent:!1,closed:!1,getHeader:e=>d[e],setHeader(e,t){return d[e]=t,this},getHeaderNames:()=>Object.keys(d),hasHeader:e=>e in d,removeHeader(e){delete d[e]},getHeaders:()=>d,end(e,t,s){return"string"==typeof e&&(h=e),"function"==typeof t&&t(),"function"==typeof s&&s(),this},write:(e,t,s)=>("string"==typeof e&&(h=e),"function"==typeof t&&t(void 0),"function"==typeof s&&s(),!0),writeHead(e,t){if(this.statusCode=e,t){if(Array.isArray(t)||"string"==typeof t)throw new TypeError("Raw headers  is not supported.");for(const e in t){const s=t[e];void 0!==s&&this.setHeader(e,s)}}return this}}));f.fetch=(e,t)=>fetchWithEvent(f,e,t,{fetch:useNitroApp().localFetch}),f.$fetch=(e,t)=>fetchWithEvent(f,e,t,{fetch:globalThis.$fetch}),f.waitUntil=c.waitUntil,f.context=c.context,f.context.cache={options:a};const m=await e(f)||h,g=f.node.res.getHeaders();g.etag=String(g.Etag||g.etag||`W/"${hash(m)}"`),g["last-modified"]=String(g["Last-Modified"]||g["last-modified"]||(new Date).toUTCString());const v=[];t.swr?(t.maxAge&&v.push(`s-maxage=${t.maxAge}`),t.staleMaxAge?v.push(`stale-while-revalidate=${t.staleMaxAge}`):v.push("stale-while-revalidate")):t.maxAge&&v.push(`max-age=${t.maxAge}`),v.length>0&&(g["cache-control"]=v.join(", "));return{code:f.node.res.statusCode,headers:g,body:m}}),a);return defineEventHandler((async s=>{if(t.headersOnly){if(handleCacheHeaders(s,{maxAge:t.maxAge}))return;return e(s)}const a=await c(s);if(s.node.res.headersSent||s.node.res.writableEnded)return a.body;if(!handleCacheHeaders(s,{modifiedTime:new Date(a.headers["last-modified"]),etag:a.headers.etag,maxAge:t.maxAge})){s.node.res.statusCode=a.code;for(const e in a.headers){const t=a.headers[e];"set-cookie"===e?s.node.res.appendHeader(e,splitCookiesString(t)):void 0!==t&&s.node.res.setHeader(e,t)}return a.body}}))}function cloneWithProxy(e,t){return new Proxy(e,{get:(e,s,a)=>s in t?t[s]:Reflect.get(e,s,a),set:(e,s,a,c)=>s in t?(t[s]=a,!0):Reflect.set(e,s,a,c)})}const Xe=defineCachedEventHandler;function klona(e){if("object"!=typeof e)return e;var t,s,a=Object.prototype.toString.call(e);if("[object Object]"===a){if(e.constructor!==Object&&"function"==typeof e.constructor)for(t in s=new e.constructor,e)e.hasOwnProperty(t)&&s[t]!==e[t]&&(s[t]=klona(e[t]));else for(t in s={},e)"__proto__"===t?Object.defineProperty(s,t,{value:klona(e[t]),configurable:!0,enumerable:!0,writable:!0}):s[t]=klona(e[t]);return s}if("[object Array]"===a){for(t=e.length,s=Array(t);t--;)s[t]=klona(e[t]);return s}return"[object Set]"===a?(s=new Set,e.forEach((function(e){s.add(klona(e))})),s):"[object Map]"===a?(s=new Map,e.forEach((function(e,t){s.set(klona(t),klona(e))})),s):"[object Date]"===a?new Date(+e):"[object RegExp]"===a?((s=new RegExp(e.source,e.flags)).lastIndex=e.lastIndex,s):"[object DataView]"===a?new e.constructor(klona(e.buffer)):"[object ArrayBuffer]"===a?e.slice(0):"Array]"===a.slice(-6)?new e.constructor(e):e}const Ve=re({siteName:"WooNuxt",shortDescription:"This is an example of a WooNuxt store. It provides a modern, fast, and SEO friendly ecommerce store built with Nuxt and WooCommerce.",description:"WooNuxt is unmatched when it comes to performance and scalability. Reap the benefits of having a online store that out performs all of your competitors. You can edit components to display your own information just like the one you're reading now.",baseUrl:"https://v3.woonuxt.com",siteImage:"https://user-images.githubusercontent.com/5116925/218879668-f4c1f9fd-bef4-44b0-bc7f-e87d994aa3a1.png",storeSettings:{autoOpenCart:!1,showReviews:!0,showFilters:!0,showOrderByDropdown:!0,showSKU:!0,showRelatedProducts:!0,showProductCategoriesOnSingleProduct:!0,showBreadcrumbOnSingleProduct:!0,showMoveToWishlist:!0,hideBillingAddressForVirtualProducts:!1,initStoreOnUserActionToReduceServerLoad:!0,saleBadge:"percent",socialLoginsDisplay:"buttons"}},{nuxt:{},icon:{provider:"server",class:"",aliases:{},iconifyApiEndpoint:"https://api.iconify.design",localApiEndpoint:"/api/_nuxt_icon",fallbackToApi:!0,cssSelectorPrefix:"i-",cssWherePseudo:!0,mode:"css",attrs:{"aria-hidden":!0},collections:["academicons","akar-icons","ant-design","arcticons","basil","bi","bitcoin-icons","bpmn","brandico","bx","bxl","bxs","bytesize","carbon","catppuccin","cbi","charm","ci","cib","cif","cil","circle-flags","circum","clarity","codicon","covid","cryptocurrency","cryptocurrency-color","dashicons","devicon","devicon-plain","ei","el","emojione","emojione-monotone","emojione-v1","entypo","entypo-social","eos-icons","ep","et","eva","f7","fa","fa-brands","fa-regular","fa-solid","fa6-brands","fa6-regular","fa6-solid","fad","fe","feather","file-icons","flag","flagpack","flat-color-icons","flat-ui","flowbite","fluent","fluent-emoji","fluent-emoji-flat","fluent-emoji-high-contrast","fluent-mdl2","fontelico","fontisto","formkit","foundation","fxemoji","gala","game-icons","geo","gg","gis","gravity-ui","gridicons","grommet-icons","guidance","healthicons","heroicons","heroicons-outline","heroicons-solid","hugeicons","humbleicons","ic","icomoon-free","icon-park","icon-park-outline","icon-park-solid","icon-park-twotone","iconamoon","iconoir","icons8","il","ion","iwwa","jam","la","lets-icons","line-md","logos","ls","lucide","lucide-lab","mage","majesticons","maki","map","marketeq","material-symbols","material-symbols-light","mdi","mdi-light","medical-icon","memory","meteocons","mi","mingcute","mono-icons","mynaui","nimbus","nonicons","noto","noto-v1","octicon","oi","ooui","openmoji","oui","pajamas","pepicons","pepicons-pencil","pepicons-pop","pepicons-print","ph","pixelarticons","prime","ps","quill","radix-icons","raphael","ri","rivet-icons","si-glyph","simple-icons","simple-line-icons","skill-icons","solar","streamline","streamline-emojis","subway","svg-spinners","system-uicons","tabler","tdesign","teenyicons","token","token-branded","topcoat","twemoji","typcn","uil","uim","uis","uit","uiw","unjs","vaadin","vs","vscode-icons","websymbol","weui","whh","wi","wpf","zmdi","zondicons"],fetchTimeout:1500}}),Qe=/\d/,Je=["-","_","/","."];function isUppercase(e=""){if(!Qe.test(e))return e!==e.toLowerCase()}function kebabCase(e,t){return e?(Array.isArray(e)?e:function(e){const t=Je,s=[];if(!e||"string"!=typeof e)return s;let a,c,l="";for(const u of e){const e=t.includes(u);if(!0===e){s.push(l),l="",a=void 0;continue}const d=isUppercase(u);if(!1===c){if(!1===a&&!0===d){s.push(l),l=u,a=d;continue}if(!0===a&&!1===d&&l.length>1){const e=l.at(-1);s.push(l.slice(0,Math.max(0,l.length-1))),l=e+u,a=d;continue}}l+=u,a=d,c=e}return s.push(l),s}(e)).map((e=>e.toLowerCase())).join(t):""}function getEnv(t,s){const a=(c=t,kebabCase(c||"","_")).toUpperCase();var c;return destr(e.env[s.prefix+a]??e.env[s.altPrefix+a])}function _isObject(e){return"object"==typeof e&&!Array.isArray(e)}function applyEnv(t,s,a=""){for(const c in t){const l=a?`${a}_${c}`:c,u=getEnv(l,s);_isObject(t[c])?_isObject(u)?(t[c]={...t[c],...u},applyEnv(t[c],s,l)):void 0===u?applyEnv(t[c],s,l):t[c]=u??t[c]:t[c]=u??t[c],s.envExpansion&&"string"==typeof t[c]&&(t[c]=t[c].replace(Ge,((t,s)=>e.env[s]||t)))}return t}const Ge=/\{\{([^{}]*)\}\}/g;const Ye={app:{baseURL:"/",buildId:"6c7ab119-cbc4-4b16-9841-6a14a0d28095",buildAssetsDir:"/_nuxt/",cdnURL:""},nitro:{envPrefix:"NUXT_",routeRules:{"/__nuxt_error":{cache:!1,isr:!1},"/checkout/order-received/**":{ssr:!1},"/order-summary/**":{ssr:!1},"/product/**":{redirect:{to:"/produkt/**",statusCode:301,_redirectStripBase:"/product"}},"/product-category/**":{redirect:{to:"/produkt-kategoriya/**",statusCode:301,_redirectStripBase:"/product-category"}},"/products/page/**":{ssr:!0,prerender:!1},"/produkt-kategoriya/*/page/**":{ssr:!0,prerender:!1},"/products?*":{ssr:!0,prerender:!1},"/produkt-kategoriya/*?*":{ssr:!0,prerender:!1},"/":{prerender:!0,static:!0,isr:!1},"/products":{ssr:!0,prerender:!0,headers:{"Cache-Control":"s-maxage=1800, stale-while-revalidate=3600"},static:!0,isr:!1},"/produkt-kategoriya/**":{ssr:!0,prerender:!0,headers:{"Cache-Control":"s-maxage=3600"},isr:{expiration:600}},"/produkt/**":{ssr:!0,prerender:!0,headers:{"Cache-Control":"s-maxage=3600"},isr:{expiration:600}},"/categories":{static:!0,isr:!1},"/contact":{static:!0,isr:!1},"/checkout/**":{ssr:!0,cache:!1,isr:!1},"/cart":{ssr:!0,cache:!1,isr:!1},"/my-account/**":{ssr:!0,cache:!1,isr:!1},"/__sitemap__/style.xsl":{headers:{"Content-Type":"application/xslt+xml"}},"/sitemap.xml":{},"/_nuxt/builds/meta/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}},"/_nuxt/builds/**":{headers:{"cache-control":"public, max-age=1, immutable"}},"/_nuxt/**":{headers:{"cache-control":"public, max-age=31536000, immutable"}}}},public:{GQL_HOST:"https://leaderfitness.admin-panels.com/graphql",PRODUCT_CATEGORY_PERMALINK:"/produkt-kategoriya/",PRODUCTS_PER_PAGE:12,"graphql-client":{clients:{default:{token:{type:"Bearer",name:"Authorization"},proxyCookies:!0,tokenStorage:{mode:"cookie",cookieOptions:{maxAge:604800,secure:!0,name:"authToken",sameSite:"None"},name:"gql:default"},preferGETQueries:!1,host:"https://leaderfitness.admin-panels.com/graphql",corsOptions:{mode:"cors",credentials:"include"},headers:{Origin:"http://localhost:3000"}}}},i18n:{baseUrl:"",defaultLocale:"bg_BG",defaultDirection:"ltr",strategy:"no_prefix",lazy:!1,rootRedirect:"",routesNameSeparator:"___",defaultLocaleRouteNameSuffix:"default",skipSettingLocaleOnNavigate:!1,differentDomains:!1,trailingSlash:!1,locales:[{code:"bg_BG",name:" ",_hreflang:"bg_BG",_sitemap:"bg_BG",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/bg-BG.json",cache:""}]},{code:"en_US",name:"English ",_hreflang:"en_US",_sitemap:"en_US",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/en-US.json",cache:""}]},{code:"de_DE",name:"Deutsch ",_hreflang:"de_DE",_sitemap:"de_DE",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/de-DE.json",cache:""}]},{code:"es_ES",name:"Espaol ",_hreflang:"es_ES",_sitemap:"es_ES",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/es-ES.json",cache:""}]},{code:"fr_FR",name:"Franais ",_hreflang:"fr_FR",_sitemap:"fr_FR",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/fr-FR.json",cache:""}]},{code:"it_IT",name:"Italiano ",_hreflang:"it_IT",_sitemap:"it_IT",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/it-IT.json",cache:""}]},{code:"pt_BR",name:"Portugus ",_hreflang:"pt_BR",_sitemap:"pt_BR",files:[{path:"D:/1-Projects/1-Clients SEO and WEBSITES/Github Projects/LeaderFitness/woonuxt_base/app/locales/pt-BR.json",cache:""}]}],detectBrowserLanguage:{alwaysRedirect:!1,cookieCrossOrigin:!1,cookieDomain:"",cookieKey:"i18n_redirected",cookieSecure:!1,fallbackLocale:"",redirectOn:"root",useCookie:!0},experimental:{localeDetector:"",switchLocalePathLinkSSR:!1,autoImportTranslationFunctions:!1,typedPages:!0,typedOptionsAndMessages:!1,generatedLocaleFilePathFormat:"absolute",alternateLinkCanonicalQueries:!1,hmr:!0},multiDomainLocales:!1}},"graphql-client":{clients:{}},sitemap:{isI18nMapped:!1,sitemapName:"sitemap.xml",isMultiSitemap:!1,excludeAppSources:[],cacheMaxAgeSeconds:600,autoLastmod:!1,defaultSitemapsChunkSize:1e3,minify:!1,sortEntries:!0,debug:!1,discoverImages:!0,discoverVideos:!0,sitemapsPathPrefix:"/__sitemap__/",isNuxtContentDocumentDriven:!1,xsl:"/__sitemap__/style.xsl",xslTips:!0,xslColumns:[{label:"URL",width:"50%"},{label:"Images",width:"25%",select:"count(image:image)"},{label:"Last Updated",width:"25%",select:"concat(substring(sitemap:lastmod,0,11),concat(' ', substring(sitemap:lastmod,12,5)),concat(' ', substring(sitemap:lastmod,20,6)))"}],credits:!0,version:"7.3.0",sitemaps:{"sitemap.xml":{sitemapName:"sitemap.xml",route:"sitemap.xml",defaults:{},include:[],exclude:["/_**","/_nuxt/**"],includeAppSources:!0}}},icon:{serverKnownCssClasses:[]},"nuxt-site-config":{stack:[{_context:"system",_priority:-15,name:"LeaderFitness",env:"production"},{_context:"package.json",_priority:-10,name:"woonuxt"},{_context:"@nuxtjs/i18n",defaultLocale:"bg_BG"}],version:"3.2.0",debug:!1,multiTenancy:[]},ipx:{baseURL:"/_ipx",alias:{},fs:{dir:"../../static"},http:{domains:[]}}},Ze={prefix:"NITRO_",altPrefix:Ye.nitro.envPrefix??e.env.NITRO_ENV_PREFIX??"_",envExpansion:Ye.nitro.envExpansion??e.env.NITRO_ENV_EXPANSION??!1},et=_deepFreeze(applyEnv(klona(Ye),Ze));function useRuntimeConfig(e){if(!e)return et;if(e.context.nitro.runtimeConfig)return e.context.nitro.runtimeConfig;const t=klona(Ye);return applyEnv(t,Ze),e.context.nitro.runtimeConfig=t,t}const tt=_deepFreeze(klona(Ve));function _deepFreeze(e){const t=Object.getOwnPropertyNames(e);for(const s of t){const t=e[s];t&&"object"==typeof t&&_deepFreeze(t)}return Object.freeze(e)}new Proxy(Object.create(null),{get:(e,t)=>{console.warn("Please use `useRuntimeConfig()` instead of accessing config directly.");const s=useRuntimeConfig();if(t in s)return s[t]}});const rt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof global?global:{},nt="__unctx__",ot=rt[nt]||(rt[nt]=function(e={}){const t={};return{get:(s,a={})=>(t[s]||(t[s]=function(e={}){let t,s=!1;const checkConflict=e=>{if(t&&t!==e)throw new Error("Context conflict")};let a;if(e.asyncContext){const t=e.AsyncLocalStorage||globalThis.AsyncLocalStorage;t?a=new t:console.warn("[unctx] `AsyncLocalStorage` is not provided.")}const _getCurrentInstance=()=>{if(a){const e=a.getStore();if(void 0!==e)return e}return t};return{use:()=>{const e=_getCurrentInstance();if(void 0===e)throw new Error("Context is not available");return e},tryUse:()=>_getCurrentInstance(),set:(e,a)=>{a||checkConflict(e),t=e,s=!0},unset:()=>{t=void 0,s=!1},call:(e,c)=>{checkConflict(e),t=e;try{return a?a.run(e,c):c()}finally{s||(t=void 0)}},async callAsync(e,c){t=e;const onRestore=()=>{t=e},onLeave=()=>t===e?onRestore:void 0;at.add(onLeave);try{const l=a?a.run(e,c):c();return s||(t=void 0),await l}finally{at.delete(onLeave)}}}}({...e,...a})),t[s])}}()),getContext=(e,t={})=>ot.get(e,t),st="__unctx_async_handlers__",at=rt[st]||(rt[st]=new Set);function executeAsync(e){const t=[];for(const e of at){const s=e();s&&t.push(s)}const restore=()=>{for(const e of t)e()};let s=e();return s&&"object"==typeof s&&"catch"in s&&(s=s.catch((e=>{throw restore(),e}))),[s,restore]}const it=toRouteMatcher(createRouter$1({routes:useRuntimeConfig().nitro.routeRules}));function getRouteRules(e){return e.context._nitro=e.context._nitro||{},e.context._nitro.routeRules||(e.context._nitro.routeRules=getRouteRulesForPath(withoutBase(e.path.split("?")[0],useRuntimeConfig().app.baseURL))),e.context._nitro.routeRules}function getRouteRulesForPath(e){return te({},...it.matchAll(e).reverse())}function joinHeaders(e){return Array.isArray(e)?e.join(", "):String(e)}function normalizeCookieHeader(e=""){return splitCookiesString(joinHeaders(e))}function normalizeCookieHeaders(e){const t=new Headers;for(const[s,a]of e)if("set-cookie"===s)for(const e of normalizeCookieHeader(a))t.append("set-cookie",e);else t.set(s,joinHeaders(a));return t}function hasReqHeader(e,t,s){const a=getRequestHeader(e,t);return a&&"string"==typeof a&&a.toLowerCase().includes(s)}function defaultHandler(e,t,s){const a=e.unhandled||e.fatal,c=e.statusCode||500,l=e.statusMessage||"Server Error",u=getRequestURL(t,{xForwardedHost:!0,xForwardedProto:!0});if(404===c){const e="/";if(/^\/[^/]/.test(e)&&!u.pathname.startsWith(e)){return{status:302,statusText:"Found",headers:{location:`${e}${u.pathname.slice(1)}${u.search}`},body:"Redirecting..."}}}if(a&&!s?.silent){const s=[e.unhandled&&"[unhandled]",e.fatal&&"[fatal]"].filter(Boolean).join(" ");console.error(`[request error] ${s} [${t.method}] ${u}\n`,e)}const d={"content-type":"application/json","x-content-type-options":"nosniff","x-frame-options":"DENY","referrer-policy":"no-referrer","content-security-policy":"script-src 'none'; frame-ancestors 'none';"};setResponseStatus(t,c,l),404!==c&&function(e,t){return e.node.res.getHeader(t)}(t,"cache-control")||(d["cache-control"]="no-cache");return{status:c,statusText:l,headers:d,body:{error:!0,url:u.href,statusCode:c,statusMessage:l,message:a?"Server Error":e.message,data:a?void 0:e.data}}}const ct=[async function(e,t,{defaultHandler:s}){if(t.handled||function(e){return!hasReqHeader(e,"accept","text/html")&&(hasReqHeader(e,"accept","application/json")||hasReqHeader(e,"user-agent","curl/")||hasReqHeader(e,"user-agent","httpie/")||hasReqHeader(e,"sec-fetch-mode","cors")||e.path.startsWith("/api/")||e.path.endsWith(".json"))}(t))return;const a=await s(e,t,{json:!0});if(404===(e.statusCode||500)&&302===a.status)return setResponseHeaders(t,a.headers),setResponseStatus(t,a.status,a.statusText),send(t,JSON.stringify(a.body,null,2));const c=a.body,l=new URL(c.url);c.url=withoutBase(l.pathname,useRuntimeConfig(t).app.baseURL)+l.search+l.hash,c.message||="Server Error",c.data||=e.data,c.statusMessage||=e.statusMessage,delete a.headers["content-type"],delete a.headers["content-security-policy"],setResponseHeaders(t,a.headers);const u=getRequestHeaders(t),d=t.path.startsWith("/__nuxt_error")||!!u["x-nuxt-error"]?null:await useNitroApp().localFetch(withQuery(joinURL(useRuntimeConfig(t).app.baseURL,"/__nuxt_error"),c),{headers:{...u,"x-nuxt-error":"true"},redirect:"manual"}).catch((()=>null));if(t.handled)return;if(!d){const{template:e}=await import("./error-500.mjs");return setResponseHeader(t,"Content-Type","text/html;charset=UTF-8"),send(t,e(c))}const h=await d.text();for(const[e,s]of d.headers.entries())setResponseHeader(t,e,s);return setResponseStatus(t,d.status&&200!==d.status?d.status:a.status,d.statusText||a.statusText),send(t,h)},function(e,t){const s=defaultHandler(e,t);return setResponseHeaders(t,s.headers),setResponseStatus(t,s.status,s.statusText),send(t,JSON.stringify(s.body,null,2))}];const lt="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ_$",ut=/[<>\b\f\n\r\t\0\u2028\u2029]/g,dt=/^(?:do|if|in|for|int|let|new|try|var|byte|case|char|else|enum|goto|long|this|void|with|await|break|catch|class|const|final|float|short|super|throw|while|yield|delete|double|export|import|native|return|switch|throws|typeof|boolean|default|extends|finally|package|private|abstract|continue|debugger|function|volatile|interface|protected|transient|implements|instanceof|synchronized)$/,pt={"<":"\\u003C",">":"\\u003E","/":"\\u002F","\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\0":"\\0","\u2028":"\\u2028","\u2029":"\\u2029"},ht=Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function devalue(e){const t=new Map;let s=0;function log(e){s<100&&(console.warn(e),s+=1)}!function walk(e){if("function"!=typeof e){if(t.has(e))t.set(e,t.get(e)+1);else if(t.set(e,1),!isPrimitive(e)){switch(getType(e)){case"Number":case"String":case"Boolean":case"Date":case"RegExp":return;case"Array":e.forEach(walk);break;case"Set":case"Map":Array.from(e).forEach(walk);break;default:const t=Object.getPrototypeOf(e);t!==Object.prototype&&null!==t&&Object.getOwnPropertyNames(t).sort().join("\0")!==ht?"function"!=typeof e.toJSON&&log(`Cannot stringify arbitrary non-POJOs ${e.constructor.name}`):Object.getOwnPropertySymbols(e).length>0?log(`Cannot stringify POJOs with symbolic keys ${Object.getOwnPropertySymbols(e).map((e=>e.toString()))}`):Object.keys(e).forEach((t=>walk(e[t])))}}}else log(`Cannot stringify a function ${e.name}`)}(e);const a=new Map;function stringify(e){if(a.has(e))return a.get(e);if(isPrimitive(e))return stringifyPrimitive(e);const t=getType(e);switch(t){case"Number":case"String":case"Boolean":return`Object(${stringify(e.valueOf())})`;case"RegExp":return e.toString();case"Date":return`new Date(${e.getTime()})`;case"Array":const s=e.map(((t,s)=>s in e?stringify(t):"")),a=0===e.length||e.length-1 in e?"":",";return`[${s.join(",")}${a}]`;case"Set":case"Map":return`new ${t}([${Array.from(e).map(stringify).join(",")}])`;default:if(e.toJSON){let t=e.toJSON();if("String"===getType(t))try{t=JSON.parse(t)}catch(e){}return stringify(t)}return null===Object.getPrototypeOf(e)?0===Object.keys(e).length?"Object.create(null)":`Object.create(null,{${Object.keys(e).map((t=>`${safeKey(t)}:{writable:true,enumerable:true,value:${stringify(e[t])}}`)).join(",")}})`:`{${Object.keys(e).map((t=>`${safeKey(t)}:${stringify(e[t])}`)).join(",")}}`}}Array.from(t).filter((e=>e[1]>1)).sort(((e,t)=>t[1]-e[1])).forEach(((e,t)=>{a.set(e[0],function(e){let t="";do{t=lt[e%54]+t,e=~~(e/54)-1}while(e>=0);return dt.test(t)?`${t}0`:t}(t))}));const c=stringify(e);if(a.size){const e=[],t=[],s=[];return a.forEach(((a,c)=>{if(e.push(a),isPrimitive(c))return void s.push(stringifyPrimitive(c));switch(getType(c)){case"Number":case"String":case"Boolean":s.push(`Object(${stringify(c.valueOf())})`);break;case"RegExp":s.push(c.toString());break;case"Date":s.push(`new Date(${c.getTime()})`);break;case"Array":s.push(`Array(${c.length})`),c.forEach(((e,s)=>{t.push(`${a}[${s}]=${stringify(e)}`)}));break;case"Set":s.push("new Set"),t.push(`${a}.${Array.from(c).map((e=>`add(${stringify(e)})`)).join(".")}`);break;case"Map":s.push("new Map"),t.push(`${a}.${Array.from(c).map((([e,t])=>`set(${stringify(e)}, ${stringify(t)})`)).join(".")}`);break;default:s.push(null===Object.getPrototypeOf(c)?"Object.create(null)":"{}"),Object.keys(c).forEach((e=>{t.push(`${a}${function(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?`.${e}`:`[${escapeUnsafeChars(JSON.stringify(e))}]`}(e)}=${stringify(c[e])}`)}))}})),t.push(`return ${c}`),`(function(${e.join(",")}){${t.join(";")}}(${s.join(",")}))`}return c}function isPrimitive(e){return Object(e)!==e}function stringifyPrimitive(e){if("string"==typeof e)return function(e){let t='"';for(let s=0;s<e.length;s+=1){const a=e.charAt(s),c=a.charCodeAt(0);if('"'===a)t+='\\"';else if(a in pt)t+=pt[a];else if(c>=55296&&c<=57343){const l=e.charCodeAt(s+1);t+=c<=56319&&l>=56320&&l<=57343?a+e[++s]:`\\u${c.toString(16).toUpperCase()}`}else t+=a}return t+='"',t}(e);if(void 0===e)return"void 0";if(0===e&&1/e<0)return"-0";const t=String(e);return"number"==typeof e?t.replace(/^(-)?0\./,"$1."):t}function getType(e){return Object.prototype.toString.call(e).slice(8,-1)}function escapeUnsafeChar(e){return pt[e]||e}function escapeUnsafeChars(e){return e.replace(ut,escapeUnsafeChar)}function safeKey(e){return/^[_$a-zA-Z][_$a-zA-Z0-9]*$/.test(e)?e:escapeUnsafeChars(JSON.stringify(e))}function createSiteConfigStack(e){const t=e?.debug||!1,s=[];return{stack:s,push:function(e){if(!e||"object"!=typeof e||0===Object.keys(e).length)return()=>{};if(!e._context&&t){let t=new Error("tmp").stack?.split("\n")[2].split(" ")[5];t?.includes("/")&&(t="anonymous"),e._context=t}const a={};for(const t in e){const s=e[t];void 0!==s&&""!==s&&(a[t]=s)}let c;return Object.keys(a).filter((e=>!e.startsWith("_"))).length>0&&(c=s.push(a)),()=>{void 0!==c&&s.splice(c-1,1)}},get:function(e){const t={};e?.debug&&(t._context={}),t._priority={};for(const a in s.sort(((e,t)=>(e._priority||0)-(t._priority||0))))for(const c in s[a]){const u=c,d=e?.resolveRefs?l(s[a][c]):s[a][c];c.startsWith("_")||void 0===d||""===d||(t[c]=d,void 0!==s[a]._priority&&-1!==s[a]._priority&&(t._priority[u]=s[a]._priority),e?.debug&&(t._context[u]=s[a]._context?.[u]||s[a]._context||"anonymous"))}return e?.skipNormalize?t:function(e){void 0!==e.indexable&&(e.indexable="false"!==String(e.indexable)),void 0===e.trailingSlash||e.trailingSlash||(e.trailingSlash="false"!==String(e.trailingSlash)),e.url&&!hasProtocol(String(e.url),{acceptRelative:!0,strict:!1})&&(e.url=withHttps(String(e.url)));const t=Object.keys(e).sort(((e,t)=>e.localeCompare(t))),s={};for(const a of t)s[a]=e[a];return s}(t)}}}function useSiteConfig(e,t){e.context.siteConfig=e.context.siteConfig||createSiteConfigStack();const s=te(t,useRuntimeConfig(e)["nuxt-site-config"],{debug:!1});return e.context.siteConfig.get(s)}const _SYXxPbYlvM8g5q0LQyvjsmJsGcYLHxtZIXBjac0zYSk=async t=>{t.hooks.hook("render:html",(async(t,{event:s})=>{const a=getRouteRules(s),c=e.env.NUXT_COMPONENT_ISLANDS&&s.path.startsWith("/__nuxt_island");s.path;if(s.context.nuxt?.noSSR||!1===a.ssr&&!c||!1){const e=Object.fromEntries(Object.entries(useSiteConfig(s)).map((([e,t])=>[e,l(t)])));t.body.push(`<script>window.__NUXT_SITE_CONFIG__=${devalue(e)}<\/script>`)}}))},ft={clients:{},config:{default:{token:{type:"Bearer",name:"Authorization"},proxyCookies:!0,tokenStorage:{mode:"cookie",cookieOptions:{maxAge:604800,secure:!0,name:"authToken",sameSite:"None"},name:"gql:default"},preferGETQueries:!1,host:"https://leaderfitness.admin-panels.com/graphql",corsOptions:{mode:"cors",credentials:"include"},headers:{Origin:"http://localhost:3000"}}}},mt=[_SYXxPbYlvM8g5q0LQyvjsmJsGcYLHxtZIXBjac0zYSk,()=>{const e=ft.config;for(const[t,s]of Object.entries(e)){const e="object"==typeof s?.headers?.serverOnly&&s?.headers?.serverOnly||void 0;s?.headers?.serverOnly&&delete s.headers.serverOnly;const a=s.token.name,c=s.token.type,l=c?`${c} ${s?.token?.value}`:s?.token?.value,d={...s?.headers,...e,...s?.token?.value&&{[a]:l}};ft.clients[t]=new u(s.host,{headers:d,...s.fetchOptions})}}];function useNitroOrigin(t){e.env.NITRO_SSL_CERT,e.env.NITRO_SSL_KEY;let s=e.env.NITRO_HOST||e.env.HOST||!1,a=!1,c="https";return t&&(s=getRequestHost(t,{xForwardedHost:!0})||s,c=getRequestProtocol(t,{xForwardedProto:!0})||c),"string"==typeof s&&s.includes(":")&&(a=s.split(":").pop(),s=s.split(":")[0]),a=a?`:${a}`:"",withTrailingSlash(`${c}://${s}${a}`)}const gt=defineEventHandler((async e=>{if(e.context._initedSiteConfig)return;const t=useRuntimeConfig(e),s=t["nuxt-site-config"],a=useNitroApp(),c=e.context.siteConfig||createSiteConfigStack({debug:s.debug}),l=useNitroOrigin(e);var u;e.context.siteConfigNitroOrigin=l,c.push({_context:"nitro:init",_priority:-4,url:l}),c.push({_context:"runtimeEnv",_priority:0,...t.site||{},...t.public.site||{},...(u=globalThis._importMeta_.env,Object.fromEntries(Object.entries(u).filter((([e])=>e.startsWith("NUXT_SITE_")||e.startsWith("NUXT_PUBLIC_SITE_"))).map((([e,t])=>[e.replace(/^NUXT_(PUBLIC_)?SITE_/,"").split("_").map(((e,t)=>0===t?e.toLowerCase():e[0].toUpperCase()+e.slice(1).toLowerCase())).join(""),t]))))});if((s.stack||[]).forEach((e=>c.push(e))),e.context._nitro.routeRules.site&&c.push({_context:"route-rules",...e.context._nitro.routeRules.site}),s.multiTenancy){const e=parseURL(l).host,t=s.multiTenancy?.find((t=>t.hosts.includes(e)));t&&c.push({_context:`multi-tenancy:${e}`,_priority:0,...t.config})}const d={siteConfig:c,event:e};await a.hooks.callHook("site-config:init",d),e.context.siteConfig=d.siteConfig,e.context._initedSiteConfig=!0}));d({defaults:{tag:"@nuxt/sitemap"}});const yt=createDefu(((e,t,s)=>(Array.isArray(e[t])&&Array.isArray(s)&&(e[t]=Array.from(new Set([...e[t],...s]))),e[t])));function mergeOnKey(e,t){const s=new Map;let a=0;const c=Array.from({length:e.length});for(const l of e){const e=l[t];if(s.has(e)){const t=s.get(e);c[t]=yt(l,c[t])}else s.set(e,a),c[a++]=l}return c.slice(0,a)}function splitForLocales(e,t){const s=withLeadingSlash(e).split("/")[1];return t.includes(s)?[s,e.replace(`/${s}`,"")]:[null,e]}const wt=/\/(.*?)\/([gimsuy]*)$/;function normalizeRuntimeFilters(e){return(e||[]).map((e=>{if(e instanceof RegExp||"string"==typeof e)return e;const t=e.regex.match(wt);return!!t&&new RegExp(t[1],t[2])})).filter(Boolean)}function createPathFilter(e={}){const t=function(e={}){const t=e.include||[],s=e.exclude||[];return 0===t.length&&0===s.length?()=>!0:function(e){for(const a of[{rules:s,result:!1},{rules:t,result:!0}]){const t=a.rules.filter((e=>e instanceof RegExp));if(t.some((t=>t.test(e))))return a.result;const s=a.rules.filter((e=>"string"==typeof e));if(s.length>0){const t={};for(const c of s){if(c===e)return a.result;t[c]=!0}if(toRouteMatcher(createRouter$1({routes:t,strictTrailingSlash:!1})).matchAll(e).length>0)return Boolean(a.result)}}return 0===t.length}}(e);return e=>{let s=e;try{s=parseURL(e).pathname}catch{return!1}return t(s)}}function useSitemapRuntimeConfig(e){const t=JSON.parse(JSON.stringify(useRuntimeConfig(e).sitemap));for(const e in t.sitemaps){const s=t.sitemaps[e];s.include=normalizeRuntimeFilters(s.include),s.exclude=normalizeRuntimeFilters(s.exclude),t.sitemaps[e]=s}return Object.freeze(t)}function resolveSitePath(e,t){let s=e;if(hasProtocol(e,{strict:!1,acceptRelative:!0})){s=parseURL(e).pathname}const a=withLeadingSlash(t.base||"/");"/"!==a&&s.startsWith(a)&&(s=s.slice(a.length));let c=withoutTrailingSlash(t.absolute?t.siteUrl:"");"/"!==a&&c.endsWith(a)&&(c=c.slice(0,c.indexOf(a)));const l=t.withBase?withBase(a,c||"/"):c,u=withBase(s,l);return"/"!==s||t.withBase?fixSlashes(t.trailingSlash,u):withTrailingSlash(u)}const bt=["jpg","jpeg","png","gif","bmp","webp","svg","ico","pdf","doc","docx","xls","xlsx","ppt","pptx","txt","md","markdown","zip","rar","7z","tar","gz","mp3","wav","flac","ogg","opus","m4a","aac","midi","mid","mp4","avi","mkv","mov","wmv","flv","webm","html","css","js","json","xml","tsx","jsx","ts","vue","svelte","xsl","rss","atom","php","py","rb","java","c","cpp","h","go","csv","tsv","sql","yaml","yml","woff","woff2","ttf","otf","eot","exe","msi","apk","ipa","dmg","iso","bin","bat","cmd","sh","env","htaccess","conf","toml","ini","deb","rpm","jar","war","epub","mobi","log","tmp","bak","old","sav"];function fixSlashes(e,t){const s=parseURL(t);if(function(e){const t=e.split("/").pop(),s=(t||e).match(/\.[0-9a-z]+$/i)?.[0];return s&&bt.includes(s.replace(".",""))}(s.pathname))return t;const a=e?withTrailingSlash(s.pathname):withoutTrailingSlash(s.pathname);return`${s.protocol?`${s.protocol}//`:""}${s.host||""}${a}${s.search||""}${s.hash||""}`}function createSitePathResolver(e,t={}){const s=useSiteConfig(e),a=useNitroOrigin(e),c=useRuntimeConfig(e).app.baseURL||"/";return e=>resolveSitePath(e,{...t,siteUrl:!1!==t.canonical?s.url:a,trailingSlash:s.trailingSlash,base:c})}const vt=defineEventHandler((async e=>{const t=createSitePathResolver(e,{absolute:!1,withBase:!0}),{sitemapName:s,cacheMaxAgeSeconds:a,version:c,xslColumns:l,xslTips:u}=useSitemapRuntimeConfig();ge(e,"Content-Type","application/xslt+xml"),ge(e,"Cache-Control",a?`public, max-age=${a}, must-revalidate`:"no-cache, no-store");const{name:d,url:h}=useSiteConfig(e),f=le(e,"Referer")||"/",m=parseURL(f).pathname,g="/sitemap.xml"!==m&&"/sitemap_index.xml"!==m&&m.endsWith(".xml"),v=parseURL(f).pathname.split("/").pop()?.split("-sitemap")[0]||s,_=`${d}${"sitemap.xml"!==v?` - ${"sitemap_index.xml"===v?"index":v}`:""}`.replace(/&/g,"&amp;"),x=getQuery$1(f).canonical,R=void 0!==x&&"false"!==x,k=['You are looking at a <a href="https://developer.mozilla.org/en-US/docs/Web/XSLT/Transforming_XML_with_XSLT/An_Overview" style="color: #398465" target="_blank">XML stylesheet</a>. Read the <a href="https://nuxtseo.com/sitemap/guides/customising-ui" style="color: #398465" target="_blank">docs</a> to learn how to customize it. View the page source to see the raw XML.',`URLs missing? Check Nuxt Devtools Sitemap tab (or the <a href="${withQuery("/__sitemap__/debug.json",{sitemap:v})}" style="color: #398465" target="_blank">debug endpoint</a>).`];if(R)k.push(`You are viewing the canonical sitemap. You can switch to using the request origin: <a href="${t(f)}" style="color: #398465; white-space: nowrap ">${t(f)}</a>`);else{const e=withQuery(f,{canonical:""});k.push(`Your canonical site URL is <strong>${h}</strong>.`),k.push(`You can preview your canonical sitemap by visiting <a href="${e}" style="color: #398465; white-space: nowrap;">${t(e)}?canonical</a>`)}let $=[...l];return $.length||($=[{label:"URL",width:"50%"},{label:"Images",width:"25%",select:"count(image:image)"},{label:"Last Updated",width:"25%",select:"concat(substring(sitemap:lastmod,0,11),concat(' ', substring(sitemap:lastmod,12,5)),concat(' ', substring(sitemap:lastmod,20,6)))"}]),`<?xml version="1.0" encoding="UTF-8"?>\n<xsl:stylesheet version="2.0"\n                xmlns:html="http://www.w3.org/TR/REC-html40"\n                xmlns:image="http://www.google.com/schemas/sitemap-image/1.1"\n                xmlns:sitemap="http://www.sitemaps.org/schemas/sitemap/0.9"\n                xmlns:xhtml="http://www.w3.org/1999/xhtml"\n                xmlns:news="http://www.google.com/schemas/sitemap-news/0.9"\n                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">\n  <xsl:output method="html" version="1.0" encoding="UTF-8" indent="yes"/>\n  <xsl:template match="/">\n    <html xmlns="http://www.w3.org/1999/xhtml">\n      <head>\n        <title>XML Sitemap</title>\n        <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>\n        <style type="text/css">\n          body {\n            font-family: Inter, Helvetica, Arial, sans-serif;\n            font-size: 14px;\n            color: #333;\n          }\n\n          table {\n            border: none;\n            border-collapse: collapse;\n          }\n\n          .bg-yellow-200 {\n            background-color: #fef9c3;\n          }\n\n          .p-5 {\n            padding: 1.25rem;\n          }\n\n          .rounded {\n            border-radius: 4px;\n            }\n\n          .shadow {\n            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);\n          }\n\n          #sitemap tr:nth-child(odd) td {\n            background-color: #f8f8f8 !important;\n          }\n\n          #sitemap tbody tr:hover td {\n            background-color: #fff;\n          }\n\n          #sitemap tbody tr:hover td, #sitemap tbody tr:hover td a {\n            color: #000;\n          }\n\n          .expl a {\n            color: #398465\n            font-weight: 600;\n          }\n\n          .expl a:visited {\n            color: #398465\n          }\n\n          a {\n            color: #000;\n            text-decoration: none;\n          }\n\n          a:visited {\n            color: #777;\n          }\n\n          a:hover {\n            text-decoration: underline;\n          }\n\n          td {\n            font-size: 12px;\n          }\n\n          .text-2xl {\n            font-size: 2rem;\n            font-weight: 600;\n            line-height: 1.25;\n          }\n\n          th {\n            text-align: left;\n            padding-right: 30px;\n            font-size: 12px;\n          }\n\n          thead th {\n            border-bottom: 1px solid #000;\n          }\n          .fixed { position: fixed; }\n          .right-2 { right: 2rem; }\n          .top-2 { top: 2rem; }\n          .w-30 { width: 30rem; }\n          p { margin: 0; }\n          li { padding-bottom: 0.5rem; line-height: 1.5; }\n          h1 { margin: 0; }\n          .mb-5 { margin-bottom: 1.25rem; }\n          .mb-3 { margin-bottom: 0.75rem; }\n        </style>\n      </head>\n      <body>\n        <div style="grid-template-columns: 1fr 1fr; display: grid; margin: 3rem;">\n            <div>\n             <div id="content">\n          <h1 class="text-2xl mb-3">XML Sitemap</h1>\n          <h2>${_}</h2>\n          ${g?`<p style="font-size: 12px; margin-bottom: 1rem;"><a href="${t("/sitemap_index.xml")}">${t("/sitemap_index.xml")}</a></p>`:""}\n          <xsl:if test="count(sitemap:sitemapindex/sitemap:sitemap) &gt; 0">\n            <p class="expl" style="margin-bottom: 1rem;">\n              This XML Sitemap Index file contains\n              <xsl:value-of select="count(sitemap:sitemapindex/sitemap:sitemap)"/> sitemaps.\n            </p>\n            <table id="sitemap" cellpadding="3">\n              <thead>\n                <tr>\n                  <th width="75%">Sitemap</th>\n                  <th width="25%">Last Modified</th>\n                </tr>\n              </thead>\n              <tbody>\n                <xsl:for-each select="sitemap:sitemapindex/sitemap:sitemap">\n                  <xsl:variable name="sitemapURL">\n                    <xsl:value-of select="sitemap:loc"/>\n                  </xsl:variable>\n                  <tr>\n                    <td>\n                      <a href="{$sitemapURL}">\n                        <xsl:value-of select="sitemap:loc"/>\n                      </a>\n                    </td>\n                    <td>\n                      <xsl:value-of\n                        select="concat(substring(sitemap:lastmod,0,11),concat(' ', substring(sitemap:lastmod,12,5)),concat(' ', substring(sitemap:lastmod,20,6)))"/>\n                    </td>\n                  </tr>\n                </xsl:for-each>\n              </tbody>\n            </table>\n          </xsl:if>\n          <xsl:if test="count(sitemap:sitemapindex/sitemap:sitemap) &lt; 1">\n            <p class="expl" style="margin-bottom: 1rem;">\n              This XML Sitemap contains\n              <xsl:value-of select="count(sitemap:urlset/sitemap:url)"/> URLs.\n            </p>\n            <table id="sitemap" cellpadding="3">\n              <thead>\n                <tr>\n                  ${$.map((e=>`<th width="${e.width}">${e.label}</th>`)).join("\n")}\n                </tr>\n              </thead>\n              <tbody>\n                <xsl:variable name="lower" select="'abcdefghijklmnopqrstuvwxyz'"/>\n                <xsl:variable name="upper" select="'ABCDEFGHIJKLMNOPQRSTUVWXYZ'"/>\n                <xsl:for-each select="sitemap:urlset/sitemap:url">\n                  <tr>\n                    <td>\n                      <xsl:variable name="itemURL">\n                        <xsl:value-of select="sitemap:loc"/>\n                      </xsl:variable>\n                      <a href="{$itemURL}">\n                        <xsl:value-of select="sitemap:loc"/>\n                      </a>\n                    </td>\n                    ${$.filter((e=>"URL"!==e.label)).map((e=>`<td>\n<xsl:value-of select="${e.select}"/>\n</td>`)).join("\n")}\n                  </tr>\n                </xsl:for-each>\n              </tbody>\n            </table>\n          </xsl:if>\n        </div>\n        </div>\n                    \n        </div>\n      </body>\n    </html>\n  </xsl:template>\n</xsl:stylesheet>\n`}));function resolve(e,t){return void 0!==e&&t?hasProtocol(e="string"==typeof e?e:e.toString(),{acceptRelative:!0,strict:!1})?t.fixSlashes(e):t.canonicalUrlResolver(e):e}function preNormalizeEntry(e,t){const s="string"==typeof e?{loc:e}:{...e};s.url&&!s.loc&&(s.loc=s.url,delete s.url),"string"!=typeof s.loc&&(s.loc=""),s.loc=function(e){return e.replace(/\/(\?|#|$)/,"$1")}(s.loc),s._abs=hasProtocol(s.loc,{acceptRelative:!1,strict:!1});try{s._path=s._abs?parseURL(s.loc):parsePath(s.loc)}catch(e){e._path=null}if(s._path){const e=stringifyQuery(parseQuery(s._path.search));s._relativeLoc=`${a=s._path?.pathname,encode(a).replace(H,"%23").replace(I,"%3F").replace(W,"%2F").replace(L,"%26").replace(M,"%2B")}${e.length?`?${e}`:""}`,s._path.host?s.loc=stringifyParsedURL(s._path):s.loc=s._relativeLoc}else(function(e){try{return e!==decodeURIComponent(e)}catch{return!1}})(s.loc)||(s.loc=encodeURI(s.loc));var a;return""===s.loc&&(s.loc="/"),s.loc=resolve(s.loc,t),s._key=`${s._sitemap||""}${withoutTrailingSlash(s.loc)}`,s}function normaliseEntry(e,t,s){const a=te(e,t);if(a.lastmod){const e=function(e){if("string"==typeof e){if(e.includes("T")){const t=e.split("T")[1];t.includes("+")||t.includes("-")||t.includes("Z")||(e+="Z")}if(!function(e){return _t.some((t=>t.test(e)))}(e))return!1;if((e=new Date(e)).setMilliseconds(0),Number.isNaN(e.getTime()))return!1}const z=e=>`0${e}`.slice(-2),t=`${e.getUTCFullYear()}-${z(e.getUTCMonth()+1)}-${z(e.getUTCDate())}`;if(e.getUTCHours()>0||e.getUTCMinutes()>0||e.getUTCSeconds()>0)return`${t}T${z(e.getUTCHours())}:${z(e.getUTCMinutes())}:${z(e.getUTCSeconds())}Z`;return t}(a.lastmod);e?a.lastmod=e:delete a.lastmod}if(a.lastmod||delete a.lastmod,a.loc=resolve(a.loc,s),a.alternatives){const e=a.alternatives;for(let t=0;t<e.length;t++){const a=e[t];"string"==typeof a.href?a.href=resolve(a.href,s):"object"==typeof a.href&&a.href&&(a.href=resolve(a.href.href,s))}a.alternatives=mergeOnKey(e,"hreflang")}if(a.images){const e=a.images;for(let t=0;t<e.length;t++)e[t].loc=resolve(e[t].loc,s);a.images=mergeOnKey(e,"loc")}if(a.videos){const e=a.videos;for(let t=0;t<e.length;t++)e[t].content_loc&&(e[t].content_loc=resolve(e[t].content_loc,s))}return a}const _t=[/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,/^\d{4}-[01]\d-[0-3]\d$/,/^\d{4}-[01]\d$/,/^\d{4}$/];async function fetchDataSource(e,t){const s="string"==typeof e.context?{name:e.context}:e.context||{name:"fetch"};s.tips=s.tips||[];const a="string"==typeof e.fetch?e.fetch:e.fetch[0],c="string"==typeof e.fetch?{}:e.fetch[1],l=Date.now(),u=c.timeout||5e3,d=new AbortController,h=setTimeout((()=>d.abort()),u);let f=!1;const m=parseURL(a).pathname.endsWith(".xml"),g=a.startsWith("/")&&t?t:globalThis;try{const u=await g.$fetch(a,{...c,responseType:m?"text":"json",signal:d.signal,headers:te(c?.headers,{Accept:m?"text/xml":"application/json"},t?{host:getRequestHost(t,{xForwardedHost:!0})}:{}),onResponse({response:e}){"string"==typeof e._data&&e._data.startsWith("<!DOCTYPE html>")&&(f=!0)}}),h=Date.now()-l;if(f)return s.tips.push("This is usually because the URL isn't correct or is throwing an error. Please check the URL"),{...e,context:s,urls:[],timeTakenMs:h,error:"Received HTML response instead of JSON"};let v=[];return"object"==typeof u?v=u.urls||u:"string"==typeof u&&parseURL(a).pathname.endsWith(".xml")&&(v=(u.match(/<url>[\s\S]*?<\/url>/g)||[]).map((e=>{const t=e.match(/<loc>([^<]+)<\/loc>/)?.[1];if(!t)return null;const s=e.match(/<lastmod>([^<]+)<\/lastmod>/)?.[1],a=e.match(/<changefreq>([^<]+)<\/changefreq>/)?.[1],c={loc:t,lastmod:s,changefreq:a,priority:e.match(/<priority>([^<]+)<\/priority>/)?Number.parseFloat(e.match(/<priority>([^<]+)<\/priority>/)[1]):void 0,images:(e.match(/<image:image>[\s\S]*?<\/image:image>/g)||[]).map((e=>{const t=e.match(/<image:loc>([^<]+)<\/image:loc>/)?.[1];return t?{loc:t}:null})).filter(Boolean),videos:(e.match(/<video:video>[\s\S]*?<\/video:video>/g)||[]).map((e=>{const t={},s=e.match(/<video:title>([^<]+)<\/video:title>/)?.[1],a=e.match(/<video:thumbnail_loc>([^<]+)<\/video:thumbnail_loc>/)?.[1],c=e.match(/<video:description>([^<]+)<\/video:description>/)?.[1],l=e.match(/<video:content_loc>([^<]+)<\/video:content_loc>/)?.[1];if(!(s&&a&&c&&l))return null;t.title=s,t.thumbnail_loc=a,t.description=c,t.content_loc=l;const u=e.match(/<video:player_loc>([^<]+)<\/video:player_loc>/)?.[1];u&&(t.player_loc=u);const d=e.match(/<video:duration>([^<]+)<\/video:duration>/)?Number.parseInt(e.match(/<video:duration>([^<]+)<\/video:duration>/)[1],10):void 0;d&&(t.duration=d);const h=e.match(/<video:expiration_date>([^<]+)<\/video:expiration_date>/)?.[1];h&&(t.expiration_date=h);const f=e.match(/<video:rating>([^<]+)<\/video:rating>/)?Number.parseFloat(e.match(/<video:rating>([^<]+)<\/video:rating>/)[1]):void 0;f&&(t.rating=f);const m=e.match(/<video:view_count>([^<]+)<\/video:view_count>/)?Number.parseInt(e.match(/<video:view_count>([^<]+)<\/video:view_count>/)[1],10):void 0;m&&(t.view_count=m);const g=e.match(/<video:publication_date>([^<]+)<\/video:publication_date>/)?.[1];g&&(t.publication_date=g);const v=e.match(/<video:family_friendly>([^<]+)<\/video:family_friendly>/)?.[1];v&&(t.family_friendly=v);const _=e.match(/<video:restriction relationship="([^"]+)">([^<]+)<\/video:restriction>/);_&&(t.restriction={relationship:_[1],restriction:_[2]});const x=e.match(/<video:platform relationship="([^"]+)">([^<]+)<\/video:platform>/);x&&(t.platform={relationship:x[1],platform:x[2]});const R=(e.match(/<video:price [^>]+>([^<]+)<\/video:price>/g)||[]).map((e=>{const t=e.match(/<video:price [^>]+>([^<]+)<\/video:price>/)?.[1],s=e.match(/currency="([^"]+)"/)?.[1],a=e.match(/type="([^"]+)"/)?.[1];return t?{price:t,currency:s,type:a}:null})).filter(Boolean);R.length&&(t.price=R);const k=e.match(/<video:requires_subscription>([^<]+)<\/video:requires_subscription>/)?.[1];k&&(t.requires_subscription=k);const $=e.match(/<video:uploader info="([^"]+)">([^<]+)<\/video:uploader>/);$&&(t.uploader={uploader:$[2],info:$[1]});const C=e.match(/<video:live>([^<]+)<\/video:live>/)?.[1];C&&(t.live=C);const E=(e.match(/<video:tag>([^<]+)<\/video:tag>/g)||[]).map((e=>e.match(/<video:tag>([^<]+)<\/video:tag>/)?.[1])).filter(Boolean);return E.length&&(t.tag=E),t})).filter(Boolean),alternatives:(e.match(/<xhtml:link[\s\S]*?\/>/g)||[]).map((e=>{const t=e.match(/hreflang="([^"]+)"/)?.[1],s=e.match(/href="([^"]+)"/)?.[1];return t&&s?{hreflang:t,href:s}:null})).filter(Boolean),news:e.match(/<news:news>[\s\S]*?<\/news:news>/)?{title:e.match(/<news:title>([^<]+)<\/news:title>/)?.[1],publication_date:e.match(/<news:publication_date>([^<]+)<\/news:publication_date>/)?.[1],publication:{name:e.match(/<news:name>([^<]+)<\/news:name>/)?.[1],language:e.match(/<news:language>([^<]+)<\/news:language>/)?.[1]}}:void 0};return Object.fromEntries(Object.entries(c).filter((([e,t])=>null!=t&&0!==t.length)))})).filter(Boolean)),{...e,context:s,timeTakenMs:h,urls:v}}catch(t){const c=t;return c.message.includes("This operation was aborted")?s.tips.push("The request has taken too long. Make sure app sources respond within 5 seconds or adjust the timeout fetch option."):s.tips.push(`Response returned a status of ${c.response?.status||"unknown"}.`),console.error("[@nuxtjs/sitemap] Failed to fetch source.",{url:a,error:c}),{...e,context:s,urls:[],error:c.message}}finally{h&&clearTimeout(h)}}function sortInPlace(e){return e.sort(((e,t)=>{const s="string"==typeof e?e:e.loc,a="string"==typeof t?t:t.loc,c=s.split("/").length,l=a.split("/").length;return c!==l?c-l:s.localeCompare(a,void 0,{numeric:!0})})),e}function parseChunkInfo(e,t,s=1e3){if(void 0!==t.chunks&&!Number.isNaN(Number(e)))return{isChunked:!0,baseSitemapName:"sitemap",chunkIndex:Number(e),chunkSize:s};if(e.includes("-")){const a=e.split("-"),c=a.pop();if(!Number.isNaN(Number(c))){const e=a.join("-"),l=t[e];if(l&&(l.chunks||l._isChunking)){const t="number"==typeof l.chunks?l.chunks:l.chunkSize||s;return{isChunked:!0,baseSitemapName:e,chunkIndex:Number(c),chunkSize:t}}}}return{isChunked:!1,baseSitemapName:e,chunkIndex:void 0,chunkSize:s}}function escapeValueForXml(e){return!0===e||!1===e?e?"yes":"no":String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&apos;")}function buildUrlXml(e){const t=Array.from({length:50});let s=0;if(t[s++]="    <url>",e.loc&&(t[s++]=`        <loc>${escapeValueForXml(e.loc)}</loc>`),e.lastmod&&(t[s++]=`        <lastmod>${e.lastmod}</lastmod>`),e.changefreq&&(t[s++]=`        <changefreq>${e.changefreq}</changefreq>`),void 0!==e.priority){const a=Number.parseFloat(String(e.priority)),c=a%1==0?String(a):a.toFixed(1);t[s++]=`        <priority>${c}</priority>`}const a=Object.keys(e).filter((e=>!e.startsWith("_")&&!["loc","lastmod","changefreq","priority"].includes(e)));for(const c of a){const a=e[c];if(null!=a)switch(c){case"alternatives":if(Array.isArray(a)&&a.length>0)for(const e of a){const a=Object.entries(e).map((([e,t])=>`${e}="${escapeValueForXml(t)}"`)).join(" ");t[s++]=`        <xhtml:link rel="alternate" ${a} />`}break;case"images":if(Array.isArray(a)&&a.length>0)for(const e of a)t[s++]="        <image:image>",t[s++]=`            <image:loc>${escapeValueForXml(e.loc)}</image:loc>`,e.title&&(t[s++]=`            <image:title>${escapeValueForXml(e.title)}</image:title>`),e.caption&&(t[s++]=`            <image:caption>${escapeValueForXml(e.caption)}</image:caption>`),e.geo_location&&(t[s++]=`            <image:geo_location>${escapeValueForXml(e.geo_location)}</image:geo_location>`),e.license&&(t[s++]=`            <image:license>${escapeValueForXml(e.license)}</image:license>`),t[s++]="        </image:image>";break;case"videos":if(Array.isArray(a)&&a.length>0)for(const e of a){if(t[s++]="        <video:video>",t[s++]=`            <video:title>${escapeValueForXml(e.title)}</video:title>`,e.thumbnail_loc&&(t[s++]=`            <video:thumbnail_loc>${escapeValueForXml(e.thumbnail_loc)}</video:thumbnail_loc>`),t[s++]=`            <video:description>${escapeValueForXml(e.description)}</video:description>`,e.content_loc&&(t[s++]=`            <video:content_loc>${escapeValueForXml(e.content_loc)}</video:content_loc>`),e.player_loc){const a=e.player_loc.allow_embed?' allow_embed="yes"':"",c=e.player_loc.autoplay?' autoplay="yes"':"";t[s++]=`            <video:player_loc${a}${c}>${escapeValueForXml(e.player_loc)}</video:player_loc>`}if(void 0!==e.duration&&(t[s++]=`            <video:duration>${e.duration}</video:duration>`),e.expiration_date&&(t[s++]=`            <video:expiration_date>${e.expiration_date}</video:expiration_date>`),void 0!==e.rating&&(t[s++]=`            <video:rating>${e.rating}</video:rating>`),void 0!==e.view_count&&(t[s++]=`            <video:view_count>${e.view_count}</video:view_count>`),e.publication_date&&(t[s++]=`            <video:publication_date>${e.publication_date}</video:publication_date>`),void 0!==e.family_friendly&&(t[s++]=`            <video:family_friendly>${"yes"===e.family_friendly||!0===e.family_friendly?"yes":"no"}</video:family_friendly>`),e.restriction){const a=e.restriction.relationship||"allow";t[s++]=`            <video:restriction relationship="${a}">${escapeValueForXml(e.restriction.restriction)}</video:restriction>`}if(e.platform){const a=e.platform.relationship||"allow";t[s++]=`            <video:platform relationship="${a}">${escapeValueForXml(e.platform.platform)}</video:platform>`}if(void 0!==e.requires_subscription&&(t[s++]=`            <video:requires_subscription>${"yes"===e.requires_subscription||!0===e.requires_subscription?"yes":"no"}</video:requires_subscription>`),e.price){const a=Array.isArray(e.price)?e.price:[e.price];for(const e of a){const a=[];e.currency&&a.push(`currency="${e.currency}"`),e.type&&a.push(`type="${e.type}"`);const c=a.length>0?" "+a.join(" "):"";t[s++]=`            <video:price${c}>${escapeValueForXml(e.price)}</video:price>`}}if(e.uploader){const a=e.uploader.info?` info="${escapeValueForXml(e.uploader.info)}"`:"";t[s++]=`            <video:uploader${a}>${escapeValueForXml(e.uploader.uploader)}</video:uploader>`}if(void 0!==e.live&&(t[s++]=`            <video:live>${"yes"===e.live||!0===e.live?"yes":"no"}</video:live>`),e.tag){const a=Array.isArray(e.tag)?e.tag:[e.tag];for(const e of a)t[s++]=`            <video:tag>${escapeValueForXml(e)}</video:tag>`}if(e.category&&(t[s++]=`            <video:category>${escapeValueForXml(e.category)}</video:category>`),e.gallery_loc){const a=e.gallery_loc.title?` title="${escapeValueForXml(e.gallery_loc.title)}"`:"";t[s++]=`            <video:gallery_loc${a}>${escapeValueForXml(e.gallery_loc)}</video:gallery_loc>`}t[s++]="        </video:video>"}break;case"news":a&&(t[s++]="        <news:news>",t[s++]="            <news:publication>",t[s++]=`                <news:name>${escapeValueForXml(a.publication.name)}</news:name>`,t[s++]=`                <news:language>${escapeValueForXml(a.publication.language)}</news:language>`,t[s++]="            </news:publication>",a.title&&(t[s++]=`            <news:title>${escapeValueForXml(a.title)}</news:title>`),a.publication_date&&(t[s++]=`            <news:publication_date>${a.publication_date}</news:publication_date>`),a.access&&(t[s++]=`            <news:access>${a.access}</news:access>`),a.genres&&(t[s++]=`            <news:genres>${escapeValueForXml(a.genres)}</news:genres>`),a.keywords&&(t[s++]=`            <news:keywords>${escapeValueForXml(a.keywords)}</news:keywords>`),a.stock_tickers&&(t[s++]=`            <news:stock_tickers>${escapeValueForXml(a.stock_tickers)}</news:stock_tickers>`),t[s++]="        </news:news>")}}return t[s++]="    </url>",t.slice(0,s).join("\n")}async function buildSitemapUrls(e,t,s,a){const{sitemaps:c,autoI18n:l,isI18nMapped:u,isMultiSitemap:d,sortEntries:h,defaultSitemapsChunkSize:f}=s,m=parseChunkInfo(e.sitemapName,c,f);if(l?.differentDomains){const s=l.locales.find((t=>[t.language,t.code].includes(e.sitemapName)))?.domain;if(s){const e=t.canonicalUrlResolver;t.canonicalUrlResolver=t=>resolveSitePath(t,{absolute:!0,withBase:!1,siteUrl:withHttps(s),trailingSlash:e("/test/").endsWith("/"),base:"/"})}}let g=e;const v=m.baseSitemapName;m.isChunked&&v!==e.sitemapName&&c[v]&&(g=c[v]);let _=g.includeAppSources?await import("../virtual/global-sources.mjs").then((e=>e.sources)):[];var x;if(_.push(...await(x=g,x?._hasSourceChunk?import("../virtual/child-sources.mjs").then((e=>e.sources[x.sitemapName]||[])):Promise.resolve([]))),a&&t.event){const e={event:t.event,sitemapName:v,sources:_};await a.hooks.callHook("sitemap:sources",e),_=e.sources}const R={urls:(await async function(e,t){return(await Promise.all(e.map((e=>"object"==typeof e&&"urls"in e?{timeTakenMs:0,...e,urls:e.urls}:e.fetch?fetchDataSource(e,t):{...e,error:"Invalid source"})))).flat()}(_,t.event)).flatMap((e=>e.urls)),sitemapName:e.sitemapName,event:t.event};await(a?.hooks.callHook("sitemap:input",R));const k=function(e,t,s,a){const{autoI18n:c,isI18nMapped:l}=s,u=createPathFilter({include:e.include,exclude:e.exclude}),d=t.map((e=>{const t=preNormalizeEntry(e,a);return!(!t.loc||!u(t.loc))&&t})).filter(Boolean);let h=[];const f={};if(c&&"no_prefix"!==c.strategy){const e=c.locales.map((e=>e.code));h=d.map(((t,s)=>{if(t._abs)return!1;const a=splitForLocales(t._relativeLoc,e);let l=a[0];const u=a[1];l||(l=c.defaultLocale);const d=t;d._pathWithoutPrefix=u;const h=c.locales.find((e=>e.code===l));return!!h&&(d._locale=h,d._index=s,d._key=`${d._sitemap||""}${d._path?.pathname||"/"}${d._path.search}`,f[u]=f[u]||[],f[u].some((e=>e._locale.code===h.code))||f[u].push(d),d)})).filter(Boolean);for(const e of h){if(e._i18nTransform||e.alternatives?.length){if(e._i18nTransform)if(delete e._i18nTransform,c.strategy,c.differentDomains)e.alternatives=[{...c.locales.find((e=>[e.code,e.language].includes(c.defaultLocale))),code:"x-default"},...c.locales.filter((e=>!!e.domain))].map((t=>({hreflang:t._hreflang,href:joinURL(withHttps(t.domain),e._pathWithoutPrefix)})));else for(const t of c.locales){let s=e._pathWithoutPrefix;if(c.pages){const a=e._pathWithoutPrefix.replace(/^\//,"").replace(/\/index$/,"")||"index",l=c.pages[a];if(l&&void 0!==l[t.code]){const e=l[t.code];if(!1===e)continue;"string"==typeof e&&(s=e.startsWith("/")?e:`/${e}`)}else c.differentDomains||["prefix_and_default","prefix_except_default"].includes(c.strategy)&&t.code===c.defaultLocale||(s=joinURL(`/${t.code}`,e._pathWithoutPrefix))}else c.differentDomains||["prefix_and_default","prefix_except_default"].includes(c.strategy)&&t.code===c.defaultLocale||(s=joinURL(`/${t.code}`,e._pathWithoutPrefix));const h=l?t._sitemap:void 0,f=preNormalizeEntry({_sitemap:h,...e,_index:void 0,_key:`${h||""}${s||"/"}${e._path.search}`,_locale:t,loc:s,alternatives:[{code:"x-default",_hreflang:"x-default"},...c.locales].map((t=>{const s="x-default"===t.code?c.defaultLocale:t.code,a="x-default"===t.code||t.code===c.defaultLocale;let l=e._pathWithoutPrefix;if(c.pages){const t=e._pathWithoutPrefix.replace(/^\//,"").replace(/\/index$/,"")||"index",u=c.pages[t];if(u&&void 0!==u[s]){const e=u[s];if(!1===e)return!1;"string"==typeof e&&(l=e.startsWith("/")?e:`/${e}`)}else"prefix"===c.strategy?l=joinURL("/",s,e._pathWithoutPrefix):["prefix_and_default","prefix_except_default"].includes(c.strategy)&&(a||(l=joinURL("/",s,e._pathWithoutPrefix)))}else"prefix"===c.strategy?l=joinURL("/",s,e._pathWithoutPrefix):["prefix_and_default","prefix_except_default"].includes(c.strategy)&&(a||(l=joinURL("/",s,e._pathWithoutPrefix)));return!!u(l)&&{hreflang:t._hreflang,href:l}})).filter(Boolean)},a);e._locale.code===f._locale.code?(d[e._index]=f,e._index=void 0):d.push(f)}}else{const t=f[e._pathWithoutPrefix].map((e=>{const t=[];return e._locale.code===c.defaultLocale&&t.push({href:e.loc,hreflang:"x-default"}),t.push({href:e.loc,hreflang:e._locale._hreflang||c.defaultLocale}),t})).flat().filter(Boolean);t.length&&(e.alternatives=t)}l&&(e._sitemap=e._sitemap||e._locale._sitemap,e._key=`${e._sitemap||""}${e.loc||"/"}${e._path.search}`),e._index&&(d[e._index]=e)}}return d}(e,R.urls,{autoI18n:l,isI18nMapped:u},t),$=k.filter((t=>!(d&&t._sitemap&&e.sitemapName)||t._sitemap===e.sitemapName));var C;return function(t){return function(e,t,s,a=1e3){const c=parseChunkInfo(t,s,a);if(c.isChunked&&void 0!==c.chunkIndex){const t=c.chunkIndex*c.chunkSize,s=(c.chunkIndex+1)*c.chunkSize;return e.slice(t,s)}return e}(t,e.sitemapName,c,f)}((C=$,h?sortInPlace(C):C))}function defineRenderHandler(e){const t=useRuntimeConfig();return be((async s=>{const a=useNitroApp(),c={event:s,render:e,response:void 0};if(await a.hooks.callHook("render:before",c),!c.response){if(s.path===`${t.app.baseURL}favicon.ico`)return setResponseHeader(s,"Content-Type","image/x-icon"),send(s,"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7");if(c.response=await c.render(s),!c.response){const e=getResponseStatus(s);return setResponseStatus(s,200===e?500:e),send(s,"No response returned from render handler: "+s.path)}}return await a.hooks.callHook("render:response",c.response,c),c.response.headers&&setResponseHeaders(s,c.response.headers),(c.response.statusCode||c.response.statusMessage)&&setResponseStatus(s,c.response.statusCode,c.response.statusMessage),c.response.body}))}function baseURL(){return useRuntimeConfig().app.baseURL}function buildAssetsURL(...e){return joinRelativeURL(publicAssetsURL(),useRuntimeConfig().app.buildAssetsDir,...e)}function publicAssetsURL(...e){const t=useRuntimeConfig().app,s=t.cdnURL||t.baseURL;return e.length?joinRelativeURL(s,...e):s}async function buildSitemapXml(e,t,s,a){const{sitemapName:c}=t,l=useNitroApp(),u=await buildSitemapUrls(t,s,a,l),d=function(){const{nitro:e,app:t}=useRuntimeConfig(),s=toRouteMatcher(createRouter$1({routes:Object.fromEntries(Object.entries(e?.routeRules||{}).map((([e,t])=>["/"===e?e:withoutTrailingSlash(e),t])))}));return e=>{const a=("/"===e[0]?e:parseURL(e,t.baseURL).pathname).split("?")[0];return te({},...s.matchAll(withoutBase("/"===a?a:withoutTrailingSlash(a),t.baseURL)).reverse())}}(),{autoI18n:h}=a;let f=0;for(let e=0;e<u.length;e++){const t=u[e],s=t._path?.pathname||t.loc;let a=d(s);if(h?.locales&&"no_prefix"!==h?.strategy){const e=splitForLocales(s,h.locales.map((e=>e.code))),t=e[1];t&&t!==s&&(a=te(a,d(t)))}if(!1===a.sitemap)continue;if(void 0!==a.robots&&!a.robots)continue;const c=Object.entries(a.headers||{}).some((([e,t])=>"x-robots-tag"===e.toLowerCase()&&t.toLowerCase().includes("noindex")));a.redirect||c||(u[f++]=a.sitemap?te(t,a.sitemap):t)}u.length=f;const m=u.length,g={urls:u,sitemapName:c,event:e};await l.hooks.callHook("sitemap:resolved",g),g.urls.length!==m&&(g.urls=g.urls.map((e=>preNormalizeEntry(e,s))));const v=g.urls.map((e=>normaliseEntry(e,t.defaults,s))),_=(x=mergeOnKey(v,"_key").map((e=>normaliseEntry(e,t.defaults,s))),a.sortEntries?sortInPlace(x):x);var x;if(t._isChunking&&t.sitemapName.includes("-")){const e=t.sitemapName.split("-"),s=e.pop();if(!Number.isNaN(Number(s))){const t=Number(s),a=e.join("-");if(0===_.length&&t>0)throw createError$1({statusCode:404,message:`Sitemap chunk ${t} for "${a}" does not exist.`})}}const R=function(e,t,{version:s,xsl:a,credits:c,minify:l}){const u=e.length+5,d=Array.from({length:u});let h=0;const f=!!a&&t.relativeBaseUrlResolver(a);d[h++]=f?`<?xml version="1.0" encoding="UTF-8"?><?xml-stylesheet type="text/xsl" href="${f}"?>`:'<?xml version="1.0" encoding="UTF-8"?>',d[h++]='<urlset xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:video="http://www.google.com/schemas/sitemap-video/1.1" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:image="http://www.google.com/schemas/sitemap-image/1.1" xmlns:news="http://www.google.com/schemas/sitemap-news/0.9" xsi:schemaLocation="http://www.sitemaps.org/schemas/sitemap/0.9 http://www.sitemaps.org/schemas/sitemap/0.9/sitemap.xsd http://www.google.com/schemas/sitemap-image/1.1 http://www.google.com/schemas/sitemap-image/1.1/sitemap-image.xsd" xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">';for(const t of e)d[h++]=buildUrlXml(t);d[h++]="</urlset>",c&&(d[h++]=`\x3c!-- XML Sitemap generated by @nuxtjs/sitemap v${s} at ${(new Date).toISOString()} --\x3e`);const m=d.slice(0,h);return l?m.join("").replace(/(?<!<[^>]*)\s(?![^<]*>)/g,""):m.join("\n")}(_,s,a),k={sitemap:R,sitemapName:c,event:e};return await l.hooks.callHook("sitemap:output",k),k.sitemap}const xt=defineCachedFunction(buildSitemapXml,{name:"sitemap:xml",group:"sitemap",maxAge:600,base:"sitemap",getKey:(e,t)=>{const s=le(e,"host")||le(e,"x-forwarded-host")||"",a=le(e,"x-forwarded-proto")||"https";return`${t.sitemapName||"default"}-${a}-${s}`},swr:!0});async function createSitemap(e,t,s){const a=function(e){const t=getQuery(e).canonical,s=void 0!==t&&"false"!==t,a=useSiteConfig(e);return{event:e,fixSlashes:e=>fixSlashes(a.trailingSlash,e),canonicalUrlResolver:createSitePathResolver(e,{canonical:s||!0,absolute:!0,withBase:!0}),relativeBaseUrlResolver:createSitePathResolver(e,{absolute:!1,withBase:!0})}}(e),c=s.cacheMaxAgeSeconds>0?await xt(e,t,a,s):await buildSitemapXml(e,t,a,s);if(ge(e,"Content-Type","text/xml; charset=UTF-8"),s.cacheMaxAgeSeconds){ge(e,"Cache-Control",`public, max-age=${s.cacheMaxAgeSeconds}, s-maxage=${s.cacheMaxAgeSeconds}, stale-while-revalidate=3600`);const t=new Date;ge(e,"X-Sitemap-Generated",t.toISOString()),ge(e,"X-Sitemap-Cache-Duration",`${s.cacheMaxAgeSeconds}s`);const a=new Date(t.getTime()+1e3*s.cacheMaxAgeSeconds);ge(e,"X-Sitemap-Cache-Expires",a.toISOString());const c=Math.floor((a.getTime()-t.getTime())/1e3);ge(e,"X-Sitemap-Cache-Remaining",`${c}s`)}else ge(e,"Cache-Control","no-cache, no-store");return e.context._isSitemap=!0,c}const St=defineEventHandler((async e=>{const t=useSitemapRuntimeConfig(),{sitemaps:s}=t;return"index"in s?sendRedirect(e,withBase("/sitemap_index.xml",useRuntimeConfig().app.baseURL),301):createSitemap(e,Object.values(s)[0],t)})),Rt=/^[A-Za-z]:\//;const kt=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/,basename=function(e,t){const s=function(e=""){return e?e.replace(/\\/g,"/").replace(Rt,(e=>e.toUpperCase())):e}(e).split("/");let a="";for(let e=s.length-1;e>=0;e--){const t=s[e];if(t){a=t;break}}return t&&a.endsWith(t)?a.slice(0,-t.length):a},$t={ion:()=>import("./icons.mjs").then((e=>e.default))},Ct=defineCachedEventHandler((async e=>{const t=getRequestURL(e);if(!t)return createError$1({status:400,message:"Invalid icon request"});const s=tt.icon,a=e.context.params?.collection?.replace(/\.json$/,""),c=a?await($t[a]?.()):null,l=s.iconifyApiEndpoint||"https://api.iconify.design",u=t.searchParams.get("icons")?.split(",");if(c&&u?.length){const e=f(c,u);return h.debug(`[Icon] serving ${(u||[]).map((e=>"`"+a+":"+e+"`")).join(",")} from bundled collection`),e}if(!0===s.fallbackToApi||"server-only"===s.fallbackToApi){const e=new URL("./"+basename(t.pathname)+t.search,l);if(h.debug(`[Icon] fetching ${(u||[]).map((e=>"`"+a+":"+e+"`")).join(",")} from iconify api`),e.host!==new URL(l).host)return createError$1({status:400,message:"Invalid icon request"});try{return await $fetch(e.href)}catch(e){return h.error(e),404===e.status?createError$1({status:404}):createError$1({status:500,message:"Failed to fetch fallback icon"})}}return createError$1({status:404})}),{group:"nuxt",name:"icon",getKey(e){const t=e.context.params?.collection?.replace(/\.json$/,"")||"unknown",s=String(getQuery(e).icons||"");return`${t}_${s.split(",")[0]}_${s.length}_${hash$1(s)}`},swr:!0,maxAge:604800}),Et=defineEventHandler((()=>{})),At=lazyEventHandler((()=>{const e=useRuntimeConfig().ipx||{},t=e?.fs?.dir?(Array.isArray(e.fs.dir)?e.fs.dir:[e.fs.dir]).map((e=>function(e){return kt.test(e)}(e)?e:g(new URL(e,globalThis._importMeta_.url)))):void 0,s=e.fs?.dir?v({...e.fs,dir:t}):void 0,a=e.http?.domains?_({...e.http}):void 0;if(!s&&!a)throw new Error("IPX storage is not configured!");const c={...e,storage:s||a,httpStorage:a},l=x(c),u=R(l);return d=e.baseURL,h=u,(d=withoutTrailingSlash(d))&&"/"!==d?be((async e=>{e.node.req.originalUrl=e.node.req.originalUrl||e.node.req.url||"/";const t=e._path||e.node.req.url||"/";e._path=withoutBase(e.path||"/",d),e.node.req.url=e._path;try{return await h(e)}finally{e._path=e.node.req.url=t}})):h;var d,h})),_lazy_UTdk2j=()=>import("../routes/renderer.mjs").then((function(e){return e.r})),jt=[{route:"/__nuxt_error",handler:_lazy_UTdk2j,lazy:!0,middleware:!1,method:void 0},{route:"",handler:gt,lazy:!1,middleware:!0,method:void 0},{route:"/__sitemap__/style.xsl",handler:vt,lazy:!1,middleware:!1,method:void 0},{route:"/sitemap.xml",handler:St,lazy:!1,middleware:!1,method:void 0},{route:"/api/_nuxt_icon/:collection",handler:Ct,lazy:!1,middleware:!1,method:void 0},{route:"/__nuxt_island/**",handler:Et,lazy:!1,middleware:!1,method:void 0},{route:"/_ipx/**",handler:At,lazy:!1,middleware:!1,method:void 0},{route:"/**",handler:_lazy_UTdk2j,lazy:!0,middleware:!1,method:void 0}];const Tt=function(){const e=useRuntimeConfig(),t=createHooks(),captureError=(e,s={})=>{const a=t.callHookParallel("error",e,s).catch((e=>{console.error("Error while capturing another error",e)}));if(s.event&&isEvent(s.event)){const t=s.event.context.nitro?.errors;t&&t.push({error:e,context:s}),s.event.waitUntil&&s.event.waitUntil(a)}},s=createApp({debug:destr(!1),onError:(e,t)=>(captureError(e,{event:t,tags:["request"]}),async function(e,t){for(const s of ct)try{if(await s(e,t,{defaultHandler:defaultHandler}),t.handled)return}catch(e){console.error(e)}}(e,t)),onRequest:async e=>{e.context.nitro=e.context.nitro||{errors:[]};const t=e.node.req?.__unenv__;t?._platform&&(e.context={_platform:t?._platform,...t._platform,...e.context}),!e.context.waitUntil&&t?.waitUntil&&(e.context.waitUntil=t.waitUntil),e.fetch=(t,s)=>fetchWithEvent(e,t,s,{fetch:localFetch}),e.$fetch=(t,s)=>fetchWithEvent(e,t,s,{fetch:l}),e.waitUntil=t=>{e.context.nitro._waitUntilPromises||(e.context.nitro._waitUntilPromises=[]),e.context.nitro._waitUntilPromises.push(t),e.context.waitUntil&&e.context.waitUntil(t)},e.captureError=(t,s)=>{captureError(t,{event:e,...s})},await Tt.hooks.callHook("request",e).catch((t=>{captureError(t,{event:e,tags:["request"]})}))},onBeforeResponse:async(e,t)=>{await Tt.hooks.callHook("beforeResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))},onAfterResponse:async(e,t)=>{await Tt.hooks.callHook("afterResponse",e,t).catch((t=>{captureError(t,{event:e,tags:["request","response"]})}))}}),a=function(e={}){const t=createRouter$1({}),s={};let a;const c={},addRoute=(e,a,l)=>{let u=s[e];if(u||(s[e]=u={path:e,handlers:{}},t.insert(e,u)),Array.isArray(l))for(const t of l)addRoute(e,a,t);else u.handlers[l]=toEventHandler(a,0,e);return c};c.use=c.add=(e,t,s)=>addRoute(e,t,s||"all");for(const e of ve)c[e]=(t,s)=>c.add(t,s,e);const matchHandler=(e="/",s="get")=>{const c=e.indexOf("?");-1!==c&&(e=e.slice(0,Math.max(0,c)));const l=t.lookup(e);if(!l||!l.handlers)return{error:createError$1({statusCode:404,name:"Not Found",statusMessage:`Cannot find any route matching ${e||"/"}.`})};let u=l.handlers[s]||l.handlers.all;if(!u){a||(a=toRouteMatcher(t));const c=a.matchAll(e).reverse();for(const e of c){if(e.handlers[s]){u=e.handlers[s],l.handlers[s]=l.handlers[s]||u;break}if(e.handlers.all){u=e.handlers.all,l.handlers.all=l.handlers.all||u;break}}}return u?{matched:l,handler:u}:{error:createError$1({statusCode:405,name:"Method Not Allowed",statusMessage:`Method ${s} is not allowed on this route.`})}},l=e.preemptive||e.preemtive;return c.handler=be((e=>{const t=matchHandler(e.path,e.method.toLowerCase());if("error"in t){if(l)throw t.error;return}e.context.matchedRoute=t.matched;const s=t.matched.params||{};return e.context.params=s,Promise.resolve(t.handler(e)).then((e=>void 0===e&&l?null:e))})),c.handler.__resolve__=async e=>{e=withLeadingSlash(e);const t=matchHandler(e);if("error"in t)return;let s={route:t.matched.path,handler:t.handler};if(t.handler.__resolve__){const a=await t.handler.__resolve__(e);if(!a)return;s={...s,...a}}return s},c}({preemptive:!0}),c=toNodeListener(s),localFetch=(e,t)=>e.toString().startsWith("/")?async function(e,t,s={}){try{const a=await b(e,{url:t,...s});return new Response(a.body,{status:a.status,statusText:a.statusText,headers:S(a.headers)})}catch(e){return new Response(e.toString(),{status:Number.parseInt(e.statusCode||e.code)||500,statusText:e.statusText})}}(c,e,t).then((e=>function(e){return e.headers.has("set-cookie")?new Response(e.body,{status:e.status,statusText:e.statusText,headers:normalizeCookieHeaders(e.headers)}):e}(e))):globalThis.fetch(e,t),l=createFetch({fetch:localFetch,Headers:Oe,defaults:{baseURL:e.app.baseURL}});var u;globalThis.$fetch=l,s.use((u={localFetch:localFetch},be((e=>{const t=getRouteRules(e);if(t.headers&&me(e,t.headers),t.redirect){let s=t.redirect.to;if(s.endsWith("/**")){let a=e.path;const c=t.redirect._redirectStripBase;c&&(a=withoutBase(a,c)),s=joinURL(s.slice(0,-3),a)}else e.path.includes("?")&&(s=withQuery(s,getQuery$1(e.path)));return sendRedirect(e,s,t.redirect.statusCode)}if(t.proxy){let s=t.proxy.to;if(s.endsWith("/**")){let a=e.path;const c=t.proxy._proxyStripBase;c&&(a=withoutBase(a,c)),s=joinURL(s.slice(0,-3),a)}else e.path.includes("?")&&(s=withQuery(s,getQuery$1(e.path)));return proxyRequest(e,s,{fetch:u.localFetch,...t.proxy})}}))));for(const t of jt){let c=t.lazy?lazyEventHandler(t.handler):t.handler;if(t.middleware||!t.route){const a=(e.app.baseURL+(t.route||"/")).replace(/\/+/g,"/");s.use(a,c)}else{const e=getRouteRulesForPath(t.route.replace(/:\w+|\*\*/g,"_"));e.cache&&(c=Xe(c,{group:"nitro/routes",...e.cache})),a.use(t.route,c,t.method)}}return s.use(e.app.baseURL,a.handler),{hooks:t,h3App:s,router:a,localCall:e=>b(c,e),localFetch:localFetch,captureError:captureError}}();function useNitroApp(){return Tt}!function(e){for(const t of mt)try{t(e)}catch(t){throw e.captureError(t,{tags:["plugin"]}),t}}(Tt);export{He as $,executeAsync as A,toRouteMatcher as B,createRouter$1 as C,getRequestHeaders as D,getRequestProtocol as E,useRuntimeConfig as a,buildAssetsURL as b,getResponseStatus as c,defineRenderHandler as d,publicAssetsURL as e,getQuery as f,getResponseStatusText as g,createError$1 as h,destr as i,getRouteRules as j,klona as k,re as l,hash$1 as m,te as n,getContext as o,parseQuery as p,getRequestHeader as q,isEqual as r,sanitizeStatusCode as s,toNodeListener as t,useNitroApp as u,setCookie as v,getCookie as w,deleteCookie as x,baseURL as y,createHooks as z};
//# sourceMappingURL=nitro.mjs.map
