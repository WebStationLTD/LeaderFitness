globalThis.__timing__.logStart("Load chunks/build/_slug_-3smtJ0AV");import{_ as e,a as o,b as l,c as r,d as t}from"./ProductGrid-DY9nXRDO.mjs";import{defineComponent as a,ref as s,withAsyncContext as i,computed as u,watch as n,mergeProps as p,unref as d,useSSRContext as m}from"vue";import{ssrRenderAttrs as c,ssrRenderComponent as g}from"vue/server-renderer";import{z as v,e as h,d as y,w as f,i as _,l as x}from"./server.mjs";import"./default-C7s0JCB3.mjs";import"graphql-request";import"./ProductCardDetailed-rUiUyB7s.mjs";import"./NuxtImg-BJG_EbHe.mjs";import"./ProductPrice-BLA-t2Nu.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const k=a({__name:"[slug]",__ssrInlineRender:!0,async setup(a){var m,k,w,b,P,j,q,S,L,C,D,A,B,M,R,T;let U,F;const{updateProductList:I,products:J}=v();h();const{storeSettings:E}=y(),G=f(),H=s(!0);console.log("Текущ route:",{fullPath:G.fullPath,path:G.path,name:G.name,params:G.params});let N="";if(G.params&&G.params.categorySlug&&(N="string"==typeof G.params.categorySlug?G.params.categorySlug:String(G.params.categorySlug)),!N&&G.params&&G.params.slug&&(N="string"==typeof G.params.slug?G.params.slug:String(G.params.slug)),!N&&G.path){const e=G.path.split("/"),o=e.findIndex((e=>"produkt-kategoriya"===e));if(-1!==o&&e[o+1]&&"page"!==e[o+1]){const l=e[o+1];l&&(N=l)}}console.log("Извлечен slug:",N),N?console.log("Slug от URL (преди декодиране):",N):console.log("Използваме всички продукти, тъй като slug е празен");let O=N;try{N&&(O=decodeURIComponent(N),console.log("Декодиран slug:",O))}catch(e){console.error("Грешка при декодиране на URL:",e)}const V=s(N),$=s(null),z=s(""),X=s(""),{data:Y}=([U,F]=i((()=>_("getProductCategories"))),U=await U,F(),U),K=u((()=>{var e,o;return(null==(o=null==(e=Y.value)?void 0:e.productCategories)?void 0:o.nodes)||[]}));return V.value&&($.value=K.value.find((e=>e.slug&&(e.slug===V.value||e.slug===O)))||null,console.log("Намерена категория:",$.value)),V.value,G.query.search,G.query.priceMin&&parseFloat(G.query.priceMin),G.query.priceMax&&parseFloat(G.query.priceMax),G.query.sale,G.query.orderby,setTimeout((()=>{H.value=!1}),500),n((()=>G.query),(()=>{"produkt-kategoriya-slug"!==G.name&&"produkt-kategoriya-page-pager"!==G.name||I()})),n((()=>G.params),(()=>{"produkt-kategoriya-slug"!==G.name&&"produkt-kategoriya-page-pager"!==G.name||I()})),z.value=(null==(k=null==(m=$.value)?void 0:m.seo)?void 0:k.title)||(null==(w=$.value)?void 0:w.name)||O||"All Products",X.value=(null==(P=null==(b=$.value)?void 0:b.seo)?void 0:P.metaDesc)||(null==(j=$.value)?void 0:j.description)||`Products in category ${(null==(q=$.value)?void 0:q.name)||O||"All Products"}`,x({title:z.value,meta:[{name:"description",content:X.value},{property:"og:title",content:(null==(L=null==(S=$.value)?void 0:S.seo)?void 0:L.opengraphTitle)||z.value},{property:"og:description",content:(null==(D=null==(C=$.value)?void 0:C.seo)?void 0:D.opengraphDescription)||X.value}],link:[{rel:"canonical",href:(null==(B=null==(A=$.value)?void 0:A.seo)?void 0:B.canonical)||""}]}),(null==(T=null==(R=null==(M=$.value)?void 0:M.seo)?void 0:R.schema)?void 0:T.raw)&&x({script:[{type:"application/ld+json",innerHTML:$.value.seo.schema.raw}]}),(a,s,i,u)=>{var n;const m=e,v=o,h=l,y=r,f=t;s(`<div${c(p({class:"container px-2"},u))}>`),null==(n=d(J))||n.length,s('<div class="flex items-start gap-16">'),d(E).showFilters?s(g(m,{"hide-categories":!0},null,i)):s("\x3c!----\x3e"),s('<div class="w-full"><div class="flex items-center justify-between w-full gap-4 mt-8 md:gap-8">'),s(g(v,null,null,i)),d(E).showOrderByDropdown?s(g(h,{class:"hidden md:inline-flex"},null,i)):s("\x3c!----\x3e"),d(E).showFilters?s(g(y,{class:"md:hidden"},null,i)):s("\x3c!----\x3e"),s("</div>"),s(g(f,null,null,i)),s("</div></div>"),s("</div>")}}}),w=k.setup;k.setup=(e,o)=>{const l=m();return(l.modules||(l.modules=new Set)).add("woonuxt_base/app/pages/produkt-kategoriya/[slug].vue"),w?w(e,o):void 0};export{k as default};globalThis.__timing__.logEnd("Load chunks/build/_slug_-3smtJ0AV");
//# sourceMappingURL=_slug_-3smtJ0AV.mjs.map
