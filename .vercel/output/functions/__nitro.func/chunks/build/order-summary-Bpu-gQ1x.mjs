import{x as e,g as t,d as s,w as l,l as i,i as a,_ as o,b as n}from"./server.mjs";import{H as d,P as r}from"./DownloadableItems-DvJJ0t-D.mjs";import{F as u}from"./NuxtImg-CriYuRni.mjs";import{defineComponent as m,ref as v,computed as c,mergeProps as p,unref as x,withCtx as g,createVNode as f,useSSRContext as h}from"vue";import{ssrRenderAttrs as y,ssrRenderComponent as b,ssrInterpolate as $,ssrRenderList as w}from"vue/server-renderer";import{I as j}from"./default-3LCvtah8.mjs";import"../_/nitro.mjs";import"node:http";import"node:https";import"node:events";import"node:buffer";import"graphql-request";import"consola";import"@iconify/utils";import"node:crypto";import"node:url";import"ipx";import"node:fs";import"node:path";import"vue-router";import"@iconify/vue";import"@heroicons/vue/24/outline";import"@iconify/utils/lib/css/icon";import"@headlessui/vue";import"@heroicons/vue/20/solid";import"../routes/renderer.mjs";import"vue-bundle-renderer/runtime";import"unhead/server";import"devalue";import"unhead/plugins";import"unhead/utils";const T=m({__name:"order-summary",__ssrInlineRender:!0,setup(m){const{query:h,params:T,name:_}=e(),{customer:I}=t(),{formatDate:k,formatPrice:D}=s(),{t:P}=l(),R=v(null);v("true"===h.fetch_delay);const q=v(!1),U=v("");c((()=>{var e;return!(null!=(e=I.value)&&e.email)}));const z=c((()=>"order-summary"===_)),C=c((()=>"order-received"===_)),E=c((()=>{var e;return(null==(e=R.value)?void 0:e.status)!==j.COMPLETED})),M=c((()=>{var e;return!!parseFloat((null==(e=R.value)?void 0:e.rawDiscountTotal)||"0")})),S=c((()=>{var e,t;return(null==(t=null==(e=R.value)?void 0:e.downloadableItems)?void 0:t.nodes)||[]}));return i({title:()=>z.value?P("messages.shop.orderSummary"):P("messages.shop.orderReceived")}),(e,t,s,l)=>{const i=n,m=a,v=o,c=d,h=u,j=r;t(`<div${y(p({class:"w-full min-h-[600px] flex items-center p-4 text-gray-800 md:bg-white md:rounded-xl md:mx-auto md:shadow-lg md:my-24 md:mt-8 md:max-w-3xl md:p-16 flex-col"},l))}>`),x(q)?(t("\x3c!--[--\x3e"),x(R)?(t('<div class="w-full">'),x(z)?(t('<div class="flex items-center gap-4">'),t(b(m,{to:"/my-account?tab=orders",class:"inline-flex items-center justify-center p-2 border rounded-md",title:"Back to orders","aria-label":"Back to orders"},{default:g(((e,t,s,l)=>{if(!t)return[f(v,{name:"ion:chevron-back-outline"})];t(b(v,{name:"ion:chevron-back-outline"},null,s,l))})),_:1},s)),t(`<h1 class="text-xl font-semibold">${$(e.$t("messages.shop.orderSummary"))}</h1></div>`)):x(C)?(t(`\x3c!--[--\x3e<div class="flex items-center justify-between w-full mb-2"><h1 class="text-xl font-semibold">${$(e.$t("messages.shop.orderReceived"))}</h1>`),x(E)?(t('<button type="button" class="inline-flex items-center justify-center p-2 bg-white border rounded-md" title="Refresh order" aria-label="Refresh order">'),t(b(v,{name:"ion:refresh-outline"},null,s)),t("</button>")):t("\x3c!----\x3e"),t(`</div><p>${$(e.$t("messages.shop.orderThanks"))}</p>\x3c!--]--\x3e`)):t("\x3c!----\x3e"),t('<hr class="my-8"></div>')):t("\x3c!----\x3e"),x(R)?(t(`<div class="flex-1 w-full"><div class="flex items-start justify-between"><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.shop.order"))}</div><div class="leading-none">#${$(x(R).databaseId)}</div></div><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.general.date"))}</div><div class="leading-none">${$(x(k)(x(R).date))}</div></div><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.general.status"))}</div>`),x(R).status?t(b(c,{order:x(R)},null,s)):t("\x3c!----\x3e"),t(`</div><div class="w-[21%]"><div class="mb-2 text-xs text-gray-400 uppercase">${$(e.$t("messages.general.paymentMethod"))}</div><div class="leading-none">${$(x(R).paymentMethodTitle)}</div></div></div>`),x(R).lineItems?(t('\x3c!--[--\x3e<hr class="my-8"><div class="grid gap-2">\x3c!--[--\x3e'),w(x(R).lineItems.nodes,(e=>{var l,i,a,o;t('<div class="flex items-center justify-between gap-8">'),null!=(l=e.product)&&l.node?t(b(m,{to:`/produkt/${e.product.node.slug}`},{default:g(((t,s,l,i)=>{var a,o,n,d,r,u,m,v,c,p,x,g,y,$,w,j,T,_,I,k,D,P,R,q,U,z,C,E,M,S;if(!s)return[f(h,{class:"w-16 h-16 rounded-xl",src:(null==(_=null==(T=null==(j=e.variation)?void 0:j.node)?void 0:T.image)?void 0:_.sourceUrl)||(null==(k=null==(I=e.product.node)?void 0:I.image)?void 0:k.sourceUrl)||"/images/placeholder.png",alt:(null==(R=null==(P=null==(D=e.variation)?void 0:D.node)?void 0:P.image)?void 0:R.altText)||(null==(U=null==(q=e.product.node)?void 0:q.image)?void 0:U.altText)||"Product image",title:(null==(E=null==(C=null==(z=e.variation)?void 0:z.node)?void 0:C.image)?void 0:E.title)||(null==(S=null==(M=e.product.node)?void 0:M.image)?void 0:S.title)||"Product image",width:"64",height:"64",loading:"lazy"},null,8,["src","alt","title"])];s(b(h,{class:"w-16 h-16 rounded-xl",src:(null==(n=null==(o=null==(a=e.variation)?void 0:a.node)?void 0:o.image)?void 0:n.sourceUrl)||(null==(r=null==(d=e.product.node)?void 0:d.image)?void 0:r.sourceUrl)||"/images/placeholder.png",alt:(null==(v=null==(m=null==(u=e.variation)?void 0:u.node)?void 0:m.image)?void 0:v.altText)||(null==(p=null==(c=e.product.node)?void 0:c.image)?void 0:p.altText)||"Product image",title:(null==(y=null==(g=null==(x=e.variation)?void 0:x.node)?void 0:g.image)?void 0:y.title)||(null==(w=null==($=e.product.node)?void 0:$.image)?void 0:w.title)||"Product image",width:"64",height:"64",loading:"lazy"},null,l,i))})),_:2},s)):t("\x3c!----\x3e"),t(`<div class="flex-1 leading-tight">${$(e.variation?null==(a=null==(i=e.variation)?void 0:i.node)?void 0:a.name:null==(o=e.product)?void 0:o.node.name)}</div><div class="text-sm text-gray-600">Qty. ${$(e.quantity)}</div><span class="text-sm font-semibold">${$(x(D)(e.total))}</span></div>`)})),t("\x3c!--]--\x3e</div>\x3c!--]--\x3e")):t("\x3c!----\x3e"),t('<hr class="my-8">'),x(S).length&&!x(E)?(t("<div>"),t(b(j,{downloadableItems:x(S)},null,s)),t('<hr class="my-8"></div>')):t("\x3c!----\x3e"),t(`<div><div class="flex justify-between"><span>${$(e.$t("messages.shop.subtotal"))}</span><span>${$(x(R).subtotal)}</span></div><div class="flex justify-between"><span>${$(e.$t("messages.general.tax"))}</span><span>${$(x(R).totalTax)}</span></div><div class="flex justify-between"><span>${$(e.$t("messages.general.shipping"))}</span><span>${$(x(R).shippingTotal)}</span></div>`),x(M)?t(`<div class="flex justify-between text-primary"><span>${$(e.$t("messages.shop.discount"))}</span><span>- ${$(x(R).discountTotal)}</span></div>`):t("\x3c!----\x3e"),t(`<hr class="my-8"><div class="flex justify-between"><span class>${$(e.$t("messages.shop.total"))}</span><span class="font-semibold">${$(x(R).total)}</span></div></div></div>`)):x(U)?(t('<div class="flex flex-col items-center justify-center flex-1 w-full gap-4 text-center">'),t(b(v,{name:"ion:sad-outline",size:"96",class:"text-gray-700"},null,s)),t('<h1 class="text-xl font-semibold">Error</h1>'),x(U)?t(`<div class="text-sm text-red-500">${x(U)??""}</div>`):t("\x3c!----\x3e"),t("</div>")):t("\x3c!----\x3e"),t("\x3c!--]--\x3e")):t(b(i,{class:"flex-1"},null,s)),t("</div>")}}}),_=T.setup;T.setup=(e,t)=>{const s=h();return(s.modules||(s.modules=new Set)).add("woonuxt_base/app/pages/order-summary.vue"),_?_(e,t):void 0};export{T as default};
//# sourceMappingURL=order-summary-Bpu-gQ1x.mjs.map
