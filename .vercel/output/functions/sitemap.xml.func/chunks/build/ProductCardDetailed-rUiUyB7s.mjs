globalThis.__timing__.logStart("Load chunks/build/ProductCardDetailed-rUiUyB7s");import{c as e,_ as t,w as a,d as l,u as o,v as n,h as s,b as d,t as r}from"./server.mjs";import{defineComponent as i,mergeProps as u,ref as c,watch as v,computed as p,withCtx as m,unref as g,createVNode as f,createBlock as x,createCommentVNode as b,openBlock as h,toDisplayString as _,useSSRContext as y}from"vue";import{ssrRenderAttrs as w,ssrRenderList as P,ssrRenderComponent as j,ssrInterpolate as $,ssrRenderAttr as S,ssrIncludeBooleanAttr as B}from"vue/server-renderer";import{_ as I}from"./NuxtImg-BJG_EbHe.mjs";import{_ as z}from"./ProductPrice-BLA-t2Nu.mjs";import{a as C}from"./default-C7s0JCB3.mjs";const R=i({__name:"SaleBadge",__ssrInlineRender:!0,props:{node:{type:Object,required:!0}},setup(e){const{t:t}=n(),{storeSettings:a}=l(),o=p((()=>{var t,a,l,o;if(!(null==(t=e.node)?void 0:t.salePrice)||!(null==(a=e.node)?void 0:a.regularPrice))return"";const n=parseFloat(null==(l=e.node)?void 0:l.salePrice),s=parseFloat(null==(o=e.node)?void 0:o.regularPrice);return Math.round((s-n)/s*100)+" %"})),s=p((()=>e.node.salePrice&&"hidden"!==a.saleBadge)),d=p((()=>"percent"===(null==a?void 0:a.saleBadge)?o.value:t("messages.shop.onSale")?t("messages.shop.onSale"):"Sale"));return(e,t,a,l)=>{g(s)?t(`<span${w(u({class:"red-badge"},l))} data-v-69615c4f>${$(g(d))}</span>`):t("\x3c!----\x3e")}}}),U=R.setup;R.setup=(e,t)=>{const a=y();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/SaleBadge.vue"),U?U(e,t):void 0};const E=Object.assign(e(R,[["__scopeId","data-v-69615c4f"]]),{__name:"SaleBadge"}),k=i({__name:"ProductWishlistButton",__ssrInlineRender:!0,props:{product:{}},setup(e){const{isInList:a}=r(),l=e,o=p((()=>!!l.product.databaseId&&a(l.product.databaseId)));return(e,a,l,n)=>{const s=t;a(`<button${w(u({type:"button",class:"absolute top-2 left-2 z-40 bg-white/80 hover:bg-white rounded-full shadow-md transition-all duration-200 wishlist-btn",title:g(o)?e.$t("messages.shop.wishlistRemove"):e.$t("messages.shop.wishlistAdd")},n))} data-v-097c071d>`),g(o)?a(j(s,{name:"ion:heart",size:"24",class:"text-red-500 md:w-6 md:h-6 w-5 h-5"},null,l)):a(j(s,{name:"ion:heart-outline",size:"24",class:"text-gray-600 md:w-6 md:h-6 w-5 h-5"},null,l)),a("</button>")}}}),L=k.setup;k.setup=(e,t)=>{const a=y();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/ProductWishlistButton.vue"),L?L(e,t):void 0};const N=Object.assign(e(k,[["__scopeId","data-v-097c071d"]]),{__name:"ProductWishlistButton"}),O=i({__name:"StarRating",__ssrInlineRender:!0,props:{rating:{type:Number,default:0},count:{type:Number,default:null},hideCount:{type:Boolean,default:!1},size:{type:Number,default:14}},setup:e=>(a,l,o,n)=>{const s=t;l(`<div${w(u({class:"inline-flex items-center"},n))}>\x3c!--[--\x3e`),P(5,(t=>{l(j(s,{key:t,name:"ion:star",size:e.size+"",class:"mr-[2px]",style:{color:e.rating<t?"#ccc":"#FBBE24"}},null,o))})),l("\x3c!--]--\x3e"),null===e.count||e.hideCount?l("\x3c!----\x3e"):l(`<span class="text-xs ml-1 text-gray-500">(${$(e.count)})</span>`),l("</div>")}}),q=O.setup;O.setup=(e,t)=>{const a=y();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/StarRating.vue"),q?q(e,t):void 0};const D=Object.assign(O,{__name:"StarRating"}),T=280,A=i({__name:"ProductCardDetailed",__ssrInlineRender:!0,props:{node:{type:Object,required:!0},index:{type:Number,default:1}},setup(e){var r,i,y,R;const U=a(),{storeSettings:k}=l(),{cart:L}=o(),{t:O}=n(),q=e,A=Math.round(315),F=c(null==(r=U.query)?void 0:r.filter),M=c((null==(R=null==(y=null==(i=F.value)?void 0:i.split("pa_color[")[1])?void 0:y.split("]")[0])?void 0:R.split(","))||[]);v((()=>U.query),(()=>{var e,t,a;F.value=U.query.filter,M.value=(null==(a=null==(t=null==(e=F.value)?void 0:e.split("pa_color[")[1])?void 0:t.split("]")[0])?void 0:a.split(","))||[]}));const W=p((()=>{var e,t,a,l;return(null==(t=null==(e=q.node)?void 0:e.image)?void 0:t.producCardSourceUrl)||(null==(l=null==(a=q.node)?void 0:a.image)?void 0:l.sourceUrl)||"/images/placeholder.jpg"})),J=p((()=>{var e,t,a,l,o,n;if(M.value.length){const s=null==(t=null==(e=q.node)?void 0:e.variations)?void 0:t.nodes.filter((e=>{var t;const a=null==(t=e.attributes)?void 0:t.nodes.some((e=>M.value.some((t=>{var a;return null==(a=null==e?void 0:e.value)?void 0:a.includes(t)})))),l=M.value.some((t=>{var a;return null==(a=e.slug)?void 0:a.includes(t)}));return a||l}));if(null==s?void 0:s.length)return(null==(l=null==(a=s[0])?void 0:a.image)?void 0:l.producCardSourceUrl)||(null==(n=null==(o=s[0])?void 0:o.image)?void 0:n.sourceUrl)||W.value}return W.value})),G=c(!1),H=c(1),V=c(""),K=c(null),Q=p((()=>{var e;return(null==(e=q.node)?void 0:e.type)===C.VARIABLE})),X=p((()=>{var e;return(null==(e=q.node)?void 0:e.type)===C.SIMPLE})),Y=p((()=>{var e,t;return Q.value&&void 0!==(null==(t=null==(e=q.node)?void 0:e.variations)?void 0:t.nodes)&&q.node.variations.nodes.length>0})),Z=p((()=>Q.value||X.value)),ee=p((()=>G.value||Y.value&&!K.value));return v(L,(()=>{setTimeout((()=>{G.value=!1,V.value=""}),300)})),p((()=>{var e,t,a,l;if(K.value&&(null==(t=null==(e=q.node)?void 0:e.variations)?void 0:t.nodes)){const e=q.node.variations.nodes.find((e=>e.databaseId===K.value));return null!==(null==e?void 0:e.salePrice)&&void 0!==(null==e?void 0:e.salePrice)}return null!==(null==(a=q.node)?void 0:a.salePrice)&&void 0!==(null==(l=q.node)?void 0:l.salePrice)})),(a,l,o,n)=>{var r,i;const c=s,v=E,p=N,y=I,C=D,R=z,U=t,L=d;l(`<div${w(u({class:"relative group"},n))} data-v-aaa5f5f1>`),e.node.slug?l(j(c,{to:`/produkt/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:m(((t,a,l,o)=>{var n,s,d,r;if(!a)return[f(v,{node:e.node,class:"absolute top-2 right-2"},null,8,["node"]),f(p,{product:e.node},null,8,["product"]),g(J)?(h(),x(y,{key:0,width:T,height:g(A),src:g(J),alt:(null==(d=e.node.image)?void 0:d.altText)||e.node.name||"Product image",title:(null==(r=e.node.image)?void 0:r.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:"sm:140px md:280px",class:"rounded-lg object-top object-cover w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,8,["height","src","alt","title","loading","sizes"])):b("",!0)];a(j(v,{node:e.node,class:"absolute top-2 right-2"},null,l,o)),a(j(p,{product:e.node},null,l,o)),g(J)?a(j(y,{width:T,height:g(A),src:g(J),alt:(null==(n=e.node.image)?void 0:n.altText)||e.node.name||"Product image",title:(null==(s=e.node.image)?void 0:s.title)||e.node.name,loading:e.index<=3?"eager":"lazy",sizes:"sm:140px md:280px",class:"rounded-lg object-top object-cover w-full aspect-9/8",placeholder:"","placeholder-class":"blur-xl"},null,l,o)):a("\x3c!----\x3e")})),_:1},o)):l("\x3c!----\x3e"),l("<div data-v-aaa5f5f1>"),g(k).showReviews?l(j(C,{rating:e.node.averageRating||0,count:e.node.reviewCount||0},null,o)):l("\x3c!----\x3e"),e.node.slug?l(j(c,{to:`/produkt/${decodeURIComponent(e.node.slug)}`,title:e.node.name},{default:m(((t,a,l,o)=>{if(!a)return[f("h2",{class:"mb-2 font-light leading-tight group-hover:text-primary"},_(e.node.name),1)];a(`<h2 class="mb-2 font-light leading-tight group-hover:text-primary" data-v-aaa5f5f1${o}>${$(e.node.name)}</h2>`)})),_:1},o)):l("\x3c!----\x3e"),l('<div class="flex flex-col items-start sm:flex-row sm:items-center sm:justify-between mb-3 min-h-[26px]" data-v-aaa5f5f1>'),l(j(R,{class:"text-sm","sale-price":e.node.salePrice,"regular-price":e.node.regularPrice},null,o)),g(Y)?(l('<div class="flex w-full mt-2 sm:mt-0 sm:justify-end sm:w-[100px]" data-v-aaa5f5f1><select class="text-xs py-1 px-2 border border-gray-300 rounded focus:outline-none focus:border-gray-400 bg-white w-full sm:max-w-[160px]" data-v-aaa5f5f1><option value="" disabled selected data-v-aaa5f5f1>Вариации</option>\x3c!--[--\x3e'),P(null==(i=null==(r=e.node)?void 0:r.variations)?void 0:i.nodes,(e=>{var t,a;l(`<option${S("value",e.databaseId)}${B(g(K)===e.databaseId)?" selected":""} data-v-aaa5f5f1>`),(null==(a=null==(t=e.attributes)?void 0:t.nodes)?void 0:a.length)?l(`\x3c!--[--\x3e${$(e.attributes.nodes.map((e=>e.value)).filter(Boolean).join(" / "))}\x3c!--]--\x3e`):l(`\x3c!--[--\x3e${$(e.name)}\x3c!--]--\x3e`),l("</option>")})),l("\x3c!--]--\x3e</select></div>")):l("\x3c!----\x3e"),l("</div>"),g(V)?l(`<div class="text-red-500 text-xs -mt-2 mb-3" data-v-aaa5f5f1>${$(g(V))}</div>`):l("\x3c!----\x3e"),g(Z)?(l(`<div data-v-aaa5f5f1><div class="flex items-center justify-between space-x-2" data-v-aaa5f5f1><div class="flex items-center h-8 bg-white border border-gray-300 rounded-md" data-v-aaa5f5f1><button type="button" class="flex items-center justify-center w-6 h-full text-xs text-gray-500 transition-colors border-r border-gray-300 hover:bg-gray-50"${B(g(H)<=1)?" disabled":""} data-v-aaa5f5f1>`),l(j(U,{name:"ion:remove",size:"14"},null,o)),l(`</button><input${S("value",g(H))} type="number" min="1" class="w-8 h-full text-xs text-center bg-transparent focus:outline-none" data-v-aaa5f5f1><button type="button" class="flex items-center justify-center w-6 h-full text-xs text-gray-500 transition-colors border-l border-gray-300 hover:bg-gray-50" data-v-aaa5f5f1>`),l(j(U,{name:"ion:add",size:"14"},null,o)),l(`</button></div><button type="button"${B(g(ee))?" disabled":""} class="flex items-center justify-center flex-1 h-8 px-3 text-xs font-medium text-white transition-colors bg-gray-800 rounded-md hover:bg-gray-900 disabled:bg-gray-400 disabled:cursor-not-allowed" data-v-aaa5f5f1><span data-v-aaa5f5f1>Купи</span>`),g(G)?l(j(L,{stroke:"3",size:"10",color:"#fff",class:"ml-1"},null,o)):l("\x3c!----\x3e"),l("</button></div></div>")):l("\x3c!----\x3e"),l("</div></div>")}}}),F=A.setup;A.setup=(e,t)=>{const a=y();return(a.modules||(a.modules=new Set)).add("woonuxt_base/app/components/productElements/ProductCardDetailed.vue"),F?F(e,t):void 0};const M=Object.assign(e(A,[["__scopeId","data-v-aaa5f5f1"]]),{__name:"ProductCardDetailed"});export{D as _,M as a,E as b};globalThis.__timing__.logEnd("Load chunks/build/ProductCardDetailed-rUiUyB7s");
//# sourceMappingURL=ProductCardDetailed-rUiUyB7s.mjs.map
